<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>JADWAL SPORT SLOTGOKIL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg-main: #fff;
      --bg-card: #fff;
      --bg-accent: #f1f3f6;
      --bg-hover: #e3eaf3;
      --border: #d1d5db;
      --text-main: #222;
      --text-muted: #666;
      --accent: #1976d2;
      --accent-dark: #135ba1;
      --bet-bg: #e3f0ff;
      --bet-hover: #bbdefb;
      --tab-bg: #f1f3f6;
      --tab-active: #fff;
      --tab-border: #d1d5db;
      --radius: 14px;
      --shadow: 0 2px 16px rgba(25, 118, 210, 0.07);
      --transition: cubic-bezier(.77,0,.18,1);
    }
    body {
      background: var(--bg-main);
      color: var(--text-main);
      font-family: 'Segoe UI', Arial, Roboto, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }
    /* Welcome Screen */
    #welcome-screen {
      position: fixed;
      z-index: 9999;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      transition: opacity 0.5s var(--transition);
    }
    .welcome-card {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 6px 32px rgba(25, 118, 210, 0.10), 0 1.5px 8px rgba(0,0,0,0.08);
      padding: 38px 32px 32px 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 320px;
      max-width: 94vw;
      animation: fadeIn 0.7s var(--transition);
    }
    .welcome-logo {
      width: 180px;
      max-width: 80vw;
      margin-bottom: 28px;
      display: block;
    }
    .welcome-title {
      font-size: 2.1rem;
      font-weight: bold;
      color: var(--accent);
      text-align: center;
      margin-bottom: 28px;
      letter-spacing: 1px;
      font-family: 'Segoe UI', Arial, Roboto, sans-serif;
    }
    .welcome-btn {
      background: var(--accent);
      color: #fff;
      font-size: 1.25rem;
      font-weight: bold;
      border: none;
      border-radius: 12px;
      padding: 18px 38px;
      cursor: pointer;
      box-shadow: 0 2px 12px rgba(25,118,210,0.08);
      transition: background 0.2s, color 0.2s;
      margin-top: 12px;
      letter-spacing: 1px;
      text-align: center;
      outline: none;
    }
    .welcome-btn:hover, .welcome-btn:focus {
      background: var(--accent-dark);
      color: #fff;
    }
    @keyframes fadeIn {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    /* Jadwal Container */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 8px 32px 8px;
      display: none;
    }
    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 0;
      padding: 18px 0 0 0;
    }
    .date-filter {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      padding: 0 8px;
    }
    .date-filter label {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-main);
      white-space: nowrap;
    }
    .date-select {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-main);
      font-size: 1rem;
      font-weight: 500;
      padding: 8px 12px;
      cursor: pointer;
      outline: none;
      transition: border-color 0.2s, background 0.2s;
      min-width: 140px;
    }
    .date-select:focus {
      border-color: var(--accent);
      background: var(--bg-hover);
    }
    .date-select option {
      background: var(--bg-card);
      color: var(--text-main);
    }
    .sports-tabs {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
      margin: 0;
      flex: 1;
    }
    .sport-btn {
      background: var(--tab-bg);
      border: 1px solid var(--tab-border);
      border-bottom: none;
      border-radius: 7px 7px 0 0;
      color: var(--text-main);
      font-size: 1rem;
      font-weight: 500;
      padding: 8px 18px;
      cursor: pointer;
      outline: none;
      transition: background 0.2s, color 0.2s;
      min-width: 80px;
      white-space: nowrap;
    }
    .sport-btn.active {
      background: var(--tab-active);
      color: var(--accent);
      font-weight: 600;
      border-bottom: 2px solid var(--accent);
    }
    .dark-toggle-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      margin-left: 12px;
      color: var(--text-muted);
      transition: color 0.2s;
    }
    .dark-toggle-btn:hover {
      color: var(--accent);
    }
    .accordion {
      margin-bottom: 18px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg-card);
      overflow: hidden;
      transition: background 0.3s, box-shadow 0.3s var(--transition);
      box-shadow: var(--shadow);
    }
    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      padding: 14px 18px;
      background: var(--bg-accent);
      font-size: 1.08rem;
      font-weight: 600;
      border-bottom: 1px solid var(--border);
      user-select: none;
      transition: background 0.2s;
    }
    .accordion-header:hover, .accordion-header:active {
      background: var(--bg-hover);
    }
    .league-icon {
      font-size: 1.5rem;
      margin-right: 10px;
      flex-shrink: 0;
      display: inline-block;
      vertical-align: middle;
    }
    .accordion-title {
      font-weight: bold;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .accordion-arrow {
      font-size: 1.2em;
      transition: transform 0.3s;
      margin-left: 10px;
      color: var(--text-muted);
    }
    .accordion.expanded .accordion-arrow {
      transform: rotate(90deg);
    }
    .accordion-content {
      max-height: 0;D
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(.4,0,.2,1), padding 0.3s;
      background: var(--bg-card);
      padding: 0 18px;
    }
    .accordion.expanded .accordion-content {
      padding: 14px 18px 18px 18px;
      max-height: none !important;
     overflow: visible !important;
    }
    .league-table-wrap {
      width: 100%;
      overflow-x: auto;
    }
    table.league-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-card);
      font-size: 0.98rem;
      min-width: 420px;
    }
    table.league-table th, table.league-table td {
      padding: 8px 6px;
      text-align: center;
      border-bottom: 1px solid var(--border);
      font-weight: 400;
      color: var(--text-main);
    }
    table.league-table th {
      background: var(--bg-accent);
      font-weight: 600;
      color: var(--text-muted);
      font-size: 0.97rem;
      letter-spacing: 0.5px;
    }
    table.league-table tr {
      background: var(--bg-card);
      transition: background 0.2s;
    }
    table.league-table tr:hover {
      background: var(--bg-hover);
    }
    .bet-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 6px 16px;
      font-size: 0.97rem;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.2s, color 0.2s;
      display: inline-block;
    }
    .bet-btn:hover, .bet-btn:focus {
      background: var(--accent-dark);
      color: #fff;
    }
    .error-msg {
      color: #d32f2f;
      background: #fff0f0;
      border: 1px solid #f5c2c7;
      border-radius: 6px;
      padding: 18px;
      text-align: center;
      margin: 32px 0;
      font-weight: 500;
    }
    .loader {
      text-align: center;
      color: var(--text-muted);
      padding: 32px 0;
      font-size: 1.1rem;
    }
    /* Dark mode */
    .dark-mode {
      --bg-main: #181a20;
      --bg-card: #23252b;
      --bg-accent: #23252b;
      --bg-hover: #222c36;
      --border: #333a45;
      --text-main: #fff;
      --text-muted: #b0b0b0;
      --accent: #90caf9;
      --accent-dark: #1976d2;
    }
    .dark-mode .error-msg {
      background: #2d1a1a;
      color: #ffb4b4;
      border-color: #a33;
    }
    .dark-mode .bet-btn {
      color: #fff;
      background: #1976d2;
    }
    .dark-mode .bet-btn:hover, .dark-mode .bet-btn:focus {
      background: #135ba1;
      color: #fff;
    }
    .dark-mode .date-select {
      background: var(--bg-card);
      color: var(--text-main);
      border-color: var(--border);
    }
    .dark-mode .date-select option {
      background: var(--bg-card);
      color: var(--text-main);
    }
    .dark-mode .accordion-title {
      color: var(--text-main);
    }
    .dark-mode .league-table th {
      color: var(--text-muted);
      background: var(--bg-accent);
    }
    .dark-mode .league-table td {
      color: var(--text-main);
    }
    @media (max-width: 700px) {
      .container { max-width: 100vw; padding: 0 2px 24px 2px; }
      .sports-tabs { font-size: 0.97rem; gap: 4px; }
      .sport-btn { padding: 7px 10px; font-size: 0.97rem; min-width: 60px; }
      .accordion-header { font-size: 1rem; padding: 11px 10px; }
      .accordion-content { padding: 0 10px; }
      .accordion.expanded .accordion-content { padding: 10px 10px 14px 10px; }
      table.league-table th, table.league-table td { 
        padding: 6px 2px; 
        font-size: 0.95rem; 
        word-wrap: break-word;
        max-width: 80px;
      }
      .bet-btn { padding: 5px 10px; font-size: 0.95rem; }
      .welcome-card { padding: 18px 8px 18px 8px; min-width: 0; }
      .welcome-logo { width: 120px; }
      .welcome-title { font-size: 1.1rem; margin-bottom: 18px; }
      .welcome-btn { font-size: 1rem; padding: 10px 18px; }
      .date-filter { 
        padding: 0 2px; 
        flex-wrap: wrap; 
        gap: 4px;
        justify-content: center;
      }
      .date-select { 
        min-width: 120px; 
        font-size: 0.95rem;
        flex: 1;
        max-width: 200px;
      }
      .league-table-wrap {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
    }
    @media (max-width: 480px) {
      table.league-table { 
        min-width: 320px; 
        font-size: 0.93rem; 
      }
      .league-table-wrap { 
        padding: 0; 
        margin: 0 -10px;
      }
      table.league-table th, table.league-table td {
        padding: 4px 2px;
        font-size: 0.9rem;
        text-align: center;
      }
      .bet-btn {
        padding: 4px 8px;
        font-size: 0.85rem;
        min-width: 35px;
      }
      .date-filter {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
      }
      .date-filter label {
        text-align: center;
        font-size: 0.95rem;
      }
      .date-select {
        width: 100%;
        min-width: auto;
        max-width: none;
      }
    }
  </style>
</head>
<body>
  <div id="welcome-screen">
    <div class="welcome-card">
      <img class="welcome-logo" src="https://i.ibb.co/ksD92H7L/sg-logo-200x90-20211713191713-2.png" alt="Logo LDBPLAY">
      <div class="welcome-title">JADWAL SPORT SLOTGOKIL</div>
      <button class="welcome-btn" id="welcome-btn">LIHAT JADWAL SPORT</button>
    </div>
  </div>
  <div class="container">
    <div class="header-bar">
      <div class="sports-tabs" id="sports-tabs"></div>
      <button class="dark-toggle-btn" id="dark-toggle" title="Toggle dark mode">ðŸŒ™</button>
    </div>
    <div class="date-filter">
      <label for="date-select">ðŸ“… Pilih Tanggal:</label>
      <select id="date-select" class="date-select">
        <option value="all">Semua Tanggal</option>
      </select>
    </div>
    <div id="main-content"></div>
  </div>
  <script>
    // Ganti URL_API sesuai endpoint Anda
    const URL_API = 'https://script.google.com/macros/s/AKfycbzoIifvsbqAcfiVvBhNdYsUqSGpu2AwpD2CntfeTseVk8rKatfOJ9pXCH0e4Ox1U1hU-A/exec';

    // Global variables untuk filter tanggal
    let allMatchesData = {};
    let currentSportData = null;
    let selectedDate = 'all';

    // Kategori olahraga + emoji
    const SPORTS = [
      { key: 'bola', label: 'Bola', emoji: 'âš½' },
      { key: 'basket', label: 'Basket', emoji: 'ðŸ€' },
      { key: 'tennis', label: 'Tennis', emoji: 'ðŸŽ¾' },
      { key: 'voli', label: 'Voli', emoji: 'ðŸ' },
      { key: 'badminton', label: 'Badminton', emoji: 'ðŸ¸' },
      { key: 'baseball', label: 'Baseball', emoji: 'âš¾' },
      { key: 'esport', label: 'Esports', emoji: 'ðŸŽ®' }
    ];

    // Mapping emoji bendera negara/turnamen (super lengkap)
    function getLigaIcon(liga) {
      if (!liga) return "ðŸŒ";
      const l = liga.toLowerCase();
      if (l.includes("afghanistan")) return "ðŸ‡¦ðŸ‡«";
      if (l.includes("aland")) return "ðŸ‡¦ðŸ‡½";
      if (l.includes("albania")) return "ðŸ‡¦ðŸ‡±";
      if (l.includes("algeria")) return "ðŸ‡©ðŸ‡¿";
      if (l.includes("american samoa")) return "ðŸ‡¦ðŸ‡¸";
      if (l.includes("andorra")) return "ðŸ‡¦ðŸ‡©";
      if (l.includes("angola")) return "ðŸ‡¦ðŸ‡´";
      if (l.includes("anguilla")) return "ðŸ‡¦ðŸ‡®";
      if (l.includes("antarctica")) return "ðŸ‡¦ðŸ‡¶";
      if (l.includes("antigua") || l.includes("barbuda")) return "ðŸ‡¦ðŸ‡¬";
      if (l.includes("argentina")) return "ðŸ‡¦ðŸ‡·";
      if (l.includes("armenia")) return "ðŸ‡¦ðŸ‡²";
      if (l.includes("aruba")) return "ðŸ‡¦ðŸ‡¼";
      if (l.includes("australia")) return "ðŸ‡¦ðŸ‡º";
      if (l.includes("austria")) return "ðŸ‡¦ðŸ‡¹";
      if (l.includes("azerbaijan")) return "ðŸ‡¦ðŸ‡¿";
      if (l.includes("bahamas")) return "ðŸ‡§ðŸ‡¸";
      if (l.includes("bahrain")) return "ðŸ‡§ðŸ‡­";
      if (l.includes("bangladesh")) return "ðŸ‡§ðŸ‡©";
      if (l.includes("barbados")) return "ðŸ‡§ðŸ‡§";
      if (l.includes("belarus")) return "ðŸ‡§ðŸ‡¾";
      if (l.includes("belgium")) return "ðŸ‡§ðŸ‡ª";
      if (l.includes("belize")) return "ðŸ‡§ðŸ‡¿";
      if (l.includes("benin")) return "ðŸ‡§ðŸ‡¯";
      if (l.includes("bermuda")) return "ðŸ‡§ðŸ‡²";
      if (l.includes("bhutan")) return "ðŸ‡§ðŸ‡¹";
      if (l.includes("bolivia")) return "ðŸ‡§ðŸ‡´";
      if (l.includes("bonaire")) return "ðŸ‡§ðŸ‡¶";
      if (l.includes("bosnia")) return "ðŸ‡§ðŸ‡¦";
      if (l.includes("botswana")) return "ðŸ‡§ðŸ‡¼";
      if (l.includes("bouvet")) return "ðŸ‡§ðŸ‡»";
      if (l.includes("brazil")) return "ðŸ‡§ðŸ‡·";
      if (l.includes("british indian ocean territory")) return "ðŸ‡®ðŸ‡´";
      if (l.includes("brunei")) return "ðŸ‡§ðŸ‡³";
      if (l.includes("bulgaria")) return "ðŸ‡§ðŸ‡¬";
      if (l.includes("burkina faso")) return "ðŸ‡§ðŸ‡«";
      if (l.includes("burundi")) return "ðŸ‡§ðŸ‡®";
      if (l.includes("cabo verde") || l.includes("cape verde")) return "ðŸ‡¨ðŸ‡»";
      if (l.includes("cambodia")) return "ðŸ‡°ðŸ‡­";
      if (l.includes("cameroon")) return "ðŸ‡¨ðŸ‡²";
      if (l.includes("canada")) return "ðŸ‡¨ðŸ‡¦";
      if (l.includes("cayman islands")) return "ðŸ‡°ðŸ‡¾";
      if (l.includes("central african republic")) return "ðŸ‡¨ðŸ‡«";
      if (l.includes("chad")) return "ðŸ‡¹ðŸ‡©";
      if (l.includes("chile")) return "ðŸ‡¨ðŸ‡±";
      if (l.includes("china")) return "ðŸ‡¨ðŸ‡³";
      if (l.includes("christmas island")) return "ðŸ‡¨ðŸ‡½";
      if (l.includes("cocos") || l.includes("keeling")) return "ðŸ‡¨ðŸ‡¨";
      if (l.includes("colombia")) return "ðŸ‡¨ðŸ‡´";
      if (l.includes("comoros")) return "ðŸ‡°ðŸ‡²";
      if (l.includes("congo")) return "ðŸ‡¨ðŸ‡¬";
      if (l.includes("democratic republic of the congo") || l.includes("drc")) return "ðŸ‡¨ðŸ‡©";
      if (l.includes("cook islands")) return "ðŸ‡¨ðŸ‡°";
      if (l.includes("costa rica")) return "ðŸ‡¨ðŸ‡·";
      if (l.includes("cote d'ivoire") || l.includes("ivory coast")) return "ðŸ‡¨ðŸ‡®";
      if (l.includes("croatia")) return "ðŸ‡­ðŸ‡·";
      if (l.includes("cuba")) return "ðŸ‡¨ðŸ‡º";
      if (l.includes("curaÃ§ao")) return "ðŸ‡¨ðŸ‡¼";
      if (l.includes("cyprus")) return "ðŸ‡¨ðŸ‡¾";
      if (l.includes("czech")) return "ðŸ‡¨ðŸ‡¿";
      if (l.includes("denmark")) return "ðŸ‡©ðŸ‡°";
      if (l.includes("djibouti")) return "ðŸ‡©ðŸ‡¯";
      if (l.includes("dominica")) return "ðŸ‡©ðŸ‡²";
      if (l.includes("dominican republic")) return "ðŸ‡©ðŸ‡´";
      if (l.includes("ecuador")) return "ðŸ‡ªðŸ‡¨";
      if (l.includes("egypt")) return "ðŸ‡ªðŸ‡¬";
      if (l.includes("el salvador")) return "ðŸ‡¸ðŸ‡»";
      if (l.includes("england")) return "ðŸ´";
      if (l.includes("scotland")) return "ðŸ´";
      if (l.includes("wales")) return "ðŸ´";
      if (l.includes("northern ireland")) return "ðŸ‡¬ðŸ‡§";
      if (l.includes("uk") || l.includes("united kingdom")) return "ðŸ‡¬ðŸ‡§";
      if (l.includes("equatorial guinea")) return "ðŸ‡¬ðŸ‡¶";
      if (l.includes("eritrea")) return "ðŸ‡ªðŸ‡·";
      if (l.includes("estonia")) return "ðŸ‡ªðŸ‡ª";
      if (l.includes("eswatini") || l.includes("swaziland")) return "ðŸ‡¸ðŸ‡¿";
      if (l.includes("ethiopia")) return "ðŸ‡ªðŸ‡¹";
      if (l.includes("falkland islands")) return "ðŸ‡«ðŸ‡°";
      if (l.includes("faroe islands")) return "ðŸ‡«ðŸ‡´";
      if (l.includes("fiji")) return "ðŸ‡«ðŸ‡¯";
      if (l.includes("finland")) return "ðŸ‡«ðŸ‡®";
      if (l.includes("france")) return "ðŸ‡«ðŸ‡·";
      if (l.includes("french guiana")) return "ðŸ‡¬ðŸ‡«";
      if (l.includes("french polynesia")) return "ðŸ‡µðŸ‡«";
      if (l.includes("french southern territories")) return "ðŸ‡¹ðŸ‡«";
      if (l.includes("gabon")) return "ðŸ‡¬ðŸ‡¦";
      if (l.includes("gambia")) return "ðŸ‡¬ðŸ‡²";
      if (l.includes("georgia")) return "ðŸ‡¬ðŸ‡ª";
      if (l.includes("germany")) return "ðŸ‡©ðŸ‡ª";
      if (l.includes("ghana")) return "ðŸ‡¬ðŸ‡­";
      if (l.includes("gibraltar")) return "ðŸ‡¬ðŸ‡®";
      if (l.includes("greece")) return "ðŸ‡¬ðŸ‡·";
      if (l.includes("greenland")) return "ðŸ‡¬ðŸ‡±";
      if (l.includes("grenada")) return "ðŸ‡¬ðŸ‡©";
      if (l.includes("guadeloupe")) return "ðŸ‡¬ðŸ‡µ";
      if (l.includes("guam")) return "ðŸ‡¬ðŸ‡º";
      if (l.includes("guatemala")) return "ðŸ‡¬ðŸ‡¹";
      if (l.includes("guernsey")) return "ðŸ‡¬ðŸ‡¬";
      if (l.includes("guinea-bissau")) return "ðŸ‡¬ðŸ‡¼";
      if (l.includes("guinea")) return "ðŸ‡¬ðŸ‡³";
      if (l.includes("guyana")) return "ðŸ‡¬ðŸ‡¾";
      if (l.includes("haiti")) return "ðŸ‡­ðŸ‡¹";
      if (l.includes("heard island") || l.includes("mcdonald islands")) return "ðŸ‡­ðŸ‡²";
      if (l.includes("honduras")) return "ðŸ‡­ðŸ‡³";
      if (l.includes("hong kong")) return "ðŸ‡­ðŸ‡°";
      if (l.includes("hungary")) return "ðŸ‡­ðŸ‡º";
      if (l.includes("iceland")) return "ðŸ‡®ðŸ‡¸";
      if (l.includes("india")) return "ðŸ‡®ðŸ‡³";
      if (l.includes("indonesia")) return "ðŸ‡®ðŸ‡©";
      if (l.includes("iran")) return "ðŸ‡®ðŸ‡·";
      if (l.includes("iraq")) return "ðŸ‡®ðŸ‡¶";
      if (l.includes("ireland")) return "ðŸ‡®ðŸ‡ª";
      if (l.includes("isle of man")) return "ðŸ‡®ðŸ‡²";
      if (l.includes("israel")) return "ðŸ‡®ðŸ‡±";
      if (l.includes("italy")) return "ðŸ‡®ðŸ‡¹";
      if (l.includes("jamaica")) return "ðŸ‡¯ðŸ‡²";
      if (l.includes("japan")) return "ðŸ‡¯ðŸ‡µ";
      if (l.includes("jersey")) return "ðŸ‡¯ðŸ‡ª";
      if (l.includes("jordan")) return "ðŸ‡¯ðŸ‡´";
      if (l.includes("kazakhstan")) return "ðŸ‡°ðŸ‡¿";
      if (l.includes("kenya")) return "ðŸ‡°ðŸ‡ª";
      if (l.includes("kiribati")) return "ðŸ‡°ðŸ‡®";
      if (l.includes("north korea")) return "ðŸ‡°ðŸ‡µ";
      if (l.includes("south korea") || l.includes("korea")) return "ðŸ‡°ðŸ‡·";
      if (l.includes("kuwait")) return "ðŸ‡°ðŸ‡¼";
      if (l.includes("kyrgyzstan")) return "ðŸ‡°ðŸ‡¬";
      if (l.includes("laos")) return "ðŸ‡±ðŸ‡¦";
      if (l.includes("latvia")) return "ðŸ‡±ðŸ‡»";
      if (l.includes("lebanon")) return "ðŸ‡±ðŸ‡§";
      if (l.includes("lesotho")) return "ðŸ‡±ðŸ‡¸";
      if (l.includes("liberia")) return "ðŸ‡±ðŸ‡·";
      if (l.includes("libya")) return "ðŸ‡±ðŸ‡¾";
      if (l.includes("liechtenstein")) return "ðŸ‡±ðŸ‡®";
      if (l.includes("lithuania")) return "ðŸ‡±ðŸ‡¹";
      if (l.includes("luxembourg")) return "ðŸ‡±ðŸ‡º";
      if (l.includes("macau")) return "ðŸ‡²ðŸ‡´";
      if (l.includes("madagascar")) return "ðŸ‡²ðŸ‡¬";
      if (l.includes("malawi")) return "ðŸ‡²ðŸ‡¼";
      if (l.includes("malaysia")) return "ðŸ‡²ðŸ‡¾";
      if (l.includes("maldives")) return "ðŸ‡²ðŸ‡»";
      if (l.includes("mali")) return "ðŸ‡²ðŸ‡±";
      if (l.includes("malta")) return "ðŸ‡²ðŸ‡¹";
      if (l.includes("marshall islands")) return "ðŸ‡²ðŸ‡­";
      if (l.includes("martinique")) return "ðŸ‡²ðŸ‡¶";
      if (l.includes("mauritania")) return "ðŸ‡²ðŸ‡·";
      if (l.includes("mauritius")) return "ðŸ‡²ðŸ‡º";
      if (l.includes("mayotte")) return "ðŸ‡¾ðŸ‡¹";
      if (l.includes("mexico")) return "ðŸ‡²ðŸ‡½";
      if (l.includes("micronesia")) return "ðŸ‡«ðŸ‡²";
      if (l.includes("moldova")) return "ðŸ‡²ðŸ‡©";
      if (l.includes("monaco")) return "ðŸ‡²ðŸ‡¨";
      if (l.includes("mongolia")) return "ðŸ‡²ðŸ‡³";
      if (l.includes("montenegro")) return "ðŸ‡²ðŸ‡ª";
      if (l.includes("montserrat")) return "ðŸ‡²ðŸ‡¸";
      if (l.includes("morocco")) return "ðŸ‡²ðŸ‡¦";
      if (l.includes("mozambique")) return "ðŸ‡²ðŸ‡¿";
      if (l.includes("myanmar") || l.includes("burma")) return "ðŸ‡²ðŸ‡²";
      if (l.includes("namibia")) return "ðŸ‡³ðŸ‡¦";
      if (l.includes("nauru")) return "ðŸ‡³ðŸ‡·";
      if (l.includes("nepal")) return "ðŸ‡³ðŸ‡µ";
      if (l.includes("netherlands")) return "ðŸ‡³ðŸ‡±";
      if (l.includes("new caledonia")) return "ðŸ‡³ðŸ‡¨";
      if (l.includes("new zealand")) return "ðŸ‡³ðŸ‡¿";
      if (l.includes("nicaragua")) return "ðŸ‡³ðŸ‡®";
      if (l.includes("niger")) return "ðŸ‡³ðŸ‡ª";
      if (l.includes("nigeria")) return "ðŸ‡³ðŸ‡¬";
      if (l.includes("niue")) return "ðŸ‡³ðŸ‡º";
      if (l.includes("norfolk island")) return "ðŸ‡³ðŸ‡«";
      if (l.includes("north macedonia")) return "ðŸ‡²ðŸ‡°";
      if (l.includes("northern mariana islands")) return "ðŸ‡²ðŸ‡µ";
      if (l.includes("norway")) return "ðŸ‡³ðŸ‡´";
      if (l.includes("oman")) return "ðŸ‡´ðŸ‡²";
      if (l.includes("pakistan")) return "ðŸ‡µðŸ‡°";
      if (l.includes("palau")) return "ðŸ‡µðŸ‡¼";
      if (l.includes("palestine")) return "ðŸ‡µðŸ‡¸";
      if (l.includes("panama")) return "ðŸ‡µðŸ‡¦";
      if (l.includes("papua new guinea")) return "ðŸ‡µðŸ‡¬";
      if (l.includes("paraguay")) return "ðŸ‡µðŸ‡¾";
      if (l.includes("peru")) return "ðŸ‡µðŸ‡ª";
      if (l.includes("philippines")) return "ðŸ‡µðŸ‡­";
      if (l.includes("pitcairn")) return "ðŸ‡µðŸ‡³";
      if (l.includes("poland")) return "ðŸ‡µðŸ‡±";
      if (l.includes("portugal")) return "ðŸ‡µðŸ‡¹";
      if (l.includes("puerto rico")) return "ðŸ‡µðŸ‡·";
      if (l.includes("qatar")) return "ðŸ‡¶ðŸ‡¦";
      if (l.includes("reunion")) return "ðŸ‡·ðŸ‡ª";
      if (l.includes("romania")) return "ðŸ‡·ðŸ‡´";
      if (l.includes("russia")) return "ðŸ‡·ðŸ‡º";
      if (l.includes("rwanda")) return "ðŸ‡·ðŸ‡¼";
      if (l.includes("saint barthelemy")) return "ðŸ‡§ðŸ‡±";
      if (l.includes("saint helena")) return "ðŸ‡¸ðŸ‡­";
      if (l.includes("saint kitts") || l.includes("nevis")) return "ðŸ‡°ðŸ‡³";
      if (l.includes("saint lucia")) return "ðŸ‡±ðŸ‡¨";
      if (l.includes("saint martin")) return "ðŸ‡²ðŸ‡«";
      if (l.includes("saint pierre") || l.includes("miquelon")) return "ðŸ‡µðŸ‡²";
      if (l.includes("saint vincent") || l.includes("grenadines")) return "ðŸ‡»ðŸ‡¨";
      if (l.includes("samoa")) return "ðŸ‡¼ðŸ‡¸";
      if (l.includes("san marino")) return "ðŸ‡¸ðŸ‡²";
      if (l.includes("sao tome") || l.includes("principe")) return "ðŸ‡¸ðŸ‡¹";
      if (l.includes("saudi arabia")) return "ðŸ‡¸ðŸ‡¦";
      if (l.includes("senegal")) return "ðŸ‡¸ðŸ‡³";
      if (l.includes("serbia")) return "ðŸ‡·ðŸ‡¸";
      if (l.includes("seychelles")) return "ðŸ‡¸ðŸ‡¨";
      if (l.includes("sierra leone")) return "ðŸ‡¸ðŸ‡±";
      if (l.includes("singapore")) return "ðŸ‡¸ðŸ‡¬";
      if (l.includes("sint maarten")) return "ðŸ‡¸ðŸ‡½";
      if (l.includes("slovakia")) return "ðŸ‡¸ðŸ‡°";
      if (l.includes("slovenia")) return "ðŸ‡¸ðŸ‡®";
      if (l.includes("solomon islands")) return "ðŸ‡¸ðŸ‡§";
      if (l.includes("somalia")) return "ðŸ‡¸ðŸ‡´";
      if (l.includes("south africa")) return "ðŸ‡¿ðŸ‡¦";
      if (l.includes("south georgia") || l.includes("south sandwich")) return "ðŸ‡¬ðŸ‡¸";
      if (l.includes("south sudan")) return "ðŸ‡¸ðŸ‡¸";
      if (l.includes("spain")) return "ðŸ‡ªðŸ‡¸";
      if (l.includes("sri lanka")) return "ðŸ‡±ðŸ‡°";
      if (l.includes("sudan")) return "ðŸ‡¸ðŸ‡©";
      if (l.includes("suriname")) return "ðŸ‡¸ðŸ‡·";
      if (l.includes("svalbard") || l.includes("jan mayen")) return "ðŸ‡¸ðŸ‡¯";
      if (l.includes("sweden")) return "ðŸ‡¸ðŸ‡ª";
      if (l.includes("switzerland")) return "ðŸ‡¨ðŸ‡­";
      if (l.includes("syria")) return "ðŸ‡¸ðŸ‡¾";
      if (l.includes("taiwan")) return "ðŸ‡¹ðŸ‡¼";
      if (l.includes("tajikistan")) return "ðŸ‡¹ðŸ‡¯";
      if (l.includes("tanzania")) return "ðŸ‡¹ðŸ‡¿";
      if (l.includes("thailand")) return "ðŸ‡¹ðŸ‡­";
      if (l.includes("timor-leste") || l.includes("east timor")) return "ðŸ‡¹ðŸ‡±";
      if (l.includes("togo")) return "ðŸ‡¹ðŸ‡¬";
      if (l.includes("tokelau")) return "ðŸ‡¹ðŸ‡°";
      if (l.includes("tonga")) return "ðŸ‡¹ðŸ‡´";
      if (l.includes("trinidad") || l.includes("tobago")) return "ðŸ‡¹ðŸ‡¹";
      if (l.includes("tunisia")) return "ðŸ‡¹ðŸ‡³";
      if (l.includes("turkey")) return "ðŸ‡¹ðŸ‡·";
      if (l.includes("turkmenistan")) return "ðŸ‡¹ðŸ‡²";
      if (l.includes("turks") || l.includes("caicos")) return "ðŸ‡¹ðŸ‡¨";
      if (l.includes("tuvalu")) return "ðŸ‡¹ðŸ‡»";
      if (l.includes("uganda")) return "ðŸ‡ºðŸ‡¬";
      if (l.includes("ukraine")) return "ðŸ‡ºðŸ‡¦";
      if (l.includes("united arab emirates") || l.includes("uae")) return "ðŸ‡¦ðŸ‡ª";
      if (l.includes("united states") || l.includes("usa") || l.includes("mls")) return "ðŸ‡ºðŸ‡¸";
      if (l.includes("uruguay")) return "ðŸ‡ºðŸ‡¾";
      if (l.includes("uzbekistan")) return "ðŸ‡ºðŸ‡¿";
      if (l.includes("vanuatu")) return "ðŸ‡»ðŸ‡º";
      if (l.includes("vatican")) return "ðŸ‡»ðŸ‡¦";
      if (l.includes("venezuela")) return "ðŸ‡»ðŸ‡ª";
      if (l.includes("vietnam")) return "ðŸ‡»ðŸ‡³";
      if (l.includes("virgin islands")) return "ðŸ‡»ðŸ‡®";
      if (l.includes("wallis") || l.includes("futuna")) return "ðŸ‡¼ðŸ‡«";
      if (l.includes("western sahara")) return "ðŸ‡ªðŸ‡­";
      if (l.includes("yemen")) return "ðŸ‡¾ðŸ‡ª";
      if (l.includes("zambia")) return "ðŸ‡¿ðŸ‡²";
      if (l.includes("zimbabwe")) return "ðŸ‡¿ðŸ‡¼";
      // ASEAN, AFF, CAF, UEFA, CONMEBOL, CONCACAF, OFC, CAF, dst
      if (l.includes("asean") || l.includes("aff") || l.includes("caf") || l.includes("uefa") || l.includes("conmebol") || l.includes("concacaf") || l.includes("ofc")) return "ðŸŒ";
      return "ðŸŒ";
    }

    // Render tabs kategori olahraga
    function renderSportsTabs(activeSport) {
      const tabs = document.getElementById('sports-tabs');
      tabs.innerHTML = '';
      SPORTS.forEach(sport => {
        const btn = document.createElement('button');
        btn.className = 'sport-btn' + (sport.key === activeSport ? ' active' : '');
        btn.textContent = sport.emoji + ' ' + sport.label;
        btn.onclick = () => {
          if (window.currentSport !== sport.key) {
            window.currentSport = sport.key;
            renderSportsTabs(sport.key);
            fetchAndRenderLeagues(sport.key);
          }
        };
        tabs.appendChild(btn);
      });
    }

    // Loader
    function showLoader() {
      document.getElementById('main-content').innerHTML =
        '<div class="loader">Memuat jadwal...</div>';
    }

    // Error
    function showError(msg) {
      document.getElementById('main-content').innerHTML =
        `<div class="error-msg">${msg}</div>`;
    }

    // Get today's date in DD/MM/YYYY format
    function getTodayDate() {
      const today = new Date();
      const day = String(today.getDate()).padStart(2, '0');
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const year = today.getFullYear();
      return `${day}/${month}/${year}`;
    }

    // Populate date select options
    function populateDateOptions(leagues) {
      const dateSelect = document.getElementById('date-select');
      const dates = new Set();
      
      // Collect all unique dates
      Object.values(leagues).forEach(matches => {
        matches.forEach(match => {
          if (match.tanggal) {
            dates.add(match.tanggal);
          }
        });
      });
      
      // Sort dates
      const sortedDates = Array.from(dates).sort((a, b) => {
        let dateA = a.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
        let dateB = b.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
        return new Date(dateA) - new Date(dateB);
      });
      
      // Clear existing options except "Semua Tanggal"
      dateSelect.innerHTML = '<option value="all">Semua Tanggal</option>';
      
      // Get today's date
      const today = getTodayDate();
      let todayExists = false;
      
      // Add date options
      sortedDates.forEach(date => {
        const option = document.createElement('option');
        option.value = date;
        option.textContent = date;
        
        // Check if this is today's date
        if (date === today) {
          todayExists = true;
          option.textContent = date + ' (Hari Ini)';
          option.style.fontWeight = 'bold';
          option.style.color = '#1976d2';
        }
        
        if (date === selectedDate) {
          option.selected = true;
        }
        dateSelect.appendChild(option);
      });
      
      // Auto-select today's date if it exists and no date is currently selected
      if (todayExists && selectedDate === 'all') {
        selectedDate = today;
        dateSelect.value = today;
      }
    }

    // Filter leagues by selected date
    function filterLeaguesByDate(leagues, targetDate) {
      if (targetDate === 'all') {
        return leagues;
      }
      
      const filtered = {};
      Object.entries(leagues).forEach(([league, matches]) => {
        const filteredMatches = matches.filter(match => match.tanggal === targetDate);
        if (filteredMatches.length > 0) {
          filtered[league] = filteredMatches;
        }
      });
      
      return filtered;
    }

    // Render liga dan pertandingan
    function renderLeagues(leagues, sportKey) {
      const main = document.getElementById('main-content');
      main.innerHTML = '';
      
      // Store original data
      currentSportData = leagues;
      
      // Populate date options
      populateDateOptions(leagues);
      
      // Filter by selected date
      const filteredLeagues = filterLeaguesByDate(leagues, selectedDate);
      
      if (!filteredLeagues || Object.keys(filteredLeagues).length === 0) {
        main.innerHTML = '<div class="error-msg">Tidak ada jadwal tersedia untuk tanggal yang dipilih.</div>';
        return;
      }
      Object.entries(filteredLeagues).forEach(([league, matches], idx) => {
        // Accordion
        const accordion = document.createElement('div');
        accordion.className = 'accordion' + (idx === 0 ? ' expanded' : '');

        // Header
        const header = document.createElement('div');
        header.className = 'accordion-header';
        header.innerHTML = `
          <span class="accordion-title">
            <span class="league-icon">${getLigaIcon(league)}</span>
            ${escapeHTML(league)}
          </span>
          <span class="accordion-arrow">&#9654;</span>`;
        header.onclick = () => {
          accordion.classList.toggle('expanded');
        };

        // Content
        const content = document.createElement('div');
        content.className = 'accordion-content';

        // Table
        const tableWrap = document.createElement('div');
        tableWrap.className = 'league-table-wrap';
        const table = document.createElement('table');
        table.className = 'league-table';
        table.innerHTML = `
          <thead>
            <tr>
              <th>Tanggal</th>
              <th>Jam</th>
              <th>Home</th>
              <th>Away</th>
              <th>BET</th>
            </tr>
          </thead>
          <tbody>
            ${matches.map(m => `
              <tr>
                <td>${escapeHTML(m.tanggal || '')}</td>
                <td>${escapeHTML(m.jam || '')}</td>
                <td>${escapeHTML(m.home || m.tima || '')}</td>
                <td>${escapeHTML(m.away || m.timb || '')}</td>
                <td>
                  <a class="bet-btn" href="${m.linkbet || '#'}" target="_blank" rel="noopener">BET</a>
                </td>
              </tr>
            `).join('')}
          </tbody>
        `;
        tableWrap.appendChild(table);
        content.appendChild(tableWrap);

        accordion.appendChild(header);
        accordion.appendChild(content);
        main.appendChild(accordion);
      });
    }

    // Escape HTML for safety
    function escapeHTML(str) {
      return String(str || '').replace(/[&<>"']/g, function(m) {
        return ({'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'})[m];
      });
    }

    // Fetch data dari API dan group by liga
    async function fetchAndRenderLeagues(sport) {
      showLoader();
      try {
        const res = await fetch(URL_API + '?sport=' + encodeURIComponent(sport));
        if (!res.ok) throw new Error('Gagal fetch');
        const jadwal = await res.json();

        // Group by liga
        const ligaMap = {};
        if (sport === 'esport') {
          jadwal.forEach(j => {
            if (!j.game || !j.turnamen || !j.tanggal || !j.jam || !j.tima || !j.timb || !j.linkbet) return;
            const ligaName = j.game + ' - ' + j.turnamen;
            if (!ligaMap[ligaName]) ligaMap[ligaName] = [];
            ligaMap[ligaName].push(j);
          });
        } else {
          jadwal.forEach(j => {
            if (!j.liga || !j.tanggal || !j.jam || !(j.home || j.tima) || !(j.away || j.timb) || !j.linkbet) return;
            if (!ligaMap[j.liga]) ligaMap[j.liga] = [];
            ligaMap[j.liga].push(j);
          });
        }

        // Sort jadwal per liga by tanggal & jam
        Object.values(ligaMap).forEach(arr => {
          arr.sort((a, b) => {
            let tglA = (a.tanggal || '').replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
            let tglB = (b.tanggal || '').replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
            let dateA = new Date(tglA + ' ' + (a.jam || ''));
            let dateB = new Date(tglB + ' ' + (b.jam || ''));
            return dateA - dateB;
          });
        });

        renderLeagues(ligaMap, sport);
      } catch (e) {
        showError('Gagal mengambil data, silakan refresh.');
      }
    }

    // Date filter event listener
    document.getElementById('date-select').addEventListener('change', function() {
      selectedDate = this.value;
      if (currentSportData) {
        renderLeagues(currentSportData, window.currentSport);
      }
    });

    // Dark mode toggle
    const darkToggleBtn = document.getElementById('dark-toggle');
    darkToggleBtn.onclick = function() {
      document.body.classList.toggle('dark-mode');
      darkToggleBtn.textContent = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
    };

    // Welcome screen logic
    const welcomeScreen = document.getElementById('welcome-screen');
    const container = document.querySelector('.container');
    const welcomeBtn = document.getElementById('welcome-btn');
    welcomeBtn.onclick = function() {
      welcomeScreen.style.opacity = '0';
      setTimeout(() => {
        welcomeScreen.style.display = 'none';
        container.style.display = 'block';
      }, 400);
      window.currentSport = SPORTS[0].key;
      renderSportsTabs(window.currentSport);
      fetchAndRenderLeagues(window.currentSport);
    };

    // Touch support for accordion (optional, for mobile)
    document.addEventListener('touchstart', function(){}, {passive:true});
  </script>
</body>
</html>
