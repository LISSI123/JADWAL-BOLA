<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>JADWAL SPORT SLOTGOKIL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Global Professional Enhancements */
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Allow text selection only where needed */
    input, textarea, .selectable-text {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }

    /* Improve button interactions */
    button, .clickable {
      cursor: pointer;
      outline: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    button:focus, .clickable:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    @media (hover: none) {
      button:focus, .clickable:focus {
        outline: none;
      }
    }

    :root {
      --bg-main: #f2f4f5;
      --bg-card: #ffffff;
      --bg-accent: #f8f9fa;
      --bg-hover: #e8f4f8;
      --border: #e0e3e7;
      --text-main: #1a1a1a;
      --text-muted: #737373;
      --accent: #00a63f;
      --accent-dark: #008631;
      --bet-bg: #00a63f;
      --bet-hover: #008631;
      --tab-bg: #ffffff;
      --tab-active: #00a63f;
      --tab-border: #e0e3e7;
      --radius: 8px;
      --shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.08);
      --transition: all 0.2s ease;
      --flashscore-orange: #ff6600;
      --flashscore-green: #00a63f;
      --flashscore-red: #d32f2f;
      --live-indicator: #ff0000;
    }
    
    /* üéØ SMOOTH BASE STYLES */
    html {
      scroll-behavior: smooth;
    }
    
    body {
      background: var(--bg-main);
      color: var(--text-main);
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, 'Inter', 'SF Pro Text', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 14px;
      line-height: 1.5;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      overflow-x: hidden;
    }
    /* Enhanced Welcome Screen - Modern & Attractive */
    #welcome-screen {
      position: fixed;
      z-index: 9999;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, #667aff 0%, #f093fb 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }
    
    /* Animated Background Shapes */
    #welcome-screen::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
      animation: floatBackground 20s linear infinite;
    }
    
    @keyframes floatBackground {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(-60px, -60px) rotate(360deg); }
    }
    
    .welcome-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 32px;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.15),
        0 8px 32px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      padding: 48px 40px 40px 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 380px;
      max-width: 90vw;
      position: relative;
      overflow: hidden;
      transform: translateY(20px);
      animation: slideUpFade 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    
    @keyframes slideUpFade {
      0% {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* Glowing border effect */
    .welcome-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 32px;
      padding: 2px;
      background: linear-gradient(45deg, #667aff, #f093fb, #667aff);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: exclude;
      opacity: 0.6;
      animation: borderGlow 3s ease-in-out infinite alternate;
    }
    
    @keyframes borderGlow {
      0% { opacity: 0.6; }
      100% { opacity: 1; }
    }
    /* Enhanced Logo Section */
    .welcome-logo {
      position: relative;
      margin-bottom: 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: logoEntrance 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.5s both;
    }
    
    @keyframes logoEntrance {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.8);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* Main Logo Container */
    .logo-container {
      position: relative;
      margin-bottom: 16px;
      animation: logoFloat 3s ease-in-out infinite;
    }
    
    @keyframes logoFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    
    /* Circular Logo Background */
    .logo-bg {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #667aff 0%, #f093fb 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 
        0 12px 32px rgba(102, 122, 255, 0.3),
        0 4px 16px rgba(240, 147, 251, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    /* Pulsing effect for logo */
    .logo-bg::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(135deg, #667aff, #f093fb);
      border-radius: 50%;
      z-index: -1;
      animation: logoPulse 2s ease-in-out infinite;
    }
    
    @keyframes logoPulse {
      0%, 100% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.1); opacity: 1; }
    }
    
    .logo-text {
      font-size: 42px;
      font-weight: 900;
      color: white;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
      animation: logoTextGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes logoTextGlow {
      0% { text-shadow: 0 2px 8px rgba(0,0,0,0.2); }
      100% { text-shadow: 0 2px 8px rgba(0,0,0,0.2), 0 0 20px rgba(255,255,255,0.3); }
    }
    
    /* Floating Sport Icons Around Logo */
    .sport-icons {
      position: absolute;
      width: 160px;
      height: 160px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: iconsRotate 20s linear infinite;
    }
    
    @keyframes iconsRotate {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    .sport-icon {
      position: absolute;
      width: 28px;
      height: 28px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: iconFloat 3s ease-in-out infinite;
    }
    
    @keyframes iconFloat {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-4px) scale(1.1); }
    }
    
    .sport-icon:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); animation-delay: 0s; }
    .sport-icon:nth-child(2) { top: 25%; right: 0; animation-delay: 0.5s; }
    .sport-icon:nth-child(3) { bottom: 25%; right: 0; animation-delay: 1s; }
    .sport-icon:nth-child(4) { bottom: 0; left: 50%; transform: translateX(-50%); animation-delay: 1.5s; }
    .sport-icon:nth-child(5) { bottom: 25%; left: 0; animation-delay: 2s; }
    .sport-icon:nth-child(6) { top: 25%; left: 0; animation-delay: 2.5s; }
    /* Enhanced Welcome Title */
    .welcome-title {
      font-size: 2.4rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667aff 0%, #f093fb 50%, #667aff 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 200% 100%;
      text-align: center;
      margin-bottom: 24px;
      letter-spacing: 1.2px;
      font-family: 'Segoe UI', Arial, sans-serif;
      position: relative;
      animation: titleGradientMove 3s ease-in-out infinite, titleSlideIn 1s cubic-bezier(0.4, 0, 0.2, 1) 0.8s both;
    }
    
    @keyframes titleGradientMove {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes titleSlideIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Subtitle with typing effect */
    .welcome-subtitle {
      font-size: 1.1rem;
      color: #666;
      text-align: center;
      margin-bottom: 32px;
      font-weight: 500;
      line-height: 1.5;
      animation: subtitleFadeIn 1s cubic-bezier(0.4, 0, 0.2, 1) 1.2s both;
      position: relative;
    }
    
    @keyframes subtitleFadeIn {
      0% {
        opacity: 0;
        transform: translateY(15px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Typing cursor effect */
    .welcome-subtitle::after {
      content: '|';
      color: #667aff;
      animation: blink 1s infinite;
      margin-left: 2px;
    }
    
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    /* Enhanced Welcome Button */
    .welcome-btn {
      background: linear-gradient(135deg, #667aff 0%, #f093fb 100%);
      color: #fff;
      font-size: 1.3rem;
      font-weight: 700;
      border: none;
      border-radius: 20px;
      padding: 20px 48px;
      cursor: pointer;
      box-shadow: 
        0 8px 32px rgba(102, 122, 255, 0.3),
        0 4px 16px rgba(240, 147, 251, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      margin-top: 16px;
      letter-spacing: 1.2px;
      text-align: center;
      outline: none;
      position: relative;
      overflow: hidden;
      transform: translateY(0);
      animation: buttonSlideIn 1s cubic-bezier(0.4, 0, 0.2, 1) 1.5s both;
    }
    
    @keyframes buttonSlideIn {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* Shimmer effect on button */
    .welcome-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.6s;
    }
    
    .welcome-btn:hover::before {
      left: 100%;
    }
    
    .welcome-btn:hover, .welcome-btn:focus {
      background: linear-gradient(135deg, #5a6cff 0%, #e785f0 100%);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 
        0 12px 40px rgba(102, 122, 255, 0.4),
        0 6px 20px rgba(240, 147, 251, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      color: #fff;
    }
    
    .welcome-btn:active {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 
        0 6px 24px rgba(102, 122, 255, 0.3),
        0 3px 12px rgba(240, 147, 251, 0.2);
    }
    
    /* Button text with glow effect */
    .welcome-btn span {
      position: relative;
      z-index: 1;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
      transition: text-shadow 0.3s ease;
    }
    
    .welcome-btn:hover span {
      text-shadow: 0 1px 2px rgba(0,0,0,0.1), 0 0 20px rgba(255,255,255,0.3);
    }
    @keyframes fadeIn {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    /* Container & Layout - Compact Flashscore Style */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 8px;
      background: var(--bg-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Main Content with Scrollable Area */
    #main-content {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      max-height: calc(100vh - 200px);
      padding-right: 4px;
      margin-right: -4px;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Custom Scrollbar for Main Content */
    #main-content::-webkit-scrollbar {
      width: 6px;
    }
    
    #main-content::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.05);
      border-radius: 3px;
    }
    
    #main-content::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.2);
      border-radius: 3px;
      transition: background 0.3s ease;
    }
    
    #main-content::-webkit-scrollbar-thumb:hover {
      background: rgba(0,0,0,0.4);
    }
    
    /* Firefox Scrollbar */
    #main-content {
      scrollbar-width: thin;
      scrollbar-color: rgba(0,0,0,0.2) rgba(0,0,0,0.05);
    }
    
    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      padding: 8px 12px;
      background: var(--bg-card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .flashscore-header {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: var(--text-main);
      font-size: 14px;
    }
    
    .flashscore-logo {
      width: 20px;
      height: 20px;
      background: var(--flashscore-orange);
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 10px;
    }
    
    .date-filter {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      padding: 6px 12px;
      background: var(--bg-card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      flex-wrap: wrap;
    }
    
    .date-filter label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-main);
      white-space: nowrap;
    }
    
    .quick-filters {
      display: flex;
      gap: 4px;
      margin-left: auto;
    }
    
    .quick-filter-btn {
      background: var(--bg-accent);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text-main);
      font-size: 10px;
      font-weight: 600;
      padding: 3px 8px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      white-space: nowrap;
      position: relative;
      overflow: hidden;
      transform: translateZ(0);
    }
    
    .quick-filter-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.4s ease;
    }
    
    .quick-filter-btn:hover::before {
      left: 100%;
    }
    
    .quick-filter-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 2px 8px rgba(0, 166, 63, 0.2);
    }
    
    .quick-filter-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 8px;
      padding: 6px 12px;
      background: var(--bg-card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      font-size: 12px;
      font-weight: 500;
      color: var(--text-main);
      padding: 4px 0;
    }
    
    .search-input::placeholder {
      color: var(--text-muted);
    }
    
    .clear-search-btn {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 14px;
      padding: 2px;
      border-radius: 2px;
      transition: var(--transition);
      display: none;
    }
    
    .clear-search-btn:hover {
      background: var(--bg-accent);
      color: var(--text-main);
    }
    
    .clear-search-btn.show {
      display: block;
    }
    
    .date-select {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text-main);
      font-size: 12px;
      font-weight: 500;
      padding: 4px 8px;
      cursor: pointer;
      outline: none;
      transition: var(--transition);
      min-width: 120px;
    }
    
    .date-select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(0, 166, 63, 0.1);
    }
    
    .sports-tabs {
      display: flex;
      gap: 2px;
      overflow-x: auto;
      flex: 1;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .sports-tabs::-webkit-scrollbar {
      display: none;
    }
    
    .sport-btn {
      background: var(--tab-bg);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text-main);
      font-size: 11px;
      font-weight: 500;
      padding: 4px 8px;
      cursor: pointer;
      outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      white-space: nowrap;
      min-width: auto;
      position: relative;
      overflow: hidden;
      transform: translateZ(0);
    }
    
    .sport-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .sport-btn:hover::before {
      left: 100%;
    }
    
    .sport-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      font-weight: 600;
      transform: scale(1.02);
      box-shadow: 0 2px 8px rgba(0, 166, 63, 0.3);
    }
    
    .sport-btn:hover:not(.active) {
      background: var(--bg-hover);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    /* Professional Date Navigation Styles */
    .date-navigator {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 16px;
    }

    .date-navigation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .nav-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      width: 36px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }

    .nav-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0, 166, 63, 0.3);
    }

    #currentDateDisplay {
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      min-width: 110px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
      border: 2px solid transparent;
    }

    #currentDateDisplay.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      box-shadow: 0 2px 8px rgba(0, 166, 63, 0.3);
    }

    #currentDateDisplay:not(.active) {
      background: var(--bg-card);
      border: 2px solid var(--border);
    }

    #currentDateDisplay:hover:not(.active) {
      border-color: var(--accent);
      background: var(--bg-hover);
    }

    .quick-date-buttons {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .quick-date-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s ease;
      user-select: none;
      min-width: 44px;
      text-align: center;
    }

    .quick-date-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0, 166, 63, 0.3);
    }

    .quick-date-btn:not(.active):hover {
      background: var(--bg-hover);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    /* Professional Mobile Responsive for Date Navigation */
    @media (max-width: 768px) {
      .date-navigator {
        padding: 10px 12px;
        margin: 10px -6px 12px -6px;
        border-radius: 0;
        border-left: none;
        border-right: none;
      }

      .date-navigation {
        margin-bottom: 10px;
        gap: 6px;
      }

      .nav-btn {
        width: 32px;
        height: 32px;
        font-size: 12px;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }

      #currentDateDisplay {
        padding: 8px 16px;
        font-size: 13px;
        min-width: 100px;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }

      .quick-date-buttons {
        gap: 4px;
        justify-content: space-between;
      }

      .quick-date-btn {
        padding: 6px 8px;
        font-size: 10px;
        min-width: 38px;
        flex: 1;
        max-width: 46px;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
    }

    @media (max-width: 480px) {
      .date-navigator {
        padding: 8px 10px;
      }

      .nav-btn {
        width: 28px;
        height: 28px;
        font-size: 11px;
      }

      #currentDateDisplay {
        padding: 6px 12px;
        font-size: 12px;
        min-width: 90px;
      }

      .quick-date-btn {
        padding: 5px 6px;
        font-size: 9px;
        min-width: 32px;
        max-width: 40px;
      }
    }

    /* Additional Professional Touch Improvements */
    @media (hover: none) and (pointer: coarse) {
      /* Mobile/touch devices only */
      .nav-btn:hover,
      .quick-date-btn:not(.active):hover,
      #currentDateDisplay:hover:not(.active) {
        transform: none;
        background: var(--bg-card);
        border-color: var(--border);
      }
      
      .nav-btn:active {
        background: var(--accent);
        color: white;
        transform: scale(0.95);
      }
      
      .quick-date-btn:not(.active):active {
        background: var(--bg-hover);
        transform: scale(0.95);
      }
      
      #currentDateDisplay:not(.active):active {
        background: var(--bg-hover);
        transform: scale(0.98);
      }
    }

    .dark-toggle-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      margin-left: 12px;
      color: var(--text-muted);
      transition: color 0.2s;
    }
    .dark-toggle-btn:hover {
      color: var(--accent);
    }
    /* League Match Cards - Ultra Compact Style dengan Smooth Animations */
    .accordion {
      margin-bottom: 3px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg-card);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      transform: translateZ(0);
      will-change: transform, box-shadow;
    }
    
    .accordion:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateY(-1px);
    }
    
    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      padding: 6px 10px;
      background: var(--bg-accent);
      font-size: 12px;
      font-weight: 700;
      border-bottom: 1px solid var(--border);
      user-select: none;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      min-height: 28px;
      letter-spacing: 0.3px;
      position: relative;
      overflow: hidden;
    }
    
    .accordion-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s ease;
    }
    
    .accordion-header:hover::before {
      left: 100%;
    }
    
    .accordion-header:hover {
      background: var(--bg-hover);
      color: var(--primary-color);
    }
    
    .league-icon {
      font-size: 13px;
      margin-right: 5px;
      flex-shrink: 0;
    }
    
    .accordion-title {
      font-weight: 700;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      letter-spacing: 0.2px;
    }
    
    .accordion-arrow {
      font-size: 8px;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      color: var(--text-muted);
      width: 10px;
      height: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .accordion.expanded .accordion-arrow {
      transform: rotate(90deg);
    }
    
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: var(--bg-card);
      opacity: 0;
      transform: translateY(-10px);
    }
    
    .accordion.expanded .accordion-content {
      max-height: none;
      overflow: visible;
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Professional Match Row Style dengan Smooth Animations */
    .match-row {
      display: flex;
      align-items: center;
      padding: 5px 10px;
      border-bottom: 1px solid var(--border);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      min-height: 32px;
      position: relative;
      overflow: hidden;
    }
    
    .match-row::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
      transition: left 0.6s ease;
    }
    
    .match-row:hover::before {
      left: 100%;
    }
    
    /* Skeleton loading animation */
    .match-row:has(.team-name:contains("Loading")),
    .match-row:has(.team-name:contains("Memuat")) {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 2s infinite ease-in-out;
      opacity: 0.7;
    }
    
    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    .skeleton-text {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite ease-in-out;
      border-radius: 4px;
      color: transparent !important;
    }
    
    .match-row:hover {
      background: var(--bg-hover);
      transform: translateX(2px);
    }
    
    .match-row:last-child {
      border-bottom: none;
    }
    
    /* üèÜ BIG MATCH HIGHLIGHT SYSTEM */
    .match-row.big-match {
      border-left: 4px solid #FFD700;
      background: linear-gradient(135deg, rgba(255,215,0,0.08), rgba(255,215,0,0.02));
      box-shadow: 0 2px 12px rgba(255,215,0,0.25);
      position: relative;
      transform: translateZ(0);
      animation: bigMatchGlow 3s ease-in-out infinite alternate;
    }
    
    @keyframes bigMatchGlow {
      0% { box-shadow: 0 2px 12px rgba(255,215,0,0.25); }
      100% { box-shadow: 0 4px 20px rgba(255,215,0,0.4); }
    }
    
    .match-row.big-match:hover {
      background: linear-gradient(135deg, rgba(255,215,0,0.12), rgba(255,215,0,0.04));
      transform: translateX(3px) translateZ(0);
      box-shadow: 0 6px 25px rgba(255,215,0,0.5);
    }
    
    /* Premium League Matches */
    .match-row.premium-league {
      border-left: 4px solid #8B5CF6;
      background: linear-gradient(135deg, rgba(139,92,246,0.08), rgba(139,92,246,0.02));
      box-shadow: 0 2px 12px rgba(139,92,246,0.25);
    }
    
    .match-row.premium-league:hover {
      background: linear-gradient(135deg, rgba(139,92,246,0.12), rgba(139,92,246,0.04));
      box-shadow: 0 6px 25px rgba(139,92,246,0.4);
    }
    
    /* Derby/Rivalry Matches */
    .match-row.derby-match {
      border-left: 4px solid #EF4444;
      background: linear-gradient(135deg, rgba(239,68,68,0.08), rgba(239,68,68,0.02));
      box-shadow: 0 2px 12px rgba(239,68,68,0.25);
      animation: derbyPulse 2s ease-in-out infinite alternate;
    }
    
    @keyframes derbyPulse {
      0% { border-left-color: #EF4444; }
      100% { border-left-color: #DC2626; }
    }
    
    /* Final/Semi-Final Matches */
    .match-row.final-match {
      border-left: 4px solid #F59E0B;
      background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(245,158,11,0.03));
      box-shadow: 0 2px 15px rgba(245,158,11,0.3);
      animation: finalShine 4s ease-in-out infinite;
    }
    
    @keyframes finalShine {
      0%, 100% { box-shadow: 0 2px 15px rgba(245,158,11,0.3); }
      50% { box-shadow: 0 4px 25px rgba(245,158,11,0.6); }
    }
    
    /* LIVE Big Match */
    .match-row.big-match.live-match {
      border-left: 4px solid #FF0000;
      background: linear-gradient(135deg, rgba(255,0,0,0.1), rgba(255,0,0,0.03));
      animation: liveBigMatch 1.5s ease-in-out infinite alternate;
    }
    
    /* üèÖ BIG MATCH BADGES */
    .big-match-badge {
      display: inline-flex;
      align-items: center;
      gap: 2px;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 7px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      box-shadow: 0 2px 8px rgba(255,215,0,0.4);
      animation: badgeGlow 2s ease-in-out infinite alternate;
      margin-left: 4px;
      white-space: nowrap;
    }
    
    @keyframes badgeGlow {
      0% { box-shadow: 0 2px 8px rgba(255,215,0,0.4); }
      100% { box-shadow: 0 4px 12px rgba(255,215,0,0.6); }
    }
    
    .big-match-badge.premium {
      background: linear-gradient(45deg, #8B5CF6, #7C3AED);
      box-shadow: 0 2px 8px rgba(139,92,246,0.4);
    }
    
    .big-match-badge.derby {
      background: linear-gradient(45deg, #EF4444, #DC2626);
      box-shadow: 0 2px 8px rgba(239,68,68,0.4);
      animation: derbyBadgePulse 1.5s ease-in-out infinite alternate;
    }
    
    @keyframes derbyBadgePulse {
      0% { transform: scale(1); }
      100% { transform: scale(1.05); }
    }
    
    .big-match-badge.final {
      background: linear-gradient(45deg, #F59E0B, #D97706);
      box-shadow: 0 2px 8px rgba(245,158,11,0.4);
      animation: finalBadgeShine 3s ease-in-out infinite;
    }
    
    @keyframes finalBadgeShine {
      0%, 100% { 
        background: linear-gradient(45deg, #F59E0B, #D97706);
        box-shadow: 0 2px 8px rgba(245,158,11,0.4);
      }
      50% { 
        background: linear-gradient(45deg, #FBBF24, #F59E0B);
        box-shadow: 0 4px 15px rgba(245,158,11,0.7);
      }
    }
    
    .big-match-badge.live {
      background: linear-gradient(45deg, #FF0000, #DC2626);
      box-shadow: 0 2px 8px rgba(255,0,0,0.5);
      animation: liveBadgePulse 1s ease-in-out infinite alternate;
    }
    
    @keyframes liveBadgePulse {
      0% { 
        background: linear-gradient(45deg, #FF0000, #DC2626);
        transform: scale(1);
      }
      100% { 
        background: linear-gradient(45deg, #FF3333, #EF4444);
        transform: scale(1.08);
      }
    }
    
    /* Hot/Trending Badge */
    .big-match-badge.hot {
      background: linear-gradient(45deg, #FF6B6B, #FF5252);
      box-shadow: 0 2px 8px rgba(255,107,107,0.4);
      animation: hotBadge 2s ease-in-out infinite;
    }
    
    @keyframes hotBadge {
      0%, 100% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.05) rotate(1deg); }
      75% { transform: scale(1.05) rotate(-1deg); }
    }
    
    .match-time {
      min-width: 42px;
      font-size: 10px;
      font-weight: 700;
      color: var(--text-main);
      text-align: center;
      margin-right: 8px;
      line-height: 1.3;
      letter-spacing: 0.2px;
      position: relative;
    }
    
    .live-indicator {
      position: absolute;
      top: -2px;
      right: -2px;
      width: 6px;
      height: 6px;
      background: var(--live-indicator);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    /* LIVE Badge untuk pertandingan yang sedang berlangsung */
    .live-badge {
      background: linear-gradient(45deg, #ff0000, #ff3333) !important;
      color: white !important;
      padding: 2px 6px !important;
      border-radius: 3px !important;
      font-size: 10px !important;
      font-weight: bold !important;
      margin-left: 5px !important;
      animation: livePulse 1.5s infinite !important;
      box-shadow: 0 0 5px rgba(255, 0, 0, 0.5) !important;
      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5) !important;
    }

    @keyframes livePulse {
      0% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.05); }
      100% { opacity: 1; transform: scale(1); }
    }

    /* Live Count Badge */
    .live-count-badge {
      background: white !important;
      color: #ff0000 !important;
      border-radius: 50% !important;
      padding: 2px 6px !important;
      font-size: 10px !important;
      font-weight: bold !important;
      margin-left: 5px !important;
      min-width: 16px !important;
      text-align: center !important;
      animation: livePulse 2s infinite !important;
      box-shadow: 0 0 3px rgba(0,0,0,0.3) !important;
    }

    /* Highlight untuk row yang LIVE */
    .match-row.live-match {
      background: linear-gradient(90deg, rgba(255, 0, 0, 0.1), rgba(255, 0, 0, 0.05)) !important;
      border-left: 3px solid #ff0000 !important;
    }

    @keyframes pulse {
      0% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    .match-status {
      font-size: 8px;
      font-weight: 600;
      padding: 1px 4px;
      border-radius: 2px;
      margin-top: 2px;
      text-align: center;
      line-height: 1.2;
      position: relative;
      overflow: hidden;
    }
    
    .match-status::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
    }
    
    .match-status:hover::before {
      left: 100%;
    }
    
    .match-status.upcoming {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      color: #1976d2;
      border: 1px solid rgba(25, 118, 210, 0.2);
    }
    
    .match-status.live {
      background: linear-gradient(135deg, #ffebee, #ffcdd2);
      color: #d32f2f;
      animation: pulse 2s infinite;
      border: 1px solid rgba(211, 47, 47, 0.3);
      box-shadow: 0 0 10px rgba(211, 47, 47, 0.2);
    }
    
    .match-status.finished {
      background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
      color: #2e7d32;
      border: 1px solid rgba(46, 125, 50, 0.2);
    }
    
    .match-countdown {
      font-size: 7px;
      color: var(--text-muted);
      font-weight: 500;
      margin-top: 1px;
    }
    
    .match-teams {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin: 0 8px;
    }
    
    .team-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      line-height: 1.4;
    }
    
    .team-label {
      font-size: 8px;
      font-weight: 800;
      color: var(--text-muted);
      min-width: 30px;
      text-align: left;
      margin-right: 5px;
      opacity: 0.9;
      letter-spacing: 0.5px;
    }
    
    .team-label.home {
      color: var(--accent);
      opacity: 1;
    }
    
    .team-label.away {
      color: var(--text-muted);
      opacity: 0.8;
    }
    
    /* Special styling for different sports */
    .team-label[data-sport="tennis"] {
      min-width: 55px;
      font-size: 7px;
    }
    
    .team-label[data-sport="badminton"] {
      min-width: 55px;
      font-size: 7px;
    }
    
    .team-label[data-sport="esport"] {
      min-width: 45px;
      font-size: 7px;
    }
    
    .team-name {
      font-weight: 600;
      color: var(--text-main);
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 12px;
      letter-spacing: 0.1px;
    }
    
    .team-score {
      font-weight: 700;
      color: var(--text-main);
      min-width: 14px;
      text-align: center;
      margin-left: 5px;
      font-size: 11px;
      transition: all 0.3s ease;
    }
    
    .team-score.live-score {
      background: linear-gradient(135deg, #ff6b6b, #ee5a52);
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 900;
      box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
      animation: scoreGlow 2s infinite alternate;
    }
    
    @keyframes scoreGlow {
      0% { box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3); }
      100% { box-shadow: 0 4px 16px rgba(255, 107, 107, 0.6); }
    }
    
    .match-bet {
      min-width: 36px;
      text-align: center;
    }
    
    .bet-btn {
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: white;
      border: none;
      border-radius: 6px;
      padding: 4px 10px;
      font-size: 9px;
      font-weight: 800;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: inline-block;
      line-height: 1.3;
      letter-spacing: 0.3px;
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      box-shadow: 0 2px 8px rgba(0, 166, 63, 0.2);
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    
    .bet-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .bet-btn:hover::before {
      left: 100%;
    }
    
    .bet-btn:hover {
      background: linear-gradient(135deg, var(--accent-dark), #006400);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 166, 63, 0.4);
    }
    
    .bet-btn:active {
      transform: translateY(0) scale(0.98);
      transition: transform 0.1s ease;
    }
    
    /* Touch-specific styles for mobile */
    @media (hover: none) and (pointer: coarse) {
      .bet-btn:hover {
        transform: none;
        background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        box-shadow: 0 2px 8px rgba(0, 166, 63, 0.2);
      }
      
      .bet-btn:active {
        background: linear-gradient(135deg, var(--accent-dark), #006400);
        transform: scale(0.95);
        box-shadow: 0 4px 16px rgba(0, 166, 63, 0.3);
      }
    }
    
    .bet-btn.disabled {
      background: linear-gradient(135deg, #6b7280, #4b5563);
      color: #d1d5db;
      cursor: not-allowed;
      opacity: 0.7;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }
    
    .bet-btn.disabled:hover {
      background: linear-gradient(135deg, #6b7280, #4b5563);
      transform: none;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    
    .bet-btn.disabled::before {
      display: none;
    }
    
    .bet-btn.disabled::after {
      content: 'üîí';
      font-size: 10px;
      margin-left: 4px;
    }
    
    /* Mobile-specific disabled button styling */
    @media (max-width: 768px) {
      .bet-btn.disabled {
        background: linear-gradient(135deg, #9ca3af, #6b7280);
        border: 1px solid rgba(255,255,255,0.1);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.2);
      }
      
      .bet-btn.disabled::after {
        content: '‚ùå';
        font-size: 8px;
      }
    }
    
    @media (max-width: 480px) {
      .bet-btn.disabled {
        background: linear-gradient(135deg, #9ca3af, #6b7280);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
        border: 1px solid rgba(255,255,255,0.15);
      }
      
      .bet-btn.disabled::after {
        content: '‚èπÔ∏è';
        font-size: 10px;
      }
    }
    
    .bet-link.disabled {
      background: linear-gradient(135deg, #666, #555);
      color: #999;
      cursor: not-allowed;
      opacity: 0.6;
      text-decoration: none;
    }
    
    .bet-link.disabled:hover {
      background: linear-gradient(135deg, #666, #555);
      color: #999;
    }
    
    /* Remove old table styles */
    .league-table-wrap {
      display: none;
    }
    
    table.league-table {
      display: none;
    }
    .error-msg {
      color: #d32f2f;
      background: #fff0f0;
      border: 1px solid #f5c2c7;
      border-radius: 6px;
      padding: 18px;
      text-align: center;
      margin: 32px 0;
      font-weight: 500;
    }
    .loader {
      text-align: center;
      color: var(--text-muted);
      padding: 32px 0;
      font-size: 1.1rem;
      animation: fadeInUp 0.5s ease-out;
    }
    
    /* üéØ SMOOTH LOADING ANIMATIONS */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInFromLeft {
      0% {
        opacity: 0;
        transform: translateX(-30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideInFromRight {
      0% {
        opacity: 0;
        transform: translateX(30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    /* Smooth Content Loading */
    .match-item {
      animation: fadeInUp 0.4s ease-out;
      animation-fill-mode: both;
    }
    
    .match-item:nth-child(odd) {
      animation-delay: 0.1s;
    }
    
    .match-item:nth-child(even) {
      animation-delay: 0.2s;
    }
    
    .accordion {
      animation: slideInFromLeft 0.5s ease-out;
      animation-fill-mode: both;
    }
    
    .accordion:nth-child(odd) {
      animation-delay: 0.1s;
    }
    
    .accordion:nth-child(even) {
      animation-delay: 0.2s;
    }
    /* Professional Dark mode - High Contrast */
    .dark-mode {
      --bg-main: #0a0e14;
      --bg-card: #151b24;
      --bg-accent: #1e2631;
      --bg-hover: #2a3441;
      --border: #2a3441;
      --text-main: #ffffff;
      --text-muted: #9ca3af;
      --accent: #22c55e;
      --accent-dark: #16a34a;
    }
    
    .dark-mode .error-msg {
      background: #2d1a1a;
      color: #ffb4b4;
      border-color: #a33;
    }
    
    .dark-mode .bet-btn {
      color: #ffffff;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      font-weight: 800;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      box-shadow: 0 3px 12px rgba(34, 197, 94, 0.3);
    }
    
    .dark-mode .bet-btn:hover {
      background: linear-gradient(135deg, var(--accent-dark), #15803d);
      box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
    }
    
    /* Dark mode mobile bet button styling */
    @media (max-width: 768px) {
      .dark-mode .bet-btn {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        box-shadow: 0 4px 16px rgba(34, 197, 94, 0.35);
        border: 1px solid rgba(255,255,255,0.1);
      }
      
      .dark-mode .bet-btn:hover {
        background: linear-gradient(135deg, #16a34a, #15803d);
        box-shadow: 0 6px 24px rgba(34, 197, 94, 0.45);
      }
      
      .dark-mode .bet-btn.disabled {
        background: linear-gradient(135deg, #4b5563, #374151);
        color: #9ca3af;
        border: 1px solid rgba(255,255,255,0.05);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
      }
    }
    
    @media (max-width: 480px) {
      .dark-mode .bet-btn {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4);
        border: 1px solid rgba(255,255,255,0.15);
      }
      
      .dark-mode .bet-btn.disabled {
        background: linear-gradient(135deg, #374151, #1f2937);
        color: #6b7280;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      }
    }
    
    .dark-mode .date-select {
      background: var(--bg-card);
      color: var(--text-main);
      border-color: var(--border);
      font-weight: 600;
    }
    
    .dark-mode .date-select option {
      background: var(--bg-card);
      color: var(--text-main);
    }
    
    .dark-mode .accordion-title {
      color: var(--text-main);
      font-weight: 800;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .dark-mode .team-name {
      color: var(--text-main);
      font-weight: 700;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .dark-mode .team-label.home {
      color: #34d399;
      font-weight: 900;
      opacity: 1;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    
    .dark-mode .team-label.away {
      color: var(--text-muted);
      opacity: 0.95;
      font-weight: 800;
    }
    
    /* Dark mode for different sports labels */
    .dark-mode .team-label[data-sport="tennis"].home,
    .dark-mode .team-label[data-sport="badminton"].home {
      color: #06b6d4; /* Cyan for Player 1 */
    }
    
    .dark-mode .team-label[data-sport="esport"].home {
      color: #f59e0b; /* Amber for Team 1 */
    }
    
    .dark-mode .team-score {
      color: var(--text-main);
      font-weight: 800;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .dark-mode .match-time {
      color: var(--text-main);
      font-weight: 800;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .dark-mode .accordion-arrow {
      color: var(--text-muted);
    }
    
    .dark-mode .league-icon {
      filter: brightness(1.3) contrast(1.1);
    }
    
    .dark-mode .sport-btn {
      font-weight: 600;
    }
    
    .dark-mode .sport-btn.active {
      font-weight: 800;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    
    /* Dark Mode Scrollbar Styling */
    .dark-mode #main-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }
    
    .dark-mode #main-content::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
    }
    
    .dark-mode #main-content::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.4);
    }
    
    .dark-mode #main-content {
      scrollbar-color: rgba(255,255,255,0.2) rgba(255,255,255,0.05);
    }
    
    /* üåô Dark Mode Big Match Styling */
    .dark-mode .match-row.big-match {
      border-left-color: #FBBF24;
      background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(251,191,36,0.05));
      box-shadow: 0 2px 12px rgba(251,191,36,0.3);
    }
    
    .dark-mode .match-row.premium-league {
      border-left-color: #A78BFA;
      background: linear-gradient(135deg, rgba(167,139,250,0.15), rgba(167,139,250,0.05));
      box-shadow: 0 2px 12px rgba(167,139,250,0.3);
    }
    
    .dark-mode .match-row.derby-match {
      border-left-color: #F87171;
      background: linear-gradient(135deg, rgba(248,113,113,0.15), rgba(248,113,113,0.05));
      box-shadow: 0 2px 12px rgba(248,113,113,0.3);
    }
    
    .dark-mode .match-row.final-match {
      border-left-color: #FBBF24;
      background: linear-gradient(135deg, rgba(251,191,36,0.18), rgba(251,191,36,0.06));
      box-shadow: 0 2px 15px rgba(251,191,36,0.4);
    }
    
    .dark-mode .match-row.big-match.live-match {
      border-left-color: #FF4444;
      background: linear-gradient(135deg, rgba(255,68,68,0.2), rgba(255,68,68,0.08));
      box-shadow: 0 2px 15px rgba(255,68,68,0.5);
    }
    
    /* Dark Mode Badges */
    .dark-mode .big-match-badge {
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
    }
    /* Professional Responsive Design - Fixed Mobile Layout */
    @media (max-width: 768px) {
      .container { 
        padding: 6px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      #main-content {
        max-height: calc(100vh - 180px);
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }
      
      /* Improve touch scrolling on mobile */
      #main-content::-webkit-scrollbar {
        width: 3px;
      }
      
      #main-content::-webkit-scrollbar-thumb {
        background: rgba(0,0,0,0.3);
        border-radius: 2px;
      }
      
      .header-bar { 
        flex-direction: row;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        position: relative;
      }
      
      .flashscore-header {
        font-size: 13px;
        font-weight: 700;
        flex: 1;
        min-width: 0;
      }
      
      .flashscore-logo {
        width: 18px;
        height: 18px;
        font-size: 9px;
        font-weight: 900;
      }
      
      #current-time {
        font-size: 11px !important;
        padding: 4px 8px !important;
        margin: 0 !important;
        white-space: nowrap;
        order: 2;
      }
      
      .sports-tabs { 
        font-size: 11px; 
        gap: 4px; 
        order: 3;
        width: 100%;
        margin-top: 6px;
        padding: 0;
      }
      
      .sport-btn { 
        padding: 6px 10px; 
        font-size: 10px; 
        min-width: auto;
        font-weight: 600;
        flex: 1;
        text-align: center;
      }
      
      .dark-toggle-btn {
        position: static;
        order: 4;
        font-size: 16px;
        margin: 0;
        padding: 4px;
      }
      
      .date-filter { 
        padding: 8px 12px; 
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
      }
      
      .date-filter label {
        font-size: 11px;
        font-weight: 700;
        white-space: nowrap;
      }
      
      .date-select { 
        flex: 1;
        min-width: 120px;
        font-size: 11px;
        padding: 6px 8px;
        font-weight: 600;
      }
      
      .quick-filters {
        display: flex;
        gap: 4px;
        flex-wrap: wrap;
      }
      
      .quick-filter-btn {
        font-size: 9px;
        padding: 4px 8px;
        font-weight: 700;
      }
      
      .search-bar {
        padding: 8px 12px;
        margin-bottom: 10px;
      }
      
      .search-input {
        font-size: 12px;
        padding: 6px 0;
      }
      
      .accordion-header { 
        font-size: 12px; 
        padding: 8px 12px; 
        min-height: 32px;
        font-weight: 800;
      }
      
      .league-icon {
        font-size: 14px;
        margin-right: 6px;
      }
      
      .match-row {
        padding: 8px 12px;
        min-height: 42px;
        align-items: flex-start;
      }
      
      .match-time {
        min-width: 50px;
        font-size: 10px;
        margin-right: 10px;
        font-weight: 800;
        text-align: left;
      }
      
      .match-teams {
        margin: 0 10px;
        flex: 1;
      }
      
      .team-row {
        font-size: 11px;
        margin-bottom: 2px;
      }
      
      .team-label {
        font-size: 8px;
        min-width: 32px;
        margin-right: 6px;
        font-weight: 900;
      }
      
      .team-name {
        font-size: 11px;
        font-weight: 700;
      }
      
      .team-score {
        font-size: 10px;
        font-weight: 800;
      }
      
      .bet-btn {
        padding: 8px 16px;
        font-size: 10px;
        font-weight: 700;
        min-width: 50px;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        color: white;
        box-shadow: 0 3px 12px rgba(0, 166, 63, 0.25);
        letter-spacing: 0.5px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .bet-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(0, 166, 63, 0.35);
        background: linear-gradient(135deg, var(--accent-dark), #006400);
      }
      
      .bet-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 8px rgba(0, 166, 63, 0.3);
      }
      
      /* Add subtle glow effect for mobile */
      .bet-btn::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 8px;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      
      .bet-btn:hover::after {
        opacity: 1;
      }
      
      /* üèÜ Big Match Mobile Styling */
      .match-row.big-match {
        border-left-width: 3px;
        background: linear-gradient(135deg, rgba(255,215,0,0.12), rgba(255,215,0,0.04));
        padding: 8px 12px;
        box-shadow: 0 3px 15px rgba(255,215,0,0.3);
      }
      
      .match-row.premium-league,
      .match-row.derby-match,
      .match-row.final-match {
        border-left-width: 3px;
        padding: 8px 12px;
      }
      
      .big-match-badge {
        font-size: 6px;
        padding: 1px 4px;
        margin-left: 3px;
        letter-spacing: 0.2px;
      }
      
      /* Enhanced touch interactions for big matches */
      .match-row.big-match:hover {
        transform: translateX(2px);
        background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.06));
      }
      
      .welcome-card { 
        padding: 24px 16px; 
        margin: 0 16px;
        min-width: 280px;
      }
      
      .welcome-logo { 
        width: 140px; 
        margin-bottom: 20px;
      }
      
      .welcome-title { 
        font-size: 1.4rem; 
        margin-bottom: 20px;
        font-weight: 800;
        line-height: 1.3;
      }
      
      .welcome-btn { 
        font-size: 1rem; 
        padding: 14px 24px;
        font-weight: 800;
      }
    }
    
    /* Extra Small Mobile Devices */
    @media (max-width: 480px) {
      .container {
        padding: 4px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      #main-content {
        max-height: calc(100vh - 160px);
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }
      
      .header-bar {
        flex-direction: column;
        gap: 8px;
        padding: 8px 10px;
      }
      
      .flashscore-header {
        width: 100%;
        justify-content: space-between;
      }
      
      #current-time {
        font-size: 10px !important;
        padding: 3px 6px !important;
      }
      
      .sports-tabs {
        width: 100%;
        justify-content: space-between;
        gap: 2px;
      }
      
      .sport-btn {
        flex: 1;
        padding: 5px 4px;
        font-size: 9px;
        text-align: center;
      }
      
      .date-filter {
        flex-direction: column;
        gap: 6px;
        padding: 6px 10px;
      }
      
      .date-filter label {
        text-align: center;
        font-size: 10px;
      }
      
      .date-select {
        font-size: 10px;
        padding: 5px;
      }
      
      .quick-filters {
        justify-content: center;
        width: 100%;
      }
      
      .quick-filter-btn {
        flex: 1;
        font-size: 8px;
        padding: 3px 6px;
      }
      
      .search-bar {
        padding: 6px 10px;
        margin-bottom: 8px;
      }
      
      .search-input {
        font-size: 11px;
        padding: 5px 0;
      }
      
      .accordion-header {
        font-size: 11px;
        padding: 6px 10px;
        min-height: 28px;
      }
      
      .league-icon {
        font-size: 12px;
      }
      
      .match-row {
        flex-direction: column;
        gap: 6px;
        padding: 8px 10px;
        align-items: stretch;
      }
      
      .match-time {
        min-width: auto;
        text-align: left;
        border-bottom: 1px solid var(--border);
        padding-bottom: 4px;
        font-size: 9px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .match-teams {
        margin: 0;
        order: 2;
      }
      
      .match-bet {
        min-width: auto;
        text-align: center;
        order: 3;
      }
      
      .bet-btn {
        width: 100%;
        text-align: center;
        padding: 10px 8px;
        font-size: 10px;
        font-weight: 700;
        min-height: 36px;
        border-radius: 10px;
        background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        color: white;
        box-shadow: 0 4px 16px rgba(0, 166, 63, 0.3);
        letter-spacing: 0.8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
      }
      
      .bet-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 24px rgba(0, 166, 63, 0.4);
        background: linear-gradient(135deg, var(--accent-dark), #006400);
      }
      
      .bet-btn:active {
        transform: translateY(0);
        box-shadow: 0 3px 12px rgba(0, 166, 63, 0.35);
      }
      
      /* Enhanced glow effect for extra small screens */
      .bet-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        transition: left 0.6s ease;
      }
      
      .bet-btn:hover::before {
        left: 100%;
      }
      
      /* Add icon to bet button for better UX */
      .bet-btn:not(.disabled)::after {
        content: 'üéØ';
        font-size: 8px;
        margin-left: 2px;
      }
      
      .team-row {
        padding: 2px 0;
        font-size: 10px;
      }
      
      .team-label {
        font-size: 7px;
        min-width: 22px;
        margin-right: 4px;
      }
      
      .team-name {
        font-size: 10px;
      }
      
      .team-score {
        font-size: 9px;
      }
      
      .welcome-card {
        padding: 20px 12px;
        margin: 0 12px;
        min-width: 260px;
      }
      
      /* Enhanced Welcome Screen Mobile Responsive */
      .welcome-card {
        min-width: 300px;
        max-width: 85vw;
        padding: 36px 28px 32px 28px;
        border-radius: 24px;
        margin: 20px;
      }
      
      .logo-bg {
        width: 80px;
        height: 80px;
      }
      
      .logo-text {
        font-size: 32px;
      }
      
      .sport-icons {
        width: 130px;
        height: 130px;
      }
      
      .sport-icon {
        width: 24px;
        height: 24px;
        font-size: 12px;
      }
      
      .welcome-title {
        font-size: 1.8rem;
        margin-bottom: 20px;
        line-height: 1.3;
        letter-spacing: 1px;
      }
      
      .welcome-subtitle {
        font-size: 1rem;
        margin-bottom: 28px;
        line-height: 1.4;
        padding: 0 10px;
      }
      
      .welcome-btn {
        font-size: 1.1rem;
        padding: 16px 36px;
        border-radius: 16px;
        letter-spacing: 1px;
      }
    }
    
    /* Extra Small Mobile - Enhanced Welcome */
    @media (max-width: 480px) {
      .welcome-card {
        min-width: 280px;
        max-width: 90vw;
        padding: 30px 20px 26px 20px;
        border-radius: 20px;
        margin: 15px;
      }
      
      .logo-bg {
        width: 70px;
        height: 70px;
      }
      
      .logo-text {
        font-size: 28px;
      }
      
      .sport-icons {
        width: 110px;
        height: 110px;
      }
      
      .sport-icon {
        width: 20px;
        height: 20px;
        font-size: 10px;
      }
      
      .welcome-title {
        font-size: 1.5rem;
        margin-bottom: 16px;
        line-height: 1.2;
        letter-spacing: 0.8px;
      }
      
      .welcome-subtitle {
        font-size: 0.9rem;
        margin-bottom: 24px;
        line-height: 1.3;
        padding: 0 5px;
      }
      
      .welcome-btn {
        font-size: 1rem;
        padding: 14px 28px;
        border-radius: 14px;
        letter-spacing: 0.8px;
      }
      
      .welcome-logo {
        width: 100px;
        margin-bottom: 16px;
      }
      
      .welcome-title {
        font-size: 1.1rem;
        margin-bottom: 16px;
        line-height: 1.2;
      }
      
      .welcome-btn {
        font-size: 0.9rem;
        padding: 12px 20px;
      }
    }
  </style>
</head>
<body>
  <div id="welcome-screen">
    <div class="welcome-card">
      <div class="welcome-logo">
        <div class="logo-container">
          <div class="logo-bg">
            <div class="logo-text">SG</div>
          </div>
          <div class="sport-icons">
            <div class="sport-icon">‚öΩ</div>
            <div class="sport-icon">üèÄ</div>
            <div class="sport-icon">üéæ</div>
            <div class="sport-icon">üèê</div>
            <div class="sport-icon">üè∏</div>
            <div class="sport-icon">‚öæ</div>
          </div>
        </div>
      </div>
      <div class="welcome-title">JADWAL SPORT TERLENGKAP</div>
      <div class="welcome-subtitle">Dapatkan jadwal pertandingan real-time terlengkap dan terupdate</div>
      <button class="welcome-btn" id="welcome-btn">
        <span>üöÄ MASUK KE JADWAL SPORT</span>
      </button>
    </div>
  </div>
  <div class="container" style="display: none;">
    <div class="header-bar">
      <div class="flashscore-header">
        <div class="flashscore-logo">SG</div>
        <span>JADWAL SPORT SLOTGOKIL</span>
      </div>
      <div id="current-time" style="font-size: 12px; color: var(--accent); margin: 0 15px; font-weight: 700; padding: 5px 10px; background: var(--bg-accent); border-radius: 6px; border: 1px solid var(--border);"></div>
      <div class="sports-tabs" id="sports-tabs"></div>
      <button class="dark-toggle-btn" id="dark-toggle" title="Toggle dark mode">üåô</button>
    </div>
    <div class="date-filter">
      <label for="date-select">üìÖ Pilih Tanggal:</label>
      <select id="date-select" class="date-select">
        <option value="all">Semua Tanggal</option>
      </select>
      <div class="quick-filters">
        <button class="quick-filter-btn" data-filter="live">üî¥ LIVE</button>
        <button class="quick-filter-btn" data-filter="today">Hari Ini</button>
        <button class="quick-filter-btn" data-filter="tomorrow">Besok</button>
        <button class="quick-filter-btn" data-filter="week">Minggu Ini</button>
        <button class="quick-filter-btn active" data-filter="all">Semua</button>
      </div>
      
      <!-- Flashscore-style Date Navigator -->
      <div class="date-navigator">
        <div class="date-navigation">
          <button id="prevDateNav" class="nav-btn">‚Äπ</button>
          <span id="currentDateDisplay" class="active">24/07/2025</span>
          <button id="nextDateNav" class="nav-btn">‚Ä∫</button>
        </div>
        <div class="quick-date-buttons">
          <button class="quick-date-btn" data-offset="-3">-3d</button>
          <button class="quick-date-btn" data-offset="-2">-2d</button>
          <button class="quick-date-btn" data-offset="-1">-1d</button>
          <button class="quick-date-btn" data-offset="0">HARI INI</button>
          <button class="quick-date-btn" data-offset="1">+1d</button>
          <button class="quick-date-btn" data-offset="2">+2d</button>
          <button class="quick-date-btn" data-offset="3">+3d</button>
        </div>
      </div>
    </div>
    <div class="search-bar">
      <input type="text" id="search-input" class="search-input" placeholder="üîç Cari tim atau liga...">
      <button id="clear-search" class="clear-search-btn">‚úï</button>
    </div>
    <div id="main-content"></div>
  </div>
  
  <script>
    console.log('üöÄ Script loading...');
    
    // Pending filter system - untuk filter yang dipencet saat loading
    let pendingFilter = null;
    let pendingFilterDate = null;
    let isDataLoading = false;
    
    // Function to apply pending filter setelah data selesai loading
    function applyPendingFilter() {
      if (pendingFilter) {
        console.log('‚ö° Applying pending filter:', pendingFilter, pendingFilterDate);
        
        if (pendingFilter === 'date' && pendingFilterDate) {
          // Apply date filter
          filterBySpecificDate(pendingFilterDate);
        } else if (pendingFilter === 'live') {
          // Apply live filter  
          filterLiveMatches();
        } else if (pendingFilter === 'week') {
          // Apply weekly filter
          filterWeeklyMatches();
        }
        
        // Clear pending filter
        pendingFilter = null;
        pendingFilterDate = null;
      }
    }
    
    // Helper function to handle score values properly - distinguishes null from 0
    function getScore(scoreValue) {
      if (scoreValue === null || scoreValue === undefined || scoreValue === '') {
        return '-';
      }
      return String(scoreValue); // Keep 0 as "0", not "-"
    }
    
    // Helper function to get first non-null/undefined field value (0 is valid!)
    function getFirstValidField(...fields) {
      for (let field of fields) {
        if (field !== null && field !== undefined && field !== '') {
          return field;
        }
      }
      return null; // Return null if no valid field found
    }
    
    // ‚úÖ GOOGLE SHEETS API CONFIGURATION - 100% REAL DATA
    const DIRECT_URL = "https://script.google.com/macros/s/AKfycbzLPPL9DmNg9k0qL5Ne6chJbmURVck7FOjTI1O53zY8xbfGQnYvu2DlJc7KT80u5y-HeQ/exec";
    
    // Working CORS proxy services - CORRECTED APPROACH
    const WORKING_PROXIES = [
      "allorigins",
      "cors-anywhere", 
      "corsproxy",
      "codetabs",
      "htmldriven",
      "thingproxy",
      "direct"
    ];
    
    // Enhanced FALLBACK URLs - COMPLETELY REBUILT
    const FALLBACK_URLS = [
      // AllOrigins raw proxy
      `https://api.allorigins.win/raw?url=${encodeURIComponent(DIRECT_URL)}`,
      // CORS Anywhere
      `https://cors-anywhere.herokuapp.com/${DIRECT_URL}`,
      // CORSProxy.io
      `https://corsproxy.io/?${DIRECT_URL}`,
      // CodeTabs proxy
      `https://api.codetabs.com/v1/proxy?quest=${DIRECT_URL}`,
      // HTMLDriven proxy
      `https://cors-proxy.htmldriven.com/?url=${encodeURIComponent(DIRECT_URL)}`,
      // ThingProxy
      `https://thingproxy.freeboard.io/fetch/${DIRECT_URL}`,
      // Direct call as last resort
      DIRECT_URL
    ];
    
    console.log('üöÄ Total working URLs:', FALLBACK_URLS.length);
    console.log('üìã Google Sheets URL:', DIRECT_URL);
    
    // Debug: Print all URLs for verification
    console.log('üîç All FALLBACK URLs:');
    FALLBACK_URLS.forEach((url, index) => {
      console.log(`${index + 1}. ${url.substring(0, 100)}...`);
    });
    
    // Test real connectivity to Google Apps Script
    async function testGoogleSheetsConnection() {
      console.log('üß™ Testing direct connection to Google Apps Script...');
      
      try {
        // Try direct connection first
        const testUrl = `${DIRECT_URL}?test=true&timestamp=${Date.now()}`;
        const response = await fetch(testUrl, {
          method: 'GET',
          mode: 'no-cors' // This will always succeed but we can't read the response
        });
        console.log('‚úÖ Direct connection test completed (no-cors mode)');
      } catch (error) {
        console.log('‚ö†Ô∏è Direct connection test info:', error.message);
      }
      
      // Try with proxy
      try {
        const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(DIRECT_URL + '?test=true')}`;
        const response = await fetch(proxyUrl);
        console.log('‚úÖ Proxy connection test:', response.status);
      } catch (error) {
        console.log('‚ö†Ô∏è Proxy connection test failed:', error.message);
      }
    }
    
    // Test connection on load
    testGoogleSheetsConnection();
    
    // üß™ TEST LANGSUNG URL API dengan Enhanced Error Handling
    console.log('üß™ Testing API immediately...');
    
    // Fungsi untuk test API dengan CORS-friendly approach
    async function testAPIConnection() {
      try {
        console.log('üß™ Testing API connection with CORS proxy...');
        
        // Langsung gunakan proxy untuk test karena local file pasti kena CORS
        const proxyUrl = 'https://api.allorigins.win/raw?url=';
        const targetUrl = `${DIRECT_URL}?sport=bola&timestamp=${Date.now()}`;
        const testUrl = proxyUrl + encodeURIComponent(targetUrl);
        
        console.log('üß™ Test URL with proxy:', testUrl);
        
        const res = await fetch(testUrl, {
          method: 'GET',
          headers: {
            'Accept': 'application/json'
          }
        });
        
        console.log('üß™ API Test Response Status:', res.status);
        console.log('üß™ API Test Response OK:', res.ok);
        
        if (!res.ok) {
          throw new Error(`HTTP ${res.status}: ${res.statusText}`);
        }
        
        const text = await res.text();
        console.log('üß™ API Test Raw Response (first 500 chars):', text.substring(0, 500));
        
        try {
          const data = JSON.parse(text);
          console.log('üß™ API Test Parsed JSON:', data);
          
          if (data.error) {
            console.error('üß™ API Test - Server Error:', data.error);
            return false;
          } else {
            console.log('üß™ API Test - Success! Available data:', Object.keys(data).length, 'leagues');
            return true;
          }
        } catch (parseError) {
          console.error('üß™ API Test - JSON Parse Error:', parseError);
          console.log('üß™ Raw response that failed to parse:', text);
          return false;
        }
      } catch (e) {
        console.error('üß™ API Test - Network Error:', e);
        console.log('üß™ Will fallback to mock data for development');
        return false;
      }
    }
    
    // Jalankan test API
    testAPIConnection();
    
    // Enhanced fetch function untuk mendukung parameter tanggal dan kategori dengan CORS fix
    async function fetchSportData(sport, dateFilter = null, category = null) {
      console.log('üöÄ Enhanced fetch for:', { sport, dateFilter, category });
      
      // Skip direct URL karena akan kena CORS untuk local file
      const urlsToTry = FALLBACK_URLS; // Langsung ke proxy
      
      for (let i = 0; i < urlsToTry.length; i++) {
        const baseUrl = urlsToTry[i];
        const params = new URLSearchParams({
          sport: sport,
          timestamp: Date.now()
        });
        
        // Tambahkan parameter tanggal jika ada
        if (dateFilter && dateFilter !== 'all') {
          params.append('date', dateFilter);
        }
        
        // Tambahkan parameter kategori jika ada
        if (category) {
          params.append('category', category);
        }
        
        const fullUrl = `${baseUrl}?${params.toString()}`;
        
        try {
          console.log(`üîÑ Attempt ${i + 1}/${urlsToTry.length}:`, fullUrl);
          
          // Use try-catch untuk handle specific CORS errors
          const response = await fetch(fullUrl, {
            method: 'GET',
            headers: {
              'Accept': 'application/json'
              // Remove problematic headers yang bisa cause CORS issues
            }
          });
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          
          const data = await response.json();
          
          if (data.error) {
            throw new Error(`Server Error: ${data.error}`);
          }
          
          console.log('‚úÖ Successfully fetched data from attempt', i + 1);
          return data;
          
        } catch (error) {
          console.warn(`‚ùå Attempt ${i + 1} failed:`, error.message);
          
          if (i === urlsToTry.length - 1) {
            throw error; // Rethrow if this is the last attempt
          }
          
          // Quick retry with minimal delay for faster fallback
          await new Promise(resolve => setTimeout(resolve, 10));
        }
      }
    }

    // Enhanced cache system dengan timestamp dan compression
    let allMatchesData = {}; // Cache untuk semua data yang sudah di-fetch
    const CACHE_DURATION = 15 * 60 * 1000; // 15 minutes cache (lebih lama)
    const FRESH_CACHE_DURATION = 5 * 60 * 1000; // 5 minutes untuk fresh data
    
    // Advanced cache management dengan compression
    function loadCachedData() {
      try {
        const cached = localStorage.getItem('sportsDataCache_v2');
        const cacheTime = localStorage.getItem('sportsDataCacheTime_v2');
        const cacheVersion = localStorage.getItem('sportsDataVersion_v2');
        
        if (cached && cacheTime) {
          const timeDiff = Date.now() - parseInt(cacheTime);
          const isFresh = timeDiff < FRESH_CACHE_DURATION;
          const isValid = timeDiff < CACHE_DURATION;
          
          if (isValid) {
            try {
              // Decompress if needed
              const decompressed = cached.startsWith('LZString') ? 
                LZString.decompress(cached.substring(8)) : cached;
              
              allMatchesData = JSON.parse(decompressed);
              
              console.log(`üíæ Loaded cached data (${isFresh ? 'FRESH' : 'VALID'}) - ${Object.keys(allMatchesData).length} sports cached`);
              
              // Return cache quality info
              return {
                hasCache: true,
                isFresh: isFresh,
                dataCount: Object.keys(allMatchesData).length,
                age: Math.round(timeDiff / 60000) // age in minutes
              };
            } catch (parseError) {
              console.log('‚ö†Ô∏è Cache parse error, clearing cache');
              clearExpiredCache();
            }
          } else {
            console.log('‚ö†Ô∏è Cache expired, clearing...');
            clearExpiredCache();
          }
        }
      } catch (error) {
        console.log('‚ö†Ô∏è Failed to load cached data:', error);
        clearExpiredCache();
      }
      return { hasCache: false, isFresh: false, dataCount: 0, age: 0 };
    }
    
    // Enhanced cache saving dengan optional compression
    function saveCachedData() {
      try {
        const dataStr = JSON.stringify(allMatchesData);
        const dataSize = new Blob([dataStr]).size;
        
        // Compress if data is large (>100KB)
        let finalData = dataStr;
        if (dataSize > 100000 && typeof LZString !== 'undefined') {
          finalData = 'LZString' + LZString.compress(dataStr);
          console.log(`üíæ Compressing cache: ${dataSize} ‚Üí ${new Blob([finalData]).size} bytes`);
        }
        
        localStorage.setItem('sportsDataCache_v2', finalData);
        localStorage.setItem('sportsDataCacheTime_v2', Date.now().toString());
        localStorage.setItem('sportsDataVersion_v2', '2.0');
        
        console.log(`üíæ Cache saved: ${Object.keys(allMatchesData).length} sports, ${Math.round(dataSize/1024)}KB`);
      } catch (error) {
        console.log('‚ö†Ô∏è Failed to save cache (quota exceeded?):', error);
        // Try to free space
        clearExpiredCache();
      }
    }
    
    // Clear expired cache
    function clearExpiredCache() {
      try {
        localStorage.removeItem('sportsDataCache_v2');
        localStorage.removeItem('sportsDataCacheTime_v2');
        localStorage.removeItem('sportsDataVersion_v2');
        // Clear old cache versions too
        localStorage.removeItem('sportsDataCache');
        localStorage.removeItem('sportsDataCacheTime');
        console.log('üóëÔ∏è Expired cache cleared');
      } catch (error) {
        console.log('‚ö†Ô∏è Error clearing cache:', error);
      }
    }
    let currentSportData = null;
    let selectedDate = 'all';
    let searchQuery = '';
    let currentFilter = 'all'; // Default ke 'all' untuk menampilkan semua data
    let currentActiveDate = null; // Tanggal yang sedang aktif di navigator

    // Kategori olahraga + emoji
    const SPORTS = [
      { key: 'bola', label: 'Bola', emoji: '‚öΩ' },
      { key: 'basket', label: 'Basket', emoji: 'üèÄ' },
      { key: 'tennis', label: 'Tennis', emoji: 'üéæ' },
      { key: 'voli', label: 'Voli', emoji: 'üèê' },
      { key: 'badminton', label: 'Badminton', emoji: 'üè∏' },
      { key: 'baseball', label: 'Baseball', emoji: '‚öæ' },
      { key: 'esport', label: 'Esports', emoji: 'üéÆ' }
    ];

    // Mapping emoji bendera negara/turnamen (super lengkap)
    function getLigaIcon(liga) {
      if (!liga) return "üåç";
      const l = liga.toLowerCase();
      if (l.includes("england") || l.includes("premier league")) return "üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø";
      if (l.includes("spain") || l.includes("la liga")) return "üá™üá∏";
      if (l.includes("italy") || l.includes("serie a")) return "üáÆüáπ";
      if (l.includes("germany") || l.includes("bundesliga")) return "üá©üá™";
      if (l.includes("france") || l.includes("ligue 1")) return "üá´üá∑";
      if (l.includes("portugal")) return "üáµüáπ";
      if (l.includes("netherlands")) return "üá≥üá±";
      if (l.includes("brazil")) return "üáßüá∑";
      if (l.includes("argentina")) return "üá¶üá∑";
      if (l.includes("usa") || l.includes("mls")) return "üá∫üá∏";
      if (l.includes("indonesia")) return "üáÆüá©";
      if (l.includes("malaysia")) return "üá≤üáæ";
      if (l.includes("thailand")) return "üáπüá≠";
      if (l.includes("singapore")) return "üá∏üá¨";
      if (l.includes("vietnam")) return "üáªüá≥";
      if (l.includes("philippines")) return "üáµüá≠";
      if (l.includes("japan")) return "üáØüáµ";
      if (l.includes("korea")) return "üá∞üá∑";
      if (l.includes("china")) return "üá®üá≥";
      if (l.includes("australia")) return "üá¶üá∫";
      if (l.includes("uefa") || l.includes("champions league")) return "üèÜ";
      if (l.includes("europa league")) return "ü•à";
      if (l.includes("world cup")) return "üåç";
      return "üåç";
    }

    // Render tabs kategori olahraga
    function renderSportsTabs(activeSport) {
      const tabs = document.getElementById('sports-tabs');
      if (!tabs) return;
      
      tabs.innerHTML = '';
      SPORTS.forEach(sport => {
        const btn = document.createElement('button');
        btn.className = 'sport-btn' + (sport.key === activeSport ? ' active' : '');
        btn.textContent = sport.emoji + ' ' + sport.label;
        btn.onclick = () => {
          if (window.currentSport !== sport.key) {
            console.log('Switching to sport:', sport.key);
            
            // IMMEDIATELY show skeleton content to prevent "no data" message
            const skeletonData = createSkeletonData(sport.key);
            currentSportData = skeletonData;
            renderLeagues(skeletonData, sport.key);
            
            // RESET semua filter dan tanggal ketika pindah sport
            currentFilter = 'all';
            selectedDate = 'all';
            currentActiveDate = null;
            searchQuery = '';
            
            // Update active state
            document.querySelectorAll('.sport-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Switch sport
            window.currentSport = sport.key;
            renderSportsTabs(sport.key);
            
            // Reset date navigator ke hari ini
            resetDateNavigatorToToday();
            
            // Fetch real data untuk sport baru (in background)
            fetchAndRenderLeagues(sport.key).then(() => {
              // Reset semua filter buttons ke state default
              document.querySelectorAll('.quick-filter-btn').forEach(filterBtn => {
                filterBtn.classList.remove('active');
              });
              
              // Activate "Semua" filter button
              const allFilterBtn = document.querySelector('[data-filter="all"]');
              if (allFilterBtn) {
                allFilterBtn.classList.add('active');
              }
              
              console.log('‚úÖ Sport switched and filters reset to default');
            });
          }
        };
        tabs.appendChild(btn);
      });
    }

    // Enhanced loader dengan progress dan timeout indicator
    function showLoader(show = true) {
      const main = document.getElementById('main-content');
      if (!main) return;
      
      if (!show) {
        main.innerHTML = '';
        return;
      }
      
      const timeRemaining = Math.max(0, MAX_LOADING_TIME - (Date.now() - loadingStartTime));
      const progress = Math.min(100, ((Date.now() - loadingStartTime) / MAX_LOADING_TIME) * 100);
      
      main.innerHTML = `
        <div class="ultra-loader" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px 20px;
          text-align: center;
          min-height: 200px;
        ">
          <div style="
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
          "></div>
          
          <div style="
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #007bff;
          ">‚ö° Loading...</div>
          
          <div style="
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
          ">Loading data olahraga...</div>
          
          <div style="
            width: 200px;
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
          ">
            <div style="
              width: ${progress}%;
              height: 100%;
              background: linear-gradient(90deg, #007bff, #28a745);
              border-radius: 3px;
              transition: width 0.3s ease;
            "></div>
          </div>
          
          <div style="
            font-size: 12px;
            color: #999;
          ">${timeRemaining > 0 ? `${Math.ceil(timeRemaining/1000)}s remaining` : 'Optimizing...'}</div>
        </div>
        
        <style>
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
      `;
      
      // Update progress setiap 100ms
      const progressInterval = setInterval(() => {
        const newTimeRemaining = Math.max(0, MAX_LOADING_TIME - (Date.now() - loadingStartTime));
        const newProgress = Math.min(100, ((Date.now() - loadingStartTime) / MAX_LOADING_TIME) * 100);
        
        const progressBar = main.querySelector('.ultra-loader div:nth-child(4) div');
        const timeText = main.querySelector('.ultra-loader div:last-child');
        
        if (progressBar) {
          progressBar.style.width = `${newProgress}%`;
        }
        if (timeText) {
          timeText.textContent = newTimeRemaining > 0 ? `${Math.ceil(newTimeRemaining/1000)}s remaining` : 'Optimizing...';
        }
        
        // Clear interval jika loading selesai atau timeout
        if (newTimeRemaining <= 0 || currentLoadingState !== LoadingState.LOADING) {
          clearInterval(progressInterval);
        }
      }, 100);
    }

    // Show error dengan enhanced styling dan retry options
    function showError(msg) {
      const main = document.getElementById('main-content');
      if (main) {
        main.innerHTML = `
          <div class="error-container" style="
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(255, 107, 107, 0.3);
            margin: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
          ">
            <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
            <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">
              Gagal Memuat Data
            </div>
            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 20px; line-height: 1.5;">
              ${msg}
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
              <button onclick="location.reload()" style="
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.3);
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.2s ease;
              " onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'"
                 onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                üîÑ Refresh Halaman
              </button>
              <button onclick="fetchAndRenderLeagues(window.currentSport)" style="
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.3);
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.2s ease;
              " onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'"
                 onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                üîÑ Coba Lagi
              </button>
            </div>
            <div style="font-size: 12px; opacity: 0.7; margin-top: 15px;">
              Jika masalah berlanjut, pastikan koneksi internet stabil dan endpoint Google Apps Script aktif
            </div>
          </div>
        `;
      }
    }

    // Get today's date in DD/MM/YYYY format
    function getTodayDate() {
      const today = new Date();
      const day = String(today.getDate()).padStart(2, '0');
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const year = today.getFullYear();
      return `${day}/${month}/${year}`;
    }

    // FUNGSI DETEKSI PERTANDINGAN LIVE - BERDASARKAN WAKTU WIB
    function checkIfMatchIsLive(matchTime, matchDate) {
      try {
        // Ambil waktu sekarang dalam WIB (UTC+7)
        const now = new Date();
        
        // Get timezone offset in minutes (WIB is UTC+7)
        const wibOffset = 7 * 60; // 7 hours in minutes
        const localOffset = now.getTimezoneOffset(); // Local timezone offset from UTC
        const wibTime = new Date(now.getTime() + (wibOffset + localOffset) * 60000);
        
        console.log(`üïê Current local time: ${now.toLocaleString()}`);
        console.log(`üïê Current WIB time: ${wibTime.toLocaleString()}`);
        
        // Parse tanggal pertandingan (DD/MM/YYYY)
        if (!matchDate || !matchDate.includes('/')) {
          console.warn('Invalid match date format:', matchDate);
          return false;
        }
        
        const [day, month, year] = matchDate.split('/').map(Number);
        
        // Parse waktu pertandingan (HH:MM WIB atau HH:MM)
        if (!matchTime || !matchTime.includes(':')) {
          console.warn('Invalid match time format:', matchTime);
          return false;
        }
        
        const timeString = matchTime.replace(/WIB|wib/g, '').trim();
        const [hours, minutes] = timeString.split(':').map(Number);
        
        // Validate parsed values
        if (isNaN(day) || isNaN(month) || isNaN(year) || isNaN(hours) || isNaN(minutes)) {
          console.warn('Invalid date/time values:', { day, month, year, hours, minutes });
          return false;
        }
        
        // Buat Date object untuk pertandingan dalam WIB
        const matchDateTime = new Date(year, month - 1, day, hours, minutes);
        
        // Hitung selisih waktu dalam menit
        const timeDiffMinutes = (wibTime.getTime() - matchDateTime.getTime()) / (1000 * 60);
        
        // Pertandingan dianggap LIVE jika:
        // 1. Waktu sudah lewat (timeDiffMinutes > 0)
        // 2. Belum lebih dari 120 menit (2 jam)
        const isLive = timeDiffMinutes > 0 && timeDiffMinutes <= 120;
        
        console.log(`üî¥ LIVE Check: ${matchDate} ${matchTime}`);
        console.log(`   Now WIB: ${wibTime.toLocaleString('id-ID')}`);
        console.log(`   Match Time: ${matchDateTime.toLocaleString('id-ID')}`);
        console.log(`   Diff Minutes: ${Math.round(timeDiffMinutes)}`);
        console.log(`   Is LIVE: ${isLive}`);
        
        return isLive;
      } catch (error) {
        console.warn('Error checking live status:', error);
        return false;
      }
    }

    // Helper function untuk membuat badge LIVE
    function createLiveBadge() {
      return '<span class="live-badge" style="background: #ff0000; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: bold; margin-left: 5px; animation: pulse 1.5s infinite;">üî¥ LIVE</span>';
    }

    // FUNGSI TEST UNTUK VERIFIKASI FORMAT TANGGAL
    function testDateFormatting() {
      console.log("üß™ TESTING DATE FORMATTING CONSISTENCY:");
      
      // Test hari ini
      const today = new Date();
      const hariIniFormatted = formatDateToDDMMYYYY(today);
      console.log("‚úÖ Hari Ini:", hariIniFormatted);
      
      // Test besok
      const besokFormatted = getTomorrowFormatted();
      console.log("‚úÖ Besok:", besokFormatted);
      
      // Test dengan offset
      const plus1d = getDateWithOffsetFormatted(1);
      const minus1d = getDateWithOffsetFormatted(-1);
      console.log("‚úÖ +1 hari:", plus1d);
      console.log("‚úÖ -1 hari:", minus1d);
      
      // Test perbandingan string
      const testDate = "25/07/2025";
      const isToday = testDate === hariIniFormatted;
      console.log(`‚úÖ Test perbandingan: "${testDate}" === "${hariIniFormatted}" = ${isToday}`);
      
      console.log("üéØ Format yang digunakan: DD/MM/YYYY dengan padStart(2, '0')");
      console.log("üéØ Semua perbandingan menggunakan string === string");
    }

    // FUNGSI PEMROSESAN TANGGAL - FORMAT DD/MM/YYYY KONSISTEN
    // Convert Date object to DD/MM/YYYY string format (sesuai format spreadsheet)
    function formatDateToDDMMYYYY(date) {
      const dd = String(date.getDate()).padStart(2, '0');
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const yyyy = date.getFullYear();
      const formatted = `${dd}/${mm}/${yyyy}`;
      console.log('üìÖ Date formatted to DD/MM/YYYY:', formatted);
      return formatted;
    }

    // Helper: Get today's date in DD/MM/YYYY format
    function getTodayFormatted() {
      const today = new Date();
      return formatDateToDDMMYYYY(today);
    }

    // Helper: Get tomorrow's date in DD/MM/YYYY format
    function getTomorrowFormatted() {
      const besok = new Date();
      besok.setDate(besok.getDate() + 1);
      return formatDateToDDMMYYYY(besok);
    }

    // Helper: Get date with offset in DD/MM/YYYY format
    function getDateWithOffsetFormatted(offsetDays) {
      const date = new Date();
      date.setDate(date.getDate() + offsetDays);
      return formatDateToDDMMYYYY(date);
    }

    // Populate date select options
    function populateDateOptions(leagues) {
      const dateSelect = document.getElementById('date-select');
      if (!dateSelect) return;
      
      const dates = new Set();
      
      // Collect all unique dates
      Object.values(leagues).forEach(matches => {
        matches.forEach(match => {
          if (match.tanggal) {
            dates.add(match.tanggal);
          }
        });
      });
      
      // Sort dates
      const sortedDates = Array.from(dates).sort((a, b) => {
        let dateA = a.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
        let dateB = b.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
        return new Date(dateA) - new Date(dateB);
      });
      
      // Clear existing options except "Semua Tanggal"
      dateSelect.innerHTML = '<option value="all">Semua Tanggal</option>';
      
      // Get today's date
      const today = getTodayDate();
      let todayExists = false;
      
      // Add date options
      sortedDates.forEach(date => {
        const option = document.createElement('option');
        option.value = date;
        option.textContent = date;
        
        // Check if this is today's date
        if (date === today) {
          todayExists = true;
          option.textContent = date + ' (Hari Ini)';
          option.style.fontWeight = 'bold';
          option.style.color = '#1976d2';
        }
        
        if (date === selectedDate) {
          option.selected = true;
        }
        dateSelect.appendChild(option);
      });
      
      console.log('üìÖ Today exists in data:', todayExists);
      console.log('üìÖ Current selectedDate:', selectedDate);
      
      // JANGAN auto-select tanggal apapun - biarkan user memilih sendiri
      // Atau default ke 'all' untuk menampilkan semua
      if (selectedDate === 'all') {
        // Tetap di 'all' - tampilkan semua tanggal
        selectedDate = 'all';
        dateSelect.value = 'all';
      }
    }

    // Filter leagues by selected date
    function filterLeaguesByDate(leagues, targetDate) {
      if (targetDate === 'all') {
        return leagues;
      }
      
      const filtered = {};
      Object.entries(leagues).forEach(([league, matches]) => {
        const filteredMatches = matches.filter(match => match.tanggal === targetDate);
        if (filteredMatches.length > 0) {
          filtered[league] = filteredMatches;
        }
      });
      
      return filtered;
    }

    // Render liga dan pertandingan dengan gaya Flashscore
    function renderLeagues(leagues, sportKey) {
      const main = document.getElementById('main-content');
      if (!main) return;
      
      main.innerHTML = '';
      
      // Store original data
      currentSportData = leagues;
      
      // Populate date options
      populateDateOptions(leagues);
      
      // RENDER SEMUA DATA - tidak filter apapun saat render
      // Filter hanya dilakukan oleh tombol "Hari Ini", "Besok", "Minggu Ini" via applyFilters()
      const filteredLeagues = leagues; // Tampilkan SEMUA data
      
      if (!filteredLeagues || Object.keys(filteredLeagues).length === 0) {
        // Don't show error immediately - might still be loading
        if (currentLoadingState !== LoadingState.LOADING) {
          main.innerHTML = '<div class="error-msg">Tidak ada jadwal tersedia.</div>';
        }
        return;
      }
      
      Object.entries(filteredLeagues).forEach(([league, matches], idx) => {
        // Accordion
        const accordion = document.createElement('div');
        accordion.className = 'accordion' + (idx === 0 ? ' expanded' : '');

        // Header
        const header = document.createElement('div');
        header.className = 'accordion-header';
        header.innerHTML = `
          <span class="accordion-title">
            <span class="league-icon">${getLigaIcon(league)}</span>
            ${escapeHTML(league)}
          </span>
          <span class="accordion-arrow">‚ñ∂</span>`;
        
        header.onclick = () => {
          const wasExpanded = accordion.classList.contains('expanded');
          
          // Close all other accordions
          document.querySelectorAll('.accordion.expanded').forEach(acc => {
            if (acc !== accordion) {
              acc.classList.remove('expanded');
            }
          });
          
          // Toggle current accordion
          if (wasExpanded) {
            accordion.classList.remove('expanded');
          } else {
            accordion.classList.add('expanded');
          }
        };

        // Content
        const content = document.createElement('div');
        content.className = 'accordion-content';

        // Create match rows (Flashscore style)
        matches.forEach(match => {
          const matchRow = document.createElement('div');
          matchRow.className = 'match-row';
          
          // Mapping field yang konsisten untuk berbagai format data
          const homeTeam = match.home || match.tima || match.timhome || match.team1 || '';
          const awayTeam = match.away || match.timb || match.timaway || match.team2 || '';
          const matchTime = match.jam || match.time || match.waktu || '';
          const matchDate = match.tanggal || match.date || match.tgl || '';
          
          // Enhanced score mapping with more field variations and proper 0 handling
          const homeScoreRaw = getFirstValidField(match.scorea, match.score1, match.homescore, match.skor_home, match.skor1, match.skorhome, match.home_score, match.scoreHome);
          const awayScoreRaw = getFirstValidField(match.scoreb, match.score2, match.awayscore, match.skor_away, match.skor2, match.skoraway, match.away_score, match.scoreAway);
          
          const homeScore = getScore(homeScoreRaw);
          const awayScore = getScore(awayScoreRaw);
          
          // Debug score mapping for first few matches
          if (Math.random() < 0.1) { // Log 10% of matches for debugging
            console.log('üéØ Score mapping debug for match:', {
              homeTeam,
              awayTeam,
              homeScoreRaw,
              awayScoreRaw,
              homeScore,
              awayScore,
              availableFields: Object.keys(match),
              scoreFields: Object.keys(match).filter(key => key.toLowerCase().includes('score') || key.toLowerCase().includes('skor'))
            });
          }
          
          const betLink = match.linkbet || match.link || match.bet || '#';
          
          // Validate data - skip if essential fields are missing
          if (!homeTeam || !awayTeam || !matchTime || !matchDate) {
            console.warn('‚ö†Ô∏è Skipping match with missing data:', match);
            return;
          }
          
          // Determine appropriate labels based on sport type
          let homeLabel = 'HOME';
          let awayLabel = 'AWAY';
          
          if (sportKey === 'tennis' || sportKey === 'badminton') {
            homeLabel = 'PLAYER 1';
            awayLabel = 'PLAYER 2';
          } else if (sportKey === 'esport') {
            homeLabel = 'TEAM 1';
            awayLabel = 'TEAM 2';
          }
          
          // Generate match status
          const matchStatus = getMatchStatus(matchTime, { tanggal: matchDate, ...match });
          const liveIndicator = matchStatus.isLive ? '<div class="live-indicator"></div>' : '';
          
          // Disable bet button for finished matches
          const betButtonClass = matchStatus.statusClass === 'finished' ? 'bet-btn disabled' : 'bet-btn';
          const betButtonHref = matchStatus.statusClass === 'finished' ? '#' : betLink;
          const betButtonOnClick = matchStatus.statusClass === 'finished' ? 'onclick="return false;"' : '';
          
          matchRow.innerHTML = `
            <div class="match-time">
              <div>${escapeHTML(matchDate)}</div>
              <div>${escapeHTML(matchTime)}</div>
              <div class="match-status ${matchStatus.statusClass}">${matchStatus.statusText}</div>
              ${matchStatus.countdown ? `<div class="match-countdown">${matchStatus.countdown}</div>` : ''}
            </div>
            <div class="match-teams">
              <div class="team-row">
                <span class="team-label home" data-sport="${sportKey}">${homeLabel}</span>
                <span class="team-name">${escapeHTML(homeTeam)}</span>
                <span class="team-score ${matchStatus.isLive ? 'live-score' : ''}">${homeScore}</span>
              </div>
              <div class="team-row">
                <span class="team-label away" data-sport="${sportKey}">${awayLabel}</span>
                <span class="team-name">${escapeHTML(awayTeam)}</span>
                <span class="team-score ${matchStatus.isLive ? 'live-score' : ''}">${awayScore}</span>
              </div>
            </div>
            <div class="match-bet">
              <a class="${betButtonClass}" href="${betButtonHref}" target="_blank" rel="noopener" ${betButtonOnClick}>${matchStatus.statusClass === 'finished' ? 'FINISHED' : 'BET'}</a>
            </div>
          `;
          
          content.appendChild(matchRow);
        });

        accordion.appendChild(header);
        accordion.appendChild(content);
        main.appendChild(accordion);
      });
    }

    // Fungsi untuk menentukan status match berdasarkan tanggal dan waktu yang 100% akurat
    function getMatchStatus(timeString, matchData = {}) {
      // Skip jika timeString tidak valid atau dari skeleton data
      if (!timeString || timeString.includes('‚è≥') || timeString.includes('--:--') || timeString.trim() === '') {
        return { statusClass: 'finished', statusText: 'Finished', isLive: false, countdown: null };
      }
      
      // Gunakan waktu real-time saat ini dengan timezone Indonesia
      const now = new Date();
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();
      const currentTime = currentHour * 60 + currentMinute; // Total menit hari ini
      
      console.log(`üïê Real time sekarang: ${String(currentHour).padStart(2, '0')}:${String(currentMinute).padStart(2, '0')}`);
      
      // Jika ada status dari API, gunakan itu terlebih dahulu
      if (matchData.status) {
        switch(matchData.status.toLowerCase()) {
          case 'live':
          case 'sedang bermain':
          case 'ongoing':
            return {
              statusClass: 'live',
              statusText: 'LIVE',
              isLive: true,
              countdown: null
            };
          case 'finished':
          case 'selesai':
          case 'final':
            return {
              statusClass: 'finished',
              statusText: 'Finished',
              isLive: false,
              countdown: null
            };
        }
      }
      
      // Validasi dan parse waktu pertandingan (format HH:MM)
      if (!timeString || typeof timeString !== 'string') {
        return { statusClass: 'finished', statusText: 'Finished', isLive: false };
      }
      
      // Clean time string dari karakter yang tidak diinginkan
      const cleanTimeString = timeString.replace(/[^0-9:]/g, '').trim();
      const timeParts = cleanTimeString.split(':');
      
      if (timeParts.length !== 2) {
        return { statusClass: 'finished', statusText: 'Finished', isLive: false };
      }
      
      const matchHours = parseInt(timeParts[0]);
      const matchMinutes = parseInt(timeParts[1]);
      
      // Validasi nilai yang diparsing
      if (isNaN(matchHours) || isNaN(matchMinutes) || 
          matchHours < 0 || matchHours > 23 || 
          matchMinutes < 0 || matchMinutes > 59) {
        console.warn('‚ö†Ô∏è Invalid time format:', timeString);
        return { statusClass: 'finished', statusText: 'Invalid Time', isLive: false };
      }
      
      const matchTime = matchHours * 60 + matchMinutes; // Total menit pertandingan
      
      console.log(`‚öΩ Waktu pertandingan: ${String(matchHours).padStart(2, '0')}:${String(matchMinutes).padStart(2, '0')}`);
      
      // Parse tanggal pertandingan
      if (!matchData.tanggal) {
        return { statusClass: 'finished', statusText: 'Finished', isLive: false };
      }
      
      const dateParts = matchData.tanggal.split('/');
      if (dateParts.length !== 3) {
        return { statusClass: 'finished', statusText: 'Finished', isLive: false };
      }
      
      const matchDay = parseInt(dateParts[0]);
      const matchMonth = parseInt(dateParts[1]) - 1; // Month is 0-indexed
      const matchYear = parseInt(dateParts[2]);
      
      // Buat tanggal hari ini untuk perbandingan
      const today = new Date();
      const todayDay = today.getDate();
      const todayMonth = today.getMonth();
      const todayYear = today.getFullYear();
      
      // Bandingkan tanggal - jika bukan hari ini
      if (matchYear < todayYear || 
          (matchYear === todayYear && matchMonth < todayMonth) ||
          (matchYear === todayYear && matchMonth === todayMonth && matchDay < todayDay)) {
        // Pertandingan di masa lalu
        return {
          statusClass: 'finished',
          statusText: 'Finished',
          isLive: false,
          countdown: null
        };
      }
      
      if (matchYear > todayYear || 
          (matchYear === todayYear && matchMonth > todayMonth) ||
          (matchYear === todayYear && matchMonth === todayMonth && matchDay > todayDay)) {
        // Pertandingan di masa depan
        const matchDate = new Date(matchYear, matchMonth, matchDay);
        const todayDate = new Date(todayYear, todayMonth, todayDay);
        const daysDiff = Math.ceil((matchDate - todayDate) / (1000 * 60 * 60 * 24));
        
        return {
          statusClass: 'upcoming',
          statusText: 'Upcoming',
          isLive: false,
          countdown: daysDiff === 1 ? 'Tomorrow' : `${daysDiff} days`
        };
      }
      
      // Pertandingan hari ini - bandingkan waktu dengan SANGAT AKURAT
      const timeDiffMinutes = matchTime - currentTime;
      
      console.log(`üìä Selisih waktu: ${timeDiffMinutes} menit (+ = belum dimulai, - = sudah berlalu)`);
      
      // LOGIKA BARU: Hanya pertandingan yang BENAR-BENAR sudah dimulai yang LIVE
      
      // Jika pertandingan masih akan datang (waktu pertandingan > waktu sekarang)
      if (timeDiffMinutes > 0) {
        // Jika dalam 15 menit ke depan
        if (timeDiffMinutes <= 15) {
          return {
            statusClass: 'upcoming',
            statusText: 'Starting Soon',
            isLive: false,
            countdown: `${timeDiffMinutes}m`
          };
        }
        
        // Pertandingan upcoming hari ini
        return {
          statusClass: 'upcoming',
          statusText: 'Upcoming',
          isLive: false,
          countdown: timeDiffMinutes > 60 ? `${Math.floor(timeDiffMinutes/60)}h ${timeDiffMinutes%60}m` : `${timeDiffMinutes}m`
        };
      }
      
      // Jika pertandingan sudah dimulai (waktu pertandingan <= waktu sekarang)
      const elapsedMinutes = Math.abs(timeDiffMinutes);
      
      // Jika baru saja dimulai sampai 2 jam = LIVE
      if (elapsedMinutes <= 120) {
        return {
          statusClass: 'live',
          statusText: 'LIVE',
          isLive: true,
          countdown: `${elapsedMinutes}' elapsed`
        };
      }
      
      // Jika sudah lewat lebih dari 2 jam = Finished
      return {
        statusClass: 'finished',
        statusText: 'Finished',
        isLive: false,
        countdown: null
      };
    }

    // Reset all filters and show all data
    function resetAllFilters() {
      console.log('üîÑ Resetting all filters...');
      
      // Reset global variables
      currentFilter = 'all';
      selectedDate = 'all';
      currentActiveDate = null;
      searchQuery = '';
      
      // Reset UI elements
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.value = '';
      }
      
      const clearBtn = document.getElementById('clear-search');
      if (clearBtn) {
        clearBtn.classList.remove('show');
      }
      
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = 'all';
      }
      
      // Reset filter buttons
      document.querySelectorAll('.quick-filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.filter === 'all') {
          btn.classList.add('active');
        }
      });
      
      // Reset date navigator
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      if (currentDateDisplay) {
        currentDateDisplay.classList.remove('active');
      }
      
      document.querySelectorAll('.quick-date-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Re-render all data
      if (currentSportData) {
        renderLeagues(currentSportData, window.currentSport);
        showTemporaryNotification('‚úÖ Filter direset, menampilkan semua data', 'success');
      } else {
        // Fetch fresh data if none available
        fetchAndRenderLeagues(window.currentSport);
      }
    }

    // Create mock data untuk testing dengan data LIVE yang realistis untuk semua sport
    function createMockData() {
      const today = getTodayFormatted();
      const yesterday = getDateWithOffsetFormatted(-1);
      const tomorrow = getTomorrowFormatted();
      const dayAfter = getDateWithOffsetFormatted(2);
      const threeDaysAgo = getDateWithOffsetFormatted(-3);
      const threeDaysLater = getDateWithOffsetFormatted(3);
      
      // Generate waktu LIVE yang realistis (pertandingan yang sedang berlangsung)
      const now = new Date();
      const liveTime1 = new Date(now.getTime() - 45 * 60000); // Dimulai 45 menit lalu
      const liveTime2 = new Date(now.getTime() - 75 * 60000); // Dimulai 75 menit lalu
      const liveTime3 = new Date(now.getTime() - 30 * 60000); // Dimulai 30 menit lalu
      const upcomingTime = new Date(now.getTime() + 120 * 60000); // 2 jam dari sekarang
      const recentTime = new Date(now.getTime() + 15 * 60000); // 15 menit dari sekarang
      
      const formatTime = (date) => {
        return String(date.getHours()).padStart(2, '0') + ':' + String(date.getMinutes()).padStart(2, '0');
      };
      
      // Deteksi sport saat ini untuk memberikan data yang relevan
      const currentSport = window.currentSport || 'bola';
      
      // Mock data berdasarkan sport
      const mockDataBySport = {
        'bola': {
          "Premier League": [
            {
              tanggal: yesterday,
              jam: "21:00",
              home: "Manchester United",
              away: "Liverpool",
              scorea: "2",
              scoreb: "1",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH 1
              home: "Arsenal",
              away: "Chelsea",
              scorea: "1",
              scoreb: "1",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime), // UPCOMING
              home: "Manchester City",
              away: "Tottenham",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ],
          "La Liga": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH 2
              home: "Real Madrid",
              away: "Barcelona",
              scorea: "0",
              scoreb: "2",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "19:00",
              home: "Atletico Madrid",
              away: "Sevilla",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ]
        },
        
        'basket': {
          "NBA": [
            {
              tanggal: yesterday,
              jam: "09:00",
              home: "Los Angeles Lakers",
              away: "Boston Celtics",
              scorea: "112",
              scoreb: "108",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              home: "Golden State Warriors",
              away: "Miami Heat",
              scorea: "85",
              scoreb: "92",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              home: "Chicago Bulls",
              away: "New York Knicks",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ],
          "EuroLeague": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              home: "Real Madrid",
              away: "Barcelona",
              scorea: "68",
              scoreb: "71",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "02:00",
              home: "Fenerbahce",
              away: "CSKA Moscow",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ]
        },
        
        'tennis': {
          "ATP Masters": [
            {
              tanggal: yesterday,
              jam: "14:00",
              player1: "Novak Djokovic",
              player2: "Rafael Nadal",
              score1: "6-4, 6-2",
              score2: "4-6, 2-6",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              player1: "Carlos Alcaraz",
              player2: "Daniil Medvedev",
              score1: "6-3, 4-2",
              score2: "3-6, 2-4",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              player1: "Stefanos Tsitsipas",
              player2: "Alexander Zverev",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ],
          "WTA Tour": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              player1: "Iga Swiatek",
              player2: "Coco Gauff",
              score1: "3-6, 5-2",
              score2: "6-3, 2-5",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "16:00",
              player1: "Aryna Sabalenka",
              player2: "Jessica Pegula",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ]
        },
        
        'voli': {
          "Serie A1": [
            {
              tanggal: yesterday,
              jam: "20:00",
              home: "Trentino Volley",
              away: "Perugia",
              scorea: "3",
              scoreb: "1",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              home: "Modena Volley",
              away: "Milano",
              scorea: "1",
              scoreb: "2",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              home: "Civitanova",
              away: "Monza",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ],
          "Champions League": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              home: "Zenit Kazan",
              away: "Fenerbahce",
              scorea: "2",
              scoreb: "0",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "21:30",
              home: "ZAKSA",
              away: "Jastrzebski",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ]
        },
        
        'badminton': {
          "BWF World Tour": [
            {
              tanggal: yesterday,
              jam: "13:00",
              player1: "Viktor Axelsen",
              player2: "Kento Momota",
              score1: "21-18, 21-15",
              score2: "18-21, 15-21",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              player1: "Anthony Ginting",
              player2: "Chen Long",
              score1: "21-16, 12-8",
              score2: "16-21, 8-12",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              player1: "Lee Zii Jia",
              player2: "Jonatan Christie",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ],
          "All England": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              player1: "Kevin Sukamuljo/Marcus Gideon",
              player2: "Mohammad Ahsan/Hendra Setiawan",
              score1: "18-21, 15-10",
              score2: "21-18, 10-15",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "15:30",
              player1: "Greysia Polii/Apriyani Rahayu",
              player2: "Chen Qingchen/Jia Yifan",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ]
        },
        
        'baseball': {
          "MLB": [
            {
              tanggal: yesterday,
              jam: "07:00",
              home: "New York Yankees",
              away: "Boston Red Sox",
              scorea: "8",
              scoreb: "5",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              home: "Los Angeles Dodgers",
              away: "San Francisco Giants",
              scorea: "4",
              scoreb: "6",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              home: "Houston Astros",
              away: "Oakland Athletics",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ],
          "NPB": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              home: "Tokyo Giants",
              away: "Hanshin Tigers",
              scorea: "2",
              scoreb: "3",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "18:00",
              home: "Hiroshima Carp",
              away: "Yakult Swallows",
              scorea: "-",
              scoreb: "-",
              linkbet: "#"
            }
          ]
        },
        
        'esport': {
          "League of Legends": [
            {
              tanggal: yesterday,
              jam: "18:00",
              team1: "T1",
              team2: "Gen.G",
              score1: "3",
              score2: "1",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(liveTime1), // LIVE MATCH
              team1: "DRX",
              team2: "KT Rolster",
              score1: "1",
              score2: "2",
              linkbet: "#"
            },
            {
              tanggal: today,
              jam: formatTime(upcomingTime),
              team1: "Damwon KIA",
              team2: "Hanwha Life",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ],
          "CS:GO": [
            {
              tanggal: today,
              jam: formatTime(liveTime2), // LIVE MATCH
              team1: "Natus Vincere",
              team2: "Astralis",
              score1: "13",
              score2: "16",
              linkbet: "#"
            },
            {
              tanggal: tomorrow,
              jam: "22:00",
              team1: "FaZe Clan",
              team2: "Ninjas in Pyjamas",
              score1: "-",
              score2: "-",
              linkbet: "#"
            }
          ]
        }
      };
      
      // Return data sesuai sport atau default ke bola
      const sportData = mockDataBySport[currentSport] || mockDataBySport['bola'];
      
      // Normalize field names untuk konsistensi
      const normalizedData = {};
      Object.entries(sportData).forEach(([league, matches]) => {
        normalizedData[league] = matches.map(match => {
          // Normalize untuk tennis dan badminton (player -> home/away)
          if (match.player1 && match.player2) {
            return {
              ...match,
              home: match.player1,
              away: match.player2,
              scorea: match.score1 || '-',
              scoreb: match.score2 || '-'
            };
          }
          // Normalize untuk esports (team -> home/away)
          if (match.team1 && match.team2) {
            return {
              ...match,
              home: match.team1,
              away: match.team2,
              scorea: match.score1 || '-',
              scoreb: match.score2 || '-'
            };
          }
          // Default format sudah benar
          return match;
        });
      });
      
      return normalizedData;
    }

    // Use mock data as fallback when real data fails
    function useMockData(sport) {
      console.log('üìä Using mock data for sport:', sport);
      showLoader(false);
      
      try {
        const mockData = createMockData();
        
        // Store mock data
        allMatchesData[sport] = mockData;
        currentSportData = mockData;
        
        // Render mock data
        renderLeagues(mockData, sport);
        setupFilterAndSearch();
        
        // Show notification about mock data
        showTemporaryNotification(`üìä Menampilkan data demo untuk ${sport.toUpperCase()}. Data ini hanya untuk testing tampilan.`, 'info');
        currentLoadingState = LoadingState.FALLBACK;
        
        console.log('‚úÖ Mock data loaded successfully');
        
      } catch (error) {
        console.error('‚ùå Error loading mock data:', error);
        showError(`
          <div style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 48px; margin-bottom: 20px;">‚ùå</div>
            <h2 style="color: #dc3545; margin-bottom: 15px;">Error Loading Demo Data</h2>
            <p>Terjadi kesalahan saat memuat data demo.</p>
            <button onclick="location.reload()" style="
              background: #007bff; 
              color: white; 
              border: none; 
              padding: 12px 24px; 
              border-radius: 8px; 
              cursor: pointer;
              font-size: 14px;
              margin-top: 15px;
            ">üîÑ Reload Halaman</button>
          </div>
        `);
      }
    }

    // Retry with extended timeout for real data
    function retryWithExtendedTimeout(sport) {
      console.log('üîÑ Retrying with extended timeout for real data...');
      showLoader();
      showTemporaryNotification('üîÑ Retrying with extended timeout...', 'info');
      
      // Reset state
      currentLoadingState = LoadingState.LOADING;
      loadingStartTime = Date.now();
      
      // Try again with no timeout limit - wait for real data
      setTimeout(() => {
        fetchAndRenderLeagues(sport);
      }, 1000);
    }

    // Escape HTML for safety
    function escapeHTML(str) {
      return String(str || '').replace(/[&<>"']/g, function(m) {
        return ({'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'})[m];
      });
    }

    // üèÜ BIG MATCH DETECTION SYSTEM
    function detectBigMatch(homeTeam, awayTeam, league, matchData = {}) {
      console.log('üîç Detecting big match:', { homeTeam, awayTeam, league });
      
      // Clean team names for comparison
      const home = (homeTeam || '').toLowerCase().trim();
      const away = (awayTeam || '').toLowerCase().trim();
      const leagueName = (league || '').toLowerCase().trim();
      
      // üèÜ PREMIUM LEAGUES
      const premiumLeagues = [
        'champions league', 'uefa champions league', 'ucl',
        'premier league', 'epl', 'english premier league',
        'la liga', 'spanish la liga', 'primera division',
        'serie a', 'italian serie a',
        'bundesliga', 'german bundesliga',
        'ligue 1', 'french ligue 1',
        'world cup', 'fifa world cup', 'piala dunia',
        'euros', 'european championship', 'euro',
        'nba', 'national basketball association',
        'nba finals', 'nba playoffs',
        'euroleague basketball',
        'wimbledon', 'us open', 'french open', 'australian open',
        'atp masters', 'wta premier',
        'dota 2 international', 'csgo major', 'lol worlds'
      ];
      
      // üåü BIG TEAMS
      const bigTeams = [
        // Football
        'real madrid', 'barcelona', 'manchester united', 'manchester city',
        'liverpool', 'chelsea', 'arsenal', 'tottenham',
        'bayern munich', 'borussia dortmund',
        'juventus', 'ac milan', 'inter milan',
        'psg', 'paris saint germain',
        'ajax', 'porto', 'benfica',
        'atletico madrid', 'valencia', 'sevilla',
        'napoli', 'roma', 'lazio', 'atalanta',
        'brazil', 'argentina', 'france', 'spain', 'germany', 'italy', 'england',
        
        // Basketball
        'los angeles lakers', 'lakers', 'golden state warriors', 'warriors',
        'boston celtics', 'celtics', 'miami heat', 'heat',
        'chicago bulls', 'bulls', 'san antonio spurs', 'spurs',
        
        // Tennis (Top players)
        'novak djokovic', 'rafael nadal', 'roger federer',
        'serena williams', 'naomi osaka',
        
        // Esports
        'team liquid', 'fnatic', 'g2 esports', 'cloud9',
        'sk telecom t1', 'skt', 't1'
      ];
      
      // üî• DERBY/RIVALRY KEYWORDS
      const derbyKeywords = [
        'el clasico', 'classico', 'clasico',
        'derby', 'derbi', 'manchester derby', 'merseyside derby',
        'north london derby', 'milan derby', 'rome derby',
        'superclasico', 'old firm', 'red devils'
      ];
      
      // üèÖ FINAL/IMPORTANT MATCH KEYWORDS
      const finalKeywords = [
        'final', 'finals', 'finale', 'championship',
        'semi final', 'semifinal', 'semi-final',
        'quarter final', 'quarterfinal', 'quarter-final',
        'cup final', 'title', 'decider',
        'playoff', 'play-off', 'elimination'
      ];
      
      // üî• HOT MATCH INDICATORS
      const hotKeywords = [
        'top 4', 'top four', 'relegation', 'promotion',
        'title race', 'championship race', 'must win',
        'crucial', 'decisive', 'do or die'
      ];
      
      let matchType = null;
      let badges = [];
      let priority = 0;
      
      // Check for LIVE status first
      const isLive = checkIfMatchIsLiveAdvanced(matchData.jam || matchData.time || '', matchData.tanggal || matchData.date || '');
      
      // 1. Check for Finals/Important matches
      if (finalKeywords.some(keyword => 
        leagueName.includes(keyword) || 
        home.includes(keyword) || 
        away.includes(keyword)
      )) {
        matchType = 'final-match';
        if (leagueName.includes('final') || leagueName.includes('championship')) {
          badges.push({ text: 'üèÜ FINAL', class: 'final' });
        } else if (leagueName.includes('semi')) {
          badges.push({ text: 'ü•â SEMI', class: 'final' });
        } else {
          badges.push({ text: 'üèÖ PLAYOFF', class: 'final' });
        }
        priority = 5;
      }
      
      // 2. Check for Derby/Rivalry matches
      else if (derbyKeywords.some(keyword => 
        leagueName.includes(keyword) || 
        home.includes(keyword) || 
        away.includes(keyword) ||
        (home.includes('manchester') && away.includes('manchester')) ||
        (home.includes('milan') && away.includes('milan')) ||
        (home.includes('real madrid') && away.includes('barcelona')) ||
        (home.includes('barcelona') && away.includes('real madrid'))
      )) {
        matchType = 'derby-match';
        if (home.includes('real madrid') && away.includes('barcelona') || 
            home.includes('barcelona') && away.includes('real madrid')) {
          badges.push({ text: '‚öîÔ∏è EL CLASICO', class: 'derby' });
        } else {
          badges.push({ text: 'üî• DERBY', class: 'derby' });
        }
        priority = 4;
      }
      
      // 3. Check for Premium League matches
      else if (premiumLeagues.some(league => leagueName.includes(league))) {
        matchType = 'premium-league';
        if (leagueName.includes('champions league') || leagueName.includes('ucl')) {
          badges.push({ text: 'üëë UCL', class: 'premium' });
        } else if (leagueName.includes('premier league') || leagueName.includes('epl')) {
          badges.push({ text: 'üíé EPL', class: 'premium' });
        } else if (leagueName.includes('la liga')) {
          badges.push({ text: '‚≠ê LA LIGA', class: 'premium' });
        } else if (leagueName.includes('nba')) {
          badges.push({ text: 'üèÄ NBA', class: 'premium' });
        } else {
          badges.push({ text: 'üëë PREMIUM', class: 'premium' });
        }
        priority = 3;
      }
      
      // 4. Check for Big Team matches
      else if (bigTeams.some(team => home.includes(team) || away.includes(team))) {
        matchType = 'big-match';
        badges.push({ text: '‚≠ê BIG MATCH', class: 'big' });
        priority = 2;
      }
      
      // 5. Check for Hot matches
      else if (hotKeywords.some(keyword => 
        leagueName.includes(keyword) || 
        home.includes(keyword) || 
        away.includes(keyword)
      )) {
        matchType = 'big-match';
        badges.push({ text: 'üî• HOT', class: 'hot' });
        priority = 1;
      }
      
      // Add LIVE badge if match is live
      if (isLive && matchType) {
        badges.unshift({ text: 'üî¥ LIVE', class: 'live' });
        priority += 2; // Boost priority for live matches
      }
      
      const result = {
        isBig: !!matchType,
        type: matchType,
        badges: badges,
        priority: priority,
        isLive: isLive
      };
      
      if (result.isBig) {
        console.log('üéØ BIG MATCH DETECTED:', result);
      }
      
      return result;
    }
    
    // Function to create badge HTML
    function createBadgeHTML(badges) {
      if (!badges || badges.length === 0) return '';
      
      return badges.map(badge => 
        `<span class="big-match-badge ${badge.class}">${badge.text}</span>`
      ).join('');
    }
    
    // Enhanced function to check if match is live
    function checkIfMatchIsLiveAdvanced(timeStr, dateStr) {
      try {
        if (!timeStr || !dateStr) return false;
        
        // Parse time and date
        const cleanTime = timeStr.replace(/[^0-9:]/g, '').trim();
        if (!cleanTime.includes(':')) return false;
        
        const [hours, minutes] = cleanTime.split(':').map(Number);
        if (isNaN(hours) || isNaN(minutes)) return false;
        
        // Parse date (DD/MM/YYYY format)
        const dateParts = dateStr.split('/');
        if (dateParts.length !== 3) return false;
        
        const [day, month, year] = dateParts.map(Number);
        if (isNaN(day) || isNaN(month) || isNaN(year)) return false;
        
        // Create match datetime
        const matchDate = new Date(year, month - 1, day, hours, minutes);
        const now = new Date();
        
        // Check if match is currently happening (within 2 hours window)
        const diffMs = now - matchDate;
        const diffHours = diffMs / (1000 * 60 * 60);
        
        return diffHours >= 0 && diffHours <= 2;
      } catch (error) {
        return false;
      }
    }

    // ‚úÖ FAST LOADING SYSTEM - Target loading cepat
    let isPreloading = false;
    let loadingStartTime = 0;
    const MAX_LOADING_TIME = 3000; // Loading timeout
    
    // Advanced loading state management
    const LoadingState = {
      IDLE: 'idle',
      LOADING: 'loading', 
      CACHED: 'cached',
      FALLBACK: 'fallback',
      ERROR: 'error'
    };
    let currentLoadingState = LoadingState.IDLE;
    
    // Skeleton/Fallback data untuk loading cepat - DISABLED TO FORCE REAL DATA
    function createSkeletonData(sport) {
      // Create immediate skeleton/placeholder content while real data loads
      console.log('‚ö° Creating skeleton content for instant loading:', sport);
      
      // Create sport-specific league names
      const sportLeagues = {
        'bola': ['Premier League', 'La Liga', 'Serie A', 'Champions League'],
        'basket': ['NBA', 'EuroLeague', 'Liga Indonesia', 'Asia Cup'],
        'tennis': ['ATP Tour', 'WTA Tour', 'Grand Slam', 'Masters'],
        'voli': ['Liga Voli', 'Asian Games', 'SEA Games', 'International'],
        'badminton': ['BWF Tour', 'All England', 'Indonesia Open', 'Asian Games'],
        'baseball': ['MLB', 'NPB', 'KBO', 'Liga Baseball'],
        'esport': ['DOTA 2', 'Mobile Legends', 'CS:GO', 'Valorant']
      };
      
      const leagues = sportLeagues[sport] || ['Loading Liga...'];
      const skeletonData = {};
      
      leagues.forEach(league => {
        skeletonData[`üîÑ ${league}`] = [
          {
            home: '‚óè ‚óè ‚óè Loading...',
            away: '‚óè ‚óè ‚óè Loading...',
            jam: '--:--',
            tanggal: getTodayFormatted(),
            scorea: null,
            scoreb: null,
            linkbet: '#'
          },
          {
            home: '‚ö° Memuat data...',
            away: '‚ö° Memuat data...',
            jam: '--:--',
            tanggal: getTodayFormatted(),
            scorea: null,
            scoreb: null,
            linkbet: '#'
          }
        ];
      });
      
      return skeletonData;
    }
    
    // Force loading timeout untuk memastikan UI tetap responsive - EXTENDED FOR REAL DATA
    function forceLoadingTimeout(sport) {
      setTimeout(() => {
        const timeElapsed = Date.now() - loadingStartTime;
        console.log(`‚è∞ Loading timeout check: ${timeElapsed}ms elapsed`);
        
        if (currentLoadingState === LoadingState.LOADING && timeElapsed >= MAX_LOADING_TIME) {
          console.log('‚ö†Ô∏è Loading timeout reached - but continuing to wait for real data');
          
          // Don't show skeleton data, keep waiting for real data
          showTemporaryNotification('üéØ BETTING SPORT Aman Terpercaya Hanya Di SLOTGOKIL', 'warning');
          
          // Continue loading in background with extended timeout
          setTimeout(() => {
            continueBackgroundLoading(sport);
          }, 100);
        }
      }, MAX_LOADING_TIME);
    }
    
    // Continue loading in background after timeout
    async function continueBackgroundLoading(sport) {
      try {
        console.log('üîÑ Continuing background loading for:', sport);
        const data = await fetchSportDataFast(sport, true); // Background mode
        
        if (data && Object.keys(data).length > 0) {
          allMatchesData[sport] = data;
          currentSportData = data;
          saveCachedData();
          
          // Quietly update UI
          renderLeagues(data, sport);
          setupFilterAndSearch();
          
          showTemporaryNotification('‚úÖ Full data loaded successfully!', 'success');
          currentLoadingState = LoadingState.CACHED;
        }
      } catch (error) {
        console.log('‚ö†Ô∏è Background loading failed:', error.message);
      }
    }
    
    // Smart preloading dengan prioritas berdasarkan usage patterns
    async function preloadAllSportsData() {
      if (isPreloading) return;
      isPreloading = true;
      
      console.log('üöÄ Smart preloading all sports data...');
      
      // Prioritas sport berdasarkan popularitas (bola prioritas tertinggi)
      const sportsToPreload = [
        'bola',     // Highest priority
        'basket',   // High priority  
        'tennis',   // Medium priority
        'voli',     // Medium priority
        'badmingan', 
        'baseball', 
        'esport'    // Lower priority
      ];
      
      // Preload dengan strategi staggered untuk menghindari overload
      for (let i = 0; i < sportsToPreload.length; i++) {
        const sport = sportsToPreload[i];
        
        if (!allMatchesData[sport]) {
          try {
            console.log(`üì• Smart preloading ${sport} (priority ${i+1})...`);
            
            // Delay berdasarkan prioritas (sport populer dimuat lebih dulu)
            if (i > 0) {
              await new Promise(resolve => setTimeout(resolve, i * 500)); // Staggered loading
            }
            
            const data = await fetchSportDataFast(sport, true);
            if (data && Object.keys(data).length > 0) {
              allMatchesData[sport] = data;
              console.log(`‚úÖ ${sport} preloaded successfully (${Object.keys(data).length} leagues)`);
              
              // Save updated cache immediately for each sport
              saveCachedData();
              
              // Update progress notification
              const loaded = i + 1;
              const total = sportsToPreload.length;
              if (loaded <= 3) { // Only show for first few
                showTemporaryNotification(`üì• Preloading sports... ${loaded}/${total} completed`, 'info');
              }
            }
          } catch (error) {
            console.log(`‚ö†Ô∏è ${sport} preload failed:`, error.message);
          }
        } else {
          console.log(`‚úÖ ${sport} already cached, skipping preload`);
        }
      }
      
      console.log('üéâ Smart preloading completed! All sports available for instant switching.');
      showTemporaryNotification('üéâ Semua sport dimuat! Switching antar sport lebih cepat.', 'success');
    }
    
    // Ultra-fast fetch function untuk preloading dengan timeout agresif
    async function fetchSportDataFast(sport, isBackground = false) {
      const sportMap = {
        'bola': 'bola', 'basket': 'basket', 'tennis': 'tennis', 
        'badminton': 'badminton', 'voli': 'voli', 'baseball': 'baseball', 'esport': 'esport'
      };
      
      const apiSport = sportMap[sport] || sport;
      const urlsToTry = FALLBACK_URLS;
      const maxUrls = isBackground ? 3 : 2; // Try more URLs in background
      const timeoutMs = isBackground ? 4000 : 2000; // Longer timeout for background
      
      for (let i = 0; i < Math.min(maxUrls, urlsToTry.length); i++) {
        try {
          const url = urlsToTry[i] + encodeURIComponent(`${DIRECT_URL}?sport=${apiSport}`);
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), timeoutMs);
          
          const res = await fetch(url, { 
            signal: controller.signal,
            headers: { 
              'Cache-Control': 'no-cache',
              'Priority': isBackground ? 'low' : 'high'
            }
          });
          clearTimeout(timeoutId);
          
          if (res.ok) {
            const text = await res.text();
            let data;
            
            if (urlsToTry[i].includes('allorigins.win/get')) {
              const wrapped = JSON.parse(text);
              data = JSON.parse(wrapped.contents);
            } else {
              data = JSON.parse(text);
            }
            
            if (data && !data.error && Object.keys(data).length > 0) {
              console.log(`‚úÖ Fast fetch success for ${sport} (attempt ${i+1})`);
              return data;
            }
          }
        } catch (error) {
          console.log(`‚ö†Ô∏è Fast fetch attempt ${i+1} failed for ${sport}:`, error.message);
        }
        
        // Minimal delay between attempts
        if (i < Math.min(maxUrls - 1, urlsToTry.length - 1)) {
          await new Promise(resolve => setTimeout(resolve, isBackground ? 100 : 50));
        }
      }
      
      throw new Error(`Fast fetch failed for ${sport} after ${maxUrls} attempts`);
    }
    
    // Background refresh untuk fresh data tanpa mengganggu UI
    async function fetchFreshDataInBackground(sport) {
      try {
        console.log('üîÑ Fetching fresh data in background for:', sport);
        const freshData = await fetchSportDataFast(sport, true);
        
        if (freshData && Object.keys(freshData).length > 0) {
          // Update cache quietly
          allMatchesData[sport] = freshData;
          saveCachedData();
          
          // Only update UI if user is still on the same sport
          if (window.currentSport === sport) {
            currentSportData = freshData;
            showTemporaryNotification('üîÑ Data updated with latest information', 'info');
          }
          
          console.log('‚úÖ Background refresh completed for:', sport);
        }
      } catch (error) {
        console.log('‚ö†Ô∏è Background refresh failed for:', sport, error.message);
      }
    }

    // Fetch and render leagues dengan fast loading system
    async function fetchAndRenderLeagues(sport) {
      console.log('üöÄ Fast loading initiated for:', sport);
      loadingStartTime = Date.now();
      currentLoadingState = LoadingState.LOADING;
      isDataLoading = true; // Set loading flag
      
      // Enhanced caching dengan instant loading untuk cached data
      if (allMatchesData[sport]) {
        console.log('‚ö° INSTANT LOADING from cache for:', sport);
        currentLoadingState = LoadingState.CACHED;
        isDataLoading = false; // Data ready
        currentSportData = allMatchesData[sport];
        renderLeagues(allMatchesData[sport], sport);
        
        // Apply pending filter if any
        if (pendingFilter) {
          console.log('‚ö° Applying pending filter from cache loading');
          applyPendingFilter();
        } else {
          // Immediate setup tanpa delay untuk cached data
          setupFilterAndSearch();
          // Jika ada tanggal aktif, filter ke tanggal tersebut
          if (currentActiveDate) {
            filterBySpecificDate(currentActiveDate);
          } else {
            applyFilters();
          }
        }
        
        const loadTime = Date.now() - loadingStartTime;
        showTemporaryNotification(`‚ö° DATA CACHE! Dimuat instan (${loadTime}ms)!`, 'success');
        
        // Background refresh for fresh data if cache is old
        const cacheInfo = loadCachedData();
        if (!cacheInfo.isFresh) {
          setTimeout(() => {
            console.log('üîÑ Background refresh for fresh data...');
            fetchFreshDataInBackground(sport);
          }, 2000);
        }
        return;
      }
      
      // Check if skeleton data is already displayed - don't show loader
      const hasSkeletonData = currentSportData && Object.keys(currentSportData).some(league => 
        league.includes('Loading') || currentSportData[league].some(match => 
          match.home === 'Loading...' || match.home === 'Memuat data...'
        )
      );
      
      // Start loading animation and timeout protection (only if no skeleton data)
      if (!hasSkeletonData) {
        showLoader();
      }
      forceLoadingTimeout(sport);
      
      // Map sport key to API endpoint - SESUAI DENGAN GOOGLE APPS SCRIPT
      const sportMap = {
        'bola': 'bola',
        'basket': 'basket', 
        'tennis': 'tennis',
        'voli': 'voli',
        'badminton': 'badminton',
        'baseball': 'baseball',
        'esport': 'esport'
      };
      
      const apiSport = sportMap[sport] || sport;
      console.log('üìã Sport Mapping:', {
        requestedSport: sport,
        mappedToAPI: apiSport,
        availableMappings: Object.keys(sportMap),
        isKnownSport: sportMap.hasOwnProperty(sport)
      });
      
      // Enhanced fetch function untuk mengakses Google Apps Script API - FIXED LOGIC
      async function tryFetch(url, sport, isAllOrigins = false) {
        let fullUrl;
        
        // Check if this is a direct URL or proxy URL
        if (url === DIRECT_URL) {
          // Direct Google Apps Script call
          fullUrl = `${url}?sport=${encodeURIComponent(sport)}&timestamp=${Date.now()}`;
        } else {
          // This is already a proxy URL with encoded target
          // We need to rebuild it properly
          const targetUrl = `${DIRECT_URL}?sport=${encodeURIComponent(sport)}&timestamp=${Date.now()}`;
          
          if (url.includes('api.allorigins.win/raw?url=')) {
            fullUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(targetUrl)}`;
          } else if (url.includes('cors-anywhere.herokuapp.com/')) {
            fullUrl = `https://cors-anywhere.herokuapp.com/${targetUrl}`;
          } else if (url.includes('corsproxy.io/?')) {
            fullUrl = `https://corsproxy.io/?${targetUrl}`;
          } else if (url.includes('api.codetabs.com/v1/proxy?quest=')) {
            fullUrl = `https://api.codetabs.com/v1/proxy?quest=${targetUrl}`;
          } else if (url.includes('cors-proxy.htmldriven.com/?url=')) {
            fullUrl = `https://cors-proxy.htmldriven.com/?url=${encodeURIComponent(targetUrl)}`;
          } else if (url.includes('thingproxy.freeboard.io/fetch/')) {
            fullUrl = `https://thingproxy.freeboard.io/fetch/${targetUrl}`;
          } else {
            // Fallback
            fullUrl = url + (url.includes('?') ? '&' : '?') + `sport=${encodeURIComponent(sport)}&timestamp=${Date.now()}`;
          }
        }
        
        console.log('üöÄ Trying Google Sheets API:', url.includes('script.google.com') ? 'Direct Google Apps Script' : 'Proxy');
        console.log('üîó Full URL (first 100 chars):', fullUrl.substring(0, 100) + '...');
        console.log('üåê CORS mode:', 'Standard');
        
        try {
          // Optimized timeout untuk kecepatan loading - Extended for real data
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 8000); // Extended to 8 seconds for real data
          
          const fetchOptions = {
            method: 'GET',
            headers: {
              'Accept': 'application/json, text/plain, */*'
            },
            signal: controller.signal,
            mode: 'cors'
          };
          
          const res = await fetch(fullUrl, fetchOptions);
          clearTimeout(timeoutId);
          
          console.log('üì° Google Sheets Response:', res.status, res.statusText);
          console.log('üì° Response Headers:', [...res.headers.entries()]);
          
          if (!res.ok) {
            throw new Error(`HTTP ${res.status}: ${res.statusText}`);
          }
          
          const text = await res.text();
          console.log('üìÑ Successfully fetched from Google Sheets (size:', text.length, 'chars)');
          console.log('üìÑ First 200 chars of response:', text.substring(0, 200));
          
          // Handle different response types dengan support untuk AllOrigins
          let jadwal;
          if (isAllOrigins && text.includes('"contents"')) {
            // AllOrigins /get wraps response in { contents: "actual_data" }
            try {
              const wrapper = JSON.parse(text);
              if (wrapper.contents) {
                jadwal = JSON.parse(wrapper.contents);
                console.log('‚úÖ Successfully parsed AllOrigins wrapped Google Sheets data');
              } else {
                throw new Error('No contents in AllOrigins response');
              }
            } catch (parseError) {
              throw new Error(`Failed to parse AllOrigins response: ${parseError.message}`);
            }
          } else {
            // Regular JSON response or AllOrigins raw
            if (text.includes('<!DOCTYPE html>') || text.includes('<html>')) {
              throw new Error('Received HTML instead of JSON - possible CORS or server error');
            }
            
            try {
              jadwal = JSON.parse(text);
              console.log('‚úÖ Successfully parsed direct JSON response');
            } catch (parseError) {
              throw new Error(`Invalid JSON response: ${parseError.message}`);
            }
          }
          
          console.log('‚úÖ Successfully fetched data from Google Sheets!', typeof jadwal);
          if (jadwal && typeof jadwal === 'object') {
            console.log('üìä Google Sheets data keys:', Object.keys(jadwal));
          }
          
          return jadwal;
        } catch (error) {
          console.warn(`‚ùå Failed to fetch from ${url.substring(0, 50)}...:`, error.message);
          
          // Provide detailed error information for debugging
          if (error.name === 'AbortError') {
            console.warn('‚è±Ô∏è Request timed out after 3 seconds');
          } else if (error.message.includes('CORS')) {
            console.warn('üö´ CORS error - trying next proxy...');
          } else if (error.message.includes('NetworkError')) {
            console.warn('üåê Network error - check internet connection');
          } else if (error.message.includes('Failed to fetch')) {
            console.warn('üì° Fetch failed - server may be unavailable');
          }
          
          throw error;
        }
      }
      
      // Enhanced fetch loop dengan smart fallback
      const urlsToTry = FALLBACK_URLS;
      let jadwal = null;
      let lastError = null;
      
      console.log(`üöÄ Will try ${urlsToTry.length} different endpoints...`);
      
      // Enhanced retry strategy untuk memaksimalkan koneksi Google Sheets
      for (let i = 0; i < urlsToTry.length; i++) {
        const url = urlsToTry[i];
        const isAllOrigins = url.includes('allorigins.win');
        const isDirect = url.includes('script.google.com');
        
        try {
          if (isDirect) {
            console.log(`üîÑ Attempt ${i + 1}/${urlsToTry.length}: Direct Google Apps Script`);
          } else if (isAllOrigins) {
            console.log(`üîÑ Attempt ${i + 1}/${urlsToTry.length}: AllOrigins Proxy for Google Sheets`);
          } else {
            console.log(`üîÑ Attempt ${i + 1}/${urlsToTry.length}: CORS Proxy for Google Sheets`);
          }
          
          // Adaptive strategy berdasarkan jenis endpoint
          if (i === 0) {
            // First attempt: Direct Google Apps Script URL
            jadwal = await tryFetch(url, apiSport, false);
          } else if (isAllOrigins) {
            // AllOrigins dengan special handling untuk Google Sheets
            jadwal = await tryFetch(url, apiSport, true);
          } else {
            // Regular proxy untuk Google Sheets
            jadwal = await tryFetch(url, apiSport, false);
          }
          
          // Validasi data dari Google Sheets
          if (jadwal && (typeof jadwal === 'object') && Object.keys(jadwal).length > 0) {
            const method = isDirect ? 'Direct Google Apps Script' : 
                          isAllOrigins ? 'AllOrigins Proxy' : 'CORS Proxy';
            console.log(`‚úÖ Successfully fetched Google Sheets data via: ${method}`);
            console.log(`‚úÖ Attempt ${i + 1}/${urlsToTry.length} succeeded`);
            console.log(`üìä Leagues found: ${Object.keys(jadwal).length}`);
            
            // Store the successful method for future reference
            window.lastSuccessfulMethod = method;
            window.lastSuccessfulAttempt = i + 1;
            break;
          } else {
            throw new Error('Empty or invalid response data');
          }
        } catch (error) {
          lastError = error;
          console.warn(`‚ùå Attempt ${i + 1} failed:`, error.message);
          
          // Fast retry strategy - minimal delay untuk loading cepat
          if (i < urlsToTry.length - 1) {
            const isNetworkError = error.message.includes('NetworkError') || error.message.includes('CORS');
            const delay = isNetworkError ? 50 : 10; // Ultra fast delays for instant loading
            
            console.log(`‚è≥ Quick retry in ${delay}ms...`);
            await new Promise(resolve => setTimeout(resolve, delay));
          }
        }
      }
      
      // Jika semua URL gagal, tampilkan error dengan opsi fallback - NO MOCK DATA
      if (!jadwal) {
        console.error('‚ùå Cannot connect to Google Sheets API. Last error:', lastError);
        
        // Force retry dengan delay lebih lama untuk data asli
        showLoader(false);
        
        showError(`
          <div style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 48px; margin-bottom: 20px;">ÔøΩ</div>
            <h2 style="color: #dc3545; margin-bottom: 15px;">Loading Real Data from Google Sheets...</h2>
            <p style="margin-bottom: 20px; line-height: 1.5;">
              Trying to get 100% real data from your Google Sheets.<br>
              <strong>No mock/skeleton data will be shown.</strong>
            </p>
            
            <div style="text-align: left; margin: 20px auto; max-width: 500px;">
              <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                <strong>ÔøΩ Status:</strong> All ${FALLBACK_URLS.length} proxy methods tried<br>
                <strong>üìã Target:</strong> Google Apps Script API<br>
                <strong>üéØ Sport:</strong> ${sport.toUpperCase()}
              </div>
            </div>
            
            <div style="margin-top: 25px;">
              <button onclick="location.reload()" style="
                background: #007bff; 
                color: white; 
                border: none; 
                padding: 12px 24px; 
                border-radius: 8px; 
                cursor: pointer;
                font-size: 14px;
                margin: 5px;
              ">üîÑ Try Again</button>
              <button onclick="retryWithExtendedTimeout('${sport}')" style="
                background: #28a745; 
                color: white; 
                border: none; 
                padding: 12px 24px; 
                border-radius: 8px; 
                cursor: pointer;
                font-size: 14px;
                margin: 5px;
              ">‚è±Ô∏è Retry with Longer Timeout</button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,123,255,0.1); border-radius: 8px; border-left: 4px solid #007bff;">
              <strong>üí° Working on it:</strong><br>
              The app is configured to show ONLY real data from your Google Sheets.<br>
              No dummy/mock data will be displayed.
            </div>
            
            <div style="margin-top: 15px; font-size: 12px; color: #666;">
              Last Error: ${lastError?.message || 'Unknown error'}<br>
              Proxy attempts: ${FALLBACK_URLS.length} different methods tested
            </div>
          </div>
        `);
        currentLoadingState = LoadingState.ERROR;
        return;
      }
      
      try {
        // Cek jika ada error dari server
        if (jadwal.error) {
          console.error('‚ùå Server error:', jadwal.error);
          showError(`
            <div>‚ùå Server error: ${jadwal.error}</div>
            <div style="font-size: 12px; margin-top: 10px; color: #666;">
              Available sheets: ${jadwal.availableSheets?.join(', ') || 'Unknown'}<br>
              <button onclick="fetchAndRenderLeagues('${sport}')" style="margin-top: 10px; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                üîÑ Coba Lagi
              </button>
            </div>
          `);
          return;
        }
        
        // Data sudah dalam format ligaMap dari Google Apps Script
        // Format: { "Liga Name": [ {match1}, {match2}, ... ] }
        const ligaMap = jadwal;
        
        console.log('‚úÖ Leagues found:', Object.keys(ligaMap).length);
        console.log('üìã League names:', Object.keys(ligaMap));
        
        // Debug: Show sample data from first league
        const firstLeague = Object.keys(ligaMap)[0];
        if (firstLeague && ligaMap[firstLeague] && ligaMap[firstLeague].length > 0) {
          console.log('üîç Sample match from', firstLeague, ':', ligaMap[firstLeague][0]);
          
          // Analisis struktur field dalam match
          const sampleMatch = ligaMap[firstLeague][0];
          console.log('üîç Match fields available:', Object.keys(sampleMatch));
          
          // Check for different field variations
          const dateField = sampleMatch.tanggal || sampleMatch.date || sampleMatch.tgl;
          const timeField = sampleMatch.jam || sampleMatch.time || sampleMatch.waktu;
          const homeField = sampleMatch.home || sampleMatch.tima || sampleMatch.timhome || sampleMatch.team1;
          const awayField = sampleMatch.away || sampleMatch.timb || sampleMatch.timaway || sampleMatch.team2;
          
          console.log('üîç Date field value:', dateField);
          console.log('üîç Time field value:', timeField);
          console.log('üîç Home team field:', homeField);
          console.log('üîç Away team field:', awayField);
          
          // Debug score fields specifically
          const scoreAField = sampleMatch.scorea || sampleMatch.score1 || sampleMatch.homescore;
          const scoreBField = sampleMatch.scoreb || sampleMatch.score2 || sampleMatch.awayscore;
          console.log('üéØ Score A field (home):', scoreAField, '- Available fields:', {
            scorea: sampleMatch.scorea,
            score1: sampleMatch.score1,
            homescore: sampleMatch.homescore
          });
          console.log('üéØ Score B field (away):', scoreBField, '- Available fields:', {
            scoreb: sampleMatch.scoreb,
            score2: sampleMatch.score2,
            awayscore: sampleMatch.awayscore
          });
          console.log('üéØ All available score-related fields in match:', Object.keys(sampleMatch).filter(key => key.toLowerCase().includes('score')));
          
          // Validate that essential fields exist
          if (!dateField || !timeField || !homeField || !awayField) {
            console.warn('‚ö†Ô∏è Missing essential fields in sample match:', {
              hasDate: !!dateField,
              hasTime: !!timeField,
              hasHome: !!homeField,
              hasAway: !!awayField
            });
          }
        }
        
        // Hitung total matches
        let totalMatches = 0;
        Object.values(ligaMap).forEach(matches => {
          totalMatches += matches.length;
        });
        console.log('üìä Total matches:', totalMatches);
        
        // Jika tidak ada data, tampilkan pesan dengan tombol retry
        if (totalMatches === 0) {
          console.log('‚ö†Ô∏è No matches found for sport:', sport);
          
          // Mapping sheet names untuk referensi
          const sheetMapping = {
            'bola': 'SEPAKBOLA',
            'basket': 'JADWALBASKET', 
            'tennis': 'JADWALTENNIS',
            'voli': 'JADWALVOLI',
            'badminton': 'JADWALBADMINTON',
            'baseball': 'JADWAL BASEBALL',
            'esport': 'JADWALESPORTS'
          };
          
          showError(`
            <div>‚ö†Ô∏è Tidak ada data pertandingan untuk ${sport}</div>
            <div style="font-size: 12px; margin-top: 10px; color: #666;">
              Sheet yang dicari: "${sheetMapping[sport] || 'UNKNOWN'}"<br>
              <button onclick="fetchAndRenderLeagues('${sport}')" style="margin-top: 10px; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                üîÑ Coba Lagi
              </button>
            </div>
          `);
          return;
        }
        
        // Sort jadwal per liga by tanggal & jam
        Object.values(ligaMap).forEach(arr => {
          arr.sort((a, b) => {
            let tglA = (a.tanggal || '').replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
            let tglB = (b.tanggal || '').replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
            let dateA = new Date(tglA + ' ' + (a.jam || ''));
            let dateB = new Date(tglB + ' ' + (b.jam || ''));
            return dateA - dateB;
          });
        });

        // Store current sport data untuk filtering
        currentSportData = ligaMap;
        
        // Render data dengan animasi smooth
        renderLeagues(ligaMap, sport);
        
        // Store data in cache untuk sport ini
        allMatchesData[sport] = ligaMap;
        currentSportData = ligaMap; // Update current data
        isDataLoading = false; // Data selesai loading
        
        // üíæ Save to localStorage for persistent cache
        saveCachedData();
        
        // Setup filter and search immediately for faster UI response
        console.log('üéØ Setting up filters and search immediately');
        setupFilterAndSearch();
        
        // Apply pending filter if any
        if (pendingFilter) {
          console.log('‚ö° Applying pending filter from fresh data loading');
          applyPendingFilter();
        } else {
          // Jika ada tanggal aktif, filter ke tanggal tersebut
          if (currentActiveDate) {
            filterBySpecificDate(currentActiveDate);
          } else {
            applyFilters();
          }
        }
        
        // Auto-show relevant data tanpa delay
        autoDisplayRelevantData(ligaMap);
        
        // Show enhanced success notification dengan info metode koneksi
        const successMethod = window.lastSuccessfulMethod || 'Google Apps Script';
        const attemptInfo = window.lastSuccessfulAttempt ? ` (Attempt ${window.lastSuccessfulAttempt})` : '';
        const loadTime = Date.now() - loadingStartTime;
        showTemporaryNotification(`üöÄ DATA DIMUAT! Berhasil dalam ${loadTime}ms via ${successMethod}${attemptInfo}!`, 'success');
        currentLoadingState = LoadingState.CACHED;
        
        // üöÄ TRIGGER PRELOADING - Load other sports in background for instant switching
        setTimeout(() => {
          preloadAllSportsData();
        }, 1000); // Start preloading after 1 second
        
      } catch (error) {
        console.error('‚ùå Error processing data:', error);
        showError(`
          <div>‚ùå Error memproses data: ${error.message}</div>
          <div style="font-size: 12px; margin-top: 10px; color: #666;">
            <button onclick="fetchAndRenderLeagues('${sport}')" style="margin-top: 10px; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
              üîÑ Coba Lagi
            </button>
          </div>
        `);
      }
    }
    
    // Fungsi untuk menampilkan data yang relevan secara otomatis
    function autoDisplayRelevantData(ligaMap) {
      console.log('üéØ Auto-displaying relevant data...');
      
      const today = getTodayFormatted();
      const tomorrow = getTomorrowFormatted();
      
      // Cek apakah ada pertandingan hari ini
      let todayMatches = 0;
      Object.values(ligaMap).forEach(matches => {
        matches.forEach(match => {
          const matchDate = match.tanggal || match.date || match.tgl || '';
          if (matchDate === today) {
            todayMatches++;
          }
        });
      });
      
      console.log(`üìÖ Pertandingan hari ini: ${todayMatches}`);
      
      // Tampilkan notifikasi informatif saja, tidak auto-filter
      if (todayMatches > 0) {
        showTemporaryNotification(`üìÖ Ada ${todayMatches} pertandingan hari ini. Gunakan filter "Hari Ini" untuk melihatnya.`, 'info');
      } else {
        // Cek besok
        let tomorrowMatches = 0;
        Object.values(ligaMap).forEach(matches => {
          matches.forEach(match => {
            const matchDate = match.tanggal || match.date || match.tgl || '';
            if (matchDate === tomorrow) {
              tomorrowMatches++;
            }
          });
        });
        
        console.log(`üìÖ Pertandingan besok: ${tomorrowMatches}`);
        
        if (tomorrowMatches > 0) {
          showTemporaryNotification(`üìÖ Ada ${tomorrowMatches} pertandingan besok. Gunakan filter "Besok" untuk melihatnya.`, 'info');
        } else {
          showTemporaryNotification('üìÖ Menampilkan semua pertandingan yang tersedia', 'info');
        }
      }
    }
    
    // Fungsi untuk menampilkan notifikasi sementara
    function showTemporaryNotification(message, type = 'info') {
      // Hapus notifikasi sebelumnya jika ada
      const existingNotification = document.querySelector('.temp-notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      // Buat notifikasi baru
      const notification = document.createElement('div');
      notification.className = `temp-notification ${type}`;
      notification.innerHTML = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        z-index: 10000;
        max-width: 300px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateX(100%);
        transition: transform 0.3s ease;
        ${type === 'success' ? 'background: #28a745;' : ''}
        ${type === 'error' ? 'background: #dc3545;' : ''}
        ${type === 'info' ? 'background: #17a2b8;' : ''}
        ${type === 'warning' ? 'background: #ffc107; color: #212529;' : ''}
      `;
      
      document.body.appendChild(notification);
      
      // Animasi masuk
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Auto-hide setelah 3 detik
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 300);
      }, 3000);
    }

    // Update match timers dengan logika waktu yang benar
    function updateMatchTimers() {
      setInterval(() => {
        console.log('üîÑ Updating match timers...');
        const matchRows = document.querySelectorAll('.match-row');
        matchRows.forEach(row => {
          const timeElement = row.querySelector('.match-time div:nth-child(2)');
          const dateElement = row.querySelector('.match-time div:first-child');
          if (!timeElement || !dateElement) return;
          
          const timeText = timeElement.textContent.replace(/[^0-9:]/g, '').trim();
          const dateText = dateElement.textContent.trim();
          
          // Skip jika waktu tidak valid
          if (!timeText.includes(':')) return;
          
          const matchStatus = getMatchStatus(timeText, { tanggal: dateText });
          
          // Update status
          let statusElement = row.querySelector('.match-status');
          if (statusElement) {
            statusElement.className = `match-status ${matchStatus.statusClass}`;
            statusElement.textContent = matchStatus.statusText;
          }
          
          // Update live indicator
          let liveIndicator = row.querySelector('.live-indicator');
          if (matchStatus.isLive && !liveIndicator) {
            liveIndicator = document.createElement('div');
            liveIndicator.className = 'live-indicator';
            timeElement.style.position = 'relative';
            timeElement.appendChild(liveIndicator);
          } else if (!matchStatus.isLive && liveIndicator) {
            liveIndicator.remove();
          }
          
          // Update countdown
          let countdownElement = row.querySelector('.match-countdown');
          if (matchStatus.countdown) {
            if (!countdownElement) {
              countdownElement = document.createElement('div');
              countdownElement.className = 'match-countdown';
              statusElement.parentNode.appendChild(countdownElement);
            }
            countdownElement.textContent = matchStatus.countdown;
          } else if (countdownElement) {
            countdownElement.remove();
          }
        });
      }, 30000); // Update setiap 30 detik untuk akurasi lebih baik
    }

    // Setup filter and search functionality
    function setupFilterAndSearch() {
      console.log('üöÄ SETUP FILTER START');
      
      const searchInput = document.getElementById('search-input');
      const dateSelect = document.getElementById('date-select');
      const clearBtn = document.getElementById('clear-search');
      
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          searchQuery = this.value.toLowerCase();
          clearBtn.classList.toggle('show', searchQuery.length > 0);
          applyFilters();
        });
      }
      
      if (dateSelect) {
        dateSelect.addEventListener('change', function() {
          selectedDate = this.value;
          // Jangan re-render, hanya apply filter untuk menyembunyikan/menampilkan
          applyFilters();
        });
      }
      
      if (clearBtn) {
        clearBtn.addEventListener('click', function() {
          searchInput.value = '';
          searchQuery = '';
          clearBtn.classList.remove('show');
          applyFilters();
        });
      }
      
      // Filter buttons - MENGGUNAKAN FORMAT STRING YANG KONSISTEN
      const filterButtons = document.querySelectorAll('.quick-filter-btn');
      console.log('üîß Found filter buttons:', filterButtons.length);
      
      filterButtons.forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          const filterType = this.dataset.filter;
          console.log('üéØ Filter clicked:', filterType);
          
          // Update filter
          currentFilter = filterType;
          
          // Update button states
          document.querySelectorAll('.quick-filter-btn').forEach(function(b) {
            b.classList.remove('active');
          });
          this.classList.add('active');
          
          // Apply filter dengan format tanggal yang KONSISTEN DD/MM/YYYY
          if (filterType === 'live') {
            console.log("üî¥ FILTERING LIVE MATCHES");
            filterLiveMatches();
          } else if (filterType === 'today') {
            const hariIniFormatted = getTodayFormatted();
            console.log("üéØ FILTERING HARI INI:", hariIniFormatted);
            filterBySpecificDate(hariIniFormatted);
          } else if (filterType === 'tomorrow') {
            const besokFormatted = getTomorrowFormatted();
            console.log("üéØ FILTERING BESOK:", besokFormatted);
            filterBySpecificDate(besokFormatted);
          } else if (filterType === 'week') {
            // Filter minggu ini dengan fungsi khusus
            filterWeeklyMatches();
          } else if (filterType === 'all') {
            // Reset filter dan tampilkan semua
            console.log("üéØ RESETTING TO SHOW ALL DATA");
            selectedDate = 'all';
            currentActiveDate = null;
            currentFilter = 'all';
            
            // Update date select dropdown
            const dateSelect = document.getElementById('date-select');
            if (dateSelect) {
              dateSelect.value = 'all';
            }
            
            // Reset date navigator
            const currentDateDisplay = document.getElementById('currentDateDisplay');
            if (currentDateDisplay) {
              currentDateDisplay.classList.remove('active');
            }
            
            // Clear quick date button states
            document.querySelectorAll('.quick-date-btn').forEach(btn => {
              btn.classList.remove('active');
            });
            
            // Re-render all data
            if (currentSportData) {
              renderLeagues(currentSportData, window.currentSport);
              showTemporaryNotification('üìã Menampilkan semua pertandingan', 'info');
            } else {
              applyFilters();
            }
          } else {
            applyFilters();
          }
        });
        
        // No initial active state - show all by default
      });
      
      console.log('‚úÖ Filter setup complete');
      
      // Setup Flashscore-style Date Navigator
      setupDateNavigator();
    }
    
    // Filter by specific date (like Flashscore) dengan data filtering yang tepat
    function filterBySpecificDate(targetDate) {
      console.log('üéØ FILTERING BY SPECIFIC DATE:', targetDate);
      
      // Set current active date
      currentActiveDate = targetDate;
      
      // Update date select dropdown to match
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = targetDate;
        selectedDate = targetDate;
      }
      
      // Jika tidak ada data sport saat ini, return
      if (!currentSportData) {
        console.log('‚ùå No current sport data available');
        showNoMatchesMessage(targetDate);
        return;
      }
      
      // Filter data berdasarkan tanggal dengan string comparison
      const filteredData = {};
      let totalMatches = 0;
      let debugCount = 0;
      
      Object.entries(currentSportData).forEach(([league, matches]) => {
        const filteredMatches = matches.filter(match => {
          // Support multiple date field formats
          const rowTanggal = match.tanggal || match.date || match.tgl || '';
          const isMatch = rowTanggal === targetDate; // Perbandingan string langsung
          
          // Debug logging untuk verifikasi perbandingan
          if (debugCount < 3) {
            console.log(`üîç Date comparison: "${rowTanggal}" === "${targetDate}" = ${isMatch}`);
            debugCount++;
          }
          
          return isMatch;
        });
        
        if (filteredMatches.length > 0) {
          filteredData[league] = filteredMatches;
          totalMatches += filteredMatches.length;
        }
      });
      
      console.log(`üìä Found ${totalMatches} matches for ${targetDate}`);
      
      // Render filtered data atau tampilkan pesan tidak ada data
      if (totalMatches > 0) {
        renderFilteredLeagues(filteredData, window.currentSport);
        showTemporaryNotification(`üìÖ Menampilkan ${totalMatches} pertandingan tanggal ${targetDate}`, 'success');
      } else {
        showNoMatchesMessage(targetDate);
        showTemporaryNotification(`üìÖ Tidak ada pertandingan di tanggal ${targetDate}`, 'warning');
      }
    }
    
    // Reset Date Navigator ke hari ini ketika pindah sport
    function resetDateNavigatorToToday() {
      console.log('üîÑ Resetting date navigator to today...');
      
      // Reset global variables
      currentActiveDate = null;
      selectedDate = 'all';
      
      // Reset date select dropdown
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = 'all';
      }
      
      // Reset date navigator display ke hari ini
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      if (currentDateDisplay) {
        const today = new Date();
        const todayFormatted = formatDateToDDMMYYYY(today);
        currentDateDisplay.textContent = todayFormatted;
        currentDateDisplay.classList.remove('active');
      }
      
      // Reset quick date buttons
      document.querySelectorAll('.quick-date-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      console.log('‚úÖ Date navigator reset to today');
    }
    
    // Setup Date Navigator functionality
    function setupDateNavigator() {
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      const prevDateNav = document.getElementById('prevDateNav');
      const nextDateNav = document.getElementById('nextDateNav');
      const quickDateBtns = document.querySelectorAll('.quick-date-btn');
      
      // Current date tracking
      let currentViewDate = new Date();
      let navigationMode = 'center'; // 'center' atau 'quick'
      
      // Function to clear all active states
      function clearAllActiveStates() {
        if (currentDateDisplay) {
          currentDateDisplay.classList.remove('active');
        }
        quickDateBtns.forEach(btn => btn.classList.remove('active'));
      }
      
      // Function to set center navigation as active
      function activateCenterNavigation() {
        clearAllActiveStates();
        if (currentDateDisplay) {
          currentDateDisplay.classList.add('active');
        }
        navigationMode = 'center';
      }
      
      // Function to set quick button as active
      function activateQuickButton(activeBtn) {
        clearAllActiveStates();
        activeBtn.classList.add('active');
        navigationMode = 'quick';
      }
      
      // Prevent double-click selection on buttons
      function preventDoubleClick(element) {
        element.style.userSelect = 'none';
        element.style.webkitUserSelect = 'none';
        element.style.msUserSelect = 'none';
        element.style.webkitTouchCallout = 'none';
        element.style.webkitTapHighlightColor = 'transparent';
        
        element.addEventListener('selectstart', (e) => e.preventDefault());
        element.addEventListener('dragstart', (e) => e.preventDefault());
      }
      
      // Update date display dengan format DD/MM/YYYY yang konsisten
      function updateDateDisplay() {
        const formatted = formatDateToDDMMYYYY(currentViewDate);
        if (currentDateDisplay) {
          currentDateDisplay.textContent = formatted;
        }
        
        console.log("üéØ Date Navigator Filter:", formatted);
        
        // Update current filter state
        currentFilter = 'date-navigator';
        selectedDate = formatted;
        
        // Update quick filter button states
        document.querySelectorAll('.quick-filter-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        
        // Apply filter for this specific date
        filterBySpecificDate(formatted);
      }
      
      // Previous date
      if (prevDateNav) {
        preventDoubleClick(prevDateNav);
        prevDateNav.addEventListener('click', (e) => {
          e.preventDefault();
          currentViewDate.setDate(currentViewDate.getDate() - 1);
          updateDateDisplay();
          activateCenterNavigation();
        });
      }
      
      // Next date  
      if (nextDateNav) {
        preventDoubleClick(nextDateNav);
        nextDateNav.addEventListener('click', (e) => {
          e.preventDefault();
          currentViewDate.setDate(currentViewDate.getDate() + 1);
          updateDateDisplay();
          activateCenterNavigation();
        });
      }

      // Click pada center date display untuk mengaktifkannya
      if (currentDateDisplay) {
        preventDoubleClick(currentDateDisplay);
        currentDateDisplay.addEventListener('click', (e) => {
          e.preventDefault();
          activateCenterNavigation();
        });
      }
      
      // Quick date buttons
      quickDateBtns.forEach(btn => {
        preventDoubleClick(btn);
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const offset = parseInt(btn.dataset.offset);
          const today = new Date();
          currentViewDate = new Date(today);
          currentViewDate.setDate(today.getDate() + offset);
          
          updateDateDisplay();
          activateQuickButton(btn);
        });
      });
      
      // Initialize - set center navigation as active by default
      updateDateDisplay();
      activateCenterNavigation();
    }
    
    // Filter untuk menampilkan hanya pertandingan LIVE (untuk semua olahraga)
    function filterLiveMatches() {
      console.log('üî¥ FILTERING LIVE MATCHES FOR ALL SPORTS');
      
      // Set current filter state
      currentFilter = 'live';
      selectedDate = 'all'; // Reset date filter
      currentActiveDate = null;
      
      // Update date select dropdown
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = 'all';
      }
      
      // Reset date navigator
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      if (currentDateDisplay) {
        currentDateDisplay.classList.remove('active');
      }
      
      // Clear quick date button states
      document.querySelectorAll('.quick-date-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Jika tidak ada data sport saat ini, return
      if (!currentSportData) {
        console.log('‚ùå No current sport data available');
        showNoLiveMatchesMessage();
        return;
      }
      
      // Filter data berdasarkan status LIVE dengan SEMUA kriteria olahraga
      const liveMatches = {};
      let totalLiveMatches = 0;
      
      Object.entries(currentSportData).forEach(([league, matches]) => {
        const liveMatchesInLeague = matches.filter(match => {
          // Support multiple field formats untuk berbagai olahraga
          const matchTime = match.jam || match.time || match.waktu || '';
          const matchDate = match.tanggal || match.date || match.tgl || '';
          
          // Skip jika data tidak lengkap
          if (!matchTime || !matchDate) {
            return false;
          }
          
          // Gunakan fungsi getMatchStatus yang sudah ada untuk deteksi LIVE
          const matchStatus = getMatchStatus(matchTime, { tanggal: matchDate, ...match });
          
          // Debug logging untuk verifikasi
          if (matchStatus.isLive) {
            console.log(`üî¥ LIVE MATCH FOUND: ${match.home || match.tima || match.team1} vs ${match.away || match.timb || match.team2} at ${matchTime} on ${matchDate}`);
          }
          
          return matchStatus.isLive;
        });
        
        if (liveMatchesInLeague.length > 0) {
          liveMatches[league] = liveMatchesInLeague;
          totalLiveMatches += liveMatchesInLeague.length;
        }
      });
      
      console.log(`üî¥ Found ${totalLiveMatches} LIVE matches across all leagues`);
      
      // Render LIVE matches atau tampilkan pesan tidak ada pertandingan LIVE
      if (totalLiveMatches > 0) {
        renderLiveMatches(liveMatches, window.currentSport);
        showTemporaryNotification(`üî¥ Menampilkan ${totalLiveMatches} pertandingan LIVE`, 'success');
      } else {
        showNoLiveMatchesMessage();
        showTemporaryNotification('üî¥ Tidak ada pertandingan LIVE saat ini', 'warning');
      }
    }
    
    // Render LIVE matches dengan styling khusus
    function renderLiveMatches(liveMatches, sportKey) {
      const main = document.getElementById('main-content');
      if (!main) return;
      
      main.innerHTML = '';
      
      // Tambahkan header khusus untuk LIVE matches
      const liveHeader = document.createElement('div');
      liveHeader.className = 'live-section-header';
      liveHeader.innerHTML = `
        <span style="font-size: 16px;">üî¥ PERTANDINGAN LIVE</span>
        <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">
          ${Object.values(liveMatches).reduce((total, matches) => total + matches.length, 0)} pertandingan sedang berlangsung
        </div>
      `;
      main.appendChild(liveHeader);
      
      Object.entries(liveMatches).forEach(([league, matches], idx) => {
        // Accordion dengan styling khusus untuk LIVE
        const accordion = document.createElement('div');
        accordion.className = 'accordion expanded'; // Expand all LIVE matches by default

        // Header dengan indikator LIVE
        const header = document.createElement('div');
        header.className = 'accordion-header';
        header.style.borderLeft = '4px solid #ff0000';
        header.style.background = 'linear-gradient(90deg, rgba(255, 0, 0, 0.05), transparent)';
        header.innerHTML = `
          <span class="accordion-title">
            <span class="league-icon">${getLigaIcon(league)}</span>
            ${escapeHTML(league)}
            <span class="live-badge" style="margin-left: 10px;">üî¥ LIVE</span>
          </span>
          <span class="accordion-arrow">‚ñº</span>
        `;
        
        header.onclick = () => {
          const wasExpanded = accordion.classList.contains('expanded');
          
          // Toggle current accordion
          if (wasExpanded) {
            accordion.classList.remove('expanded');
            header.querySelector('.accordion-arrow').textContent = '‚ñ∂';
          } else {
            accordion.classList.add('expanded');
            header.querySelector('.accordion-arrow').textContent = '‚ñº';
          }
        };

        // Content
        const content = document.createElement('div');
        content.className = 'accordion-content';

        // Create LIVE match rows dengan styling khusus
        matches.forEach(match => {
          const matchRow = document.createElement('div');
          matchRow.className = 'match-row live-match'; // Tambahkan class live-match
          
          // Mapping field yang konsisten untuk berbagai format data dan olahraga
          const homeTeam = match.home || match.tima || match.timhome || match.team1 || match.player1 || '';
          const awayTeam = match.away || match.timb || match.timaway || match.team2 || match.player2 || '';
          const matchTime = match.jam || match.time || match.waktu || '';
          const matchDate = match.tanggal || match.date || match.tgl || '';
          
          // Enhanced score mapping with more field variations and proper 0 handling
          const homeScoreRaw = getFirstValidField(match.scorea, match.score1, match.homescore, match.skor_home, match.skor1, match.skorhome, match.home_score, match.scoreHome);
          const awayScoreRaw = getFirstValidField(match.scoreb, match.score2, match.awayscore, match.skor_away, match.skor2, match.skoraway, match.away_score, match.scoreAway);
          
          const homeScore = getScore(homeScoreRaw);
          const awayScore = getScore(awayScoreRaw);
          
          const betLink = match.linkbet || match.link || match.bet || '#';
          
          // Validate data - skip if essential fields are missing
          if (!homeTeam || !awayTeam || !matchTime || !matchDate) {
            console.warn('‚ö†Ô∏è Skipping LIVE match with missing data:', match);
            return;
          }
          
          // Determine appropriate labels based on sport type
          let homeLabel = 'HOME';
          let awayLabel = 'AWAY';
          
          if (sportKey === 'tennis' || sportKey === 'badminton') {
            homeLabel = 'PLAYER 1';
            awayLabel = 'PLAYER 2';
          } else if (sportKey === 'esport') {
            homeLabel = 'TEAM 1';
            awayLabel = 'TEAM 2';
          } else if (sportKey === 'basket') {
            homeLabel = 'HOME';
            awayLabel = 'AWAY';
          } else if (sportKey === 'voli') {
            homeLabel = 'HOME';
            awayLabel = 'AWAY';
          } else if (sportKey === 'baseball') {
            homeLabel = 'HOME';
            awayLabel = 'AWAY';
          }
          
          // Generate LIVE match status dengan durasi elapsed
          const matchStatus = getMatchStatus(matchTime, { tanggal: matchDate, ...match });
          
          // Disable bet button for finished matches (safety check)
          const betButtonClass = matchStatus.statusClass === 'finished' ? 'bet-link disabled' : 'bet-link';
          const betButtonHref = matchStatus.statusClass === 'finished' ? '#' : escapeHTML(betLink);
          const betButtonOnClick = matchStatus.statusClass === 'finished' ? 'onclick="return false;"' : '';
          
          matchRow.innerHTML = `
            <div class="match-time">
              <div style="font-weight: bold; color: #ff0000;">${escapeHTML(matchDate)}</div>
              <div style="font-weight: bold; position: relative;">
                ${escapeHTML(matchTime)} WIB
                <div class="live-indicator"></div>
              </div>
              <div class="match-status live">üî¥ LIVE</div>
              ${matchStatus.countdown ? `<div class="match-countdown">${matchStatus.countdown}</div>` : ''}
            </div>
            <div class="match-teams">
              <div class="team-row">
                <span class="team-label">${homeLabel}</span>
                <span class="team-name" style="font-weight: bold;">${escapeHTML(homeTeam)}</span>
                <span class="team-score live-score" style="color: #ff0000; font-weight: bold;">${escapeHTML(homeScore)}</span>
              </div>
              <div class="team-row">
                <span class="team-label">${awayLabel}</span>
                <span class="team-name" style="font-weight: bold;">${escapeHTML(awayTeam)}</span>
                <span class="team-score live-score" style="color: #ff0000; font-weight: bold;">${escapeHTML(awayScore)}</span>
              </div>
            </div>
            <div class="match-bet">
              <a href="${betButtonHref}" target="_blank" class="${betButtonClass}" ${betButtonOnClick}>
                ${matchStatus.statusClass === 'finished' ? 'üèÅ FINISHED' : 'üéØ BET'}
              </a>
            </div>
          `;
          
          content.appendChild(matchRow);
        });

        accordion.appendChild(header);
        accordion.appendChild(content);
        main.appendChild(accordion);
      });
    }
    
    // Show message when no LIVE matches found
    function showNoLiveMatchesMessage() {
      const main = document.getElementById('main-content');
      if (main) {
        // Cek waktu saat ini untuk memberikan saran yang relevan
        const now = new Date();
        const currentHour = now.getHours();
        
        let suggestion = '';
        if (currentHour >= 0 && currentHour < 6) {
          suggestion = 'Biasanya pertandingan dimulai pada siang atau malam hari.';
        } else if (currentHour >= 6 && currentHour < 12) {
          suggestion = 'Coba cek lagi pada sore atau malam hari untuk pertandingan Eropa dan Amerika.';
        } else if (currentHour >= 12 && currentHour < 18) {
          suggestion = 'Pertandingan Eropa biasanya dimulai sore-malam waktu Indonesia.';
        } else {
          suggestion = 'Ini adalah waktu prime time untuk pertandingan Eropa!';
        }
        
        main.innerHTML = `
          <div class="live-section-header">
            <span style="font-size: 16px;">üî¥ PERTANDINGAN LIVE</span>
          </div>
          <div class="error-container" style="
            border: 1px solid rgba(255, 0, 0, 0.3);
            background: rgba(255, 0, 0, 0.05);
            text-align: center;
            padding: 30px 20px;
            margin: 20px 0;
            border-radius: 12px;
          ">
            <div style="font-size: 48px; margin-bottom: 15px;">‚è∞</div>
            <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #ff0000;">
              Tidak Ada Pertandingan LIVE Saat Ini
            </div>
            <div style="color: #666; margin-bottom: 15px;">
              ${suggestion}
            </div>
            <div style="font-size: 12px; color: #999; margin-bottom: 20px;">
              Waktu saat ini: ${now.toLocaleString('id-ID')} WIB
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
              <button onclick="applyFilters(); currentFilter='today'; document.querySelector('[data-filter=today]').click();" 
                style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                üìÖ Lihat Hari Ini
              </button>
              <button onclick="applyFilters(); currentFilter='tomorrow'; document.querySelector('[data-filter=tomorrow]').click();" 
                style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                üåÖ Lihat Besok
              </button>
              <button onclick="resetAllFilters()" 
                style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                üìã Lihat Semua
              </button>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.05); border-radius: 8px; border-left: 4px solid #007bff;">
              <div style="font-weight: bold; margin-bottom: 5px;">üí° Tips:</div>
              <div style="font-size: 13px; color: #666;">
                ‚Ä¢ Pertandingan akan otomatis muncul di filter LIVE ketika sudah dimulai<br>
                ‚Ä¢ Status LIVE dihitung berdasarkan waktu real-time Indonesia (WIB)<br>
                ‚Ä¢ Filter akan diperbarui otomatis setiap 30 detik
              </div>
            </div>
          </div>
        `;
      }
    }
    
    // Filter untuk menampilkan pertandingan minggu ini
    function filterWeeklyMatches() {
      console.log('üìÖ FILTERING WEEKLY MATCHES');
      
      // Set current filter state
      currentFilter = 'week';
      selectedDate = 'all'; // Reset date filter
      currentActiveDate = null;
      
      // Update date select dropdown
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = 'all';
      }
      
      // Reset date navigator
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      if (currentDateDisplay) {
        currentDateDisplay.classList.remove('active');
      }
      
      // Clear quick date button states
      document.querySelectorAll('.quick-date-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Jika tidak ada data sport saat ini, return
      if (!currentSportData) {
        console.log('‚ùå No current sport data available');
        showNoMatchesMessage('Data tidak tersedia untuk minggu ini');
        return;
      }
      
      // Calculate this week range (Sunday to Saturday)
      const today = new Date();
      const weekStart = new Date(today);
      weekStart.setDate(today.getDate() - today.getDay()); // Start of week (Sunday)
      const weekEnd = new Date(weekStart);
      weekEnd.setDate(weekStart.getDate() + 6); // End of week (Saturday)
      
      console.log('üìÖ Week range:', {
        start: formatDateToDDMMYYYY(weekStart),
        end: formatDateToDDMMYYYY(weekEnd)
      });
      
      // Filter data berdasarkan range minggu ini
      const weeklyMatches = {};
      let totalWeeklyMatches = 0;
      
      Object.entries(currentSportData).forEach(([league, matches]) => {
        const weeklyMatchesInLeague = matches.filter(match => {
          // Support multiple field formats
          const matchDate = match.tanggal || match.date || match.tgl || '';
          
          // Skip jika data tidak lengkap
          if (!matchDate) {
            return false;
          }
          
          try {
            // Parse DD/MM/YYYY format
            const dateParts = matchDate.split('/');
            if (dateParts.length !== 3) return false;
            
            const matchDay = parseInt(dateParts[0]);
            const matchMonth = parseInt(dateParts[1]) - 1; // Month is 0-indexed
            const matchYear = parseInt(dateParts[2]);
            
            const matchDateObj = new Date(matchYear, matchMonth, matchDay);
            
            // Check if match date is within this week
            const isInWeek = matchDateObj >= weekStart && matchDateObj <= weekEnd;
            
            return isInWeek;
          } catch (error) {
            console.warn('Error parsing date:', matchDate, error);
            return false;
          }
        });
        
        if (weeklyMatchesInLeague.length > 0) {
          weeklyMatches[league] = weeklyMatchesInLeague;
          totalWeeklyMatches += weeklyMatchesInLeague.length;
        }
      });
      
      console.log(`üìÖ Found ${totalWeeklyMatches} matches for this week`);
      
      // Render weekly matches atau tampilkan pesan tidak ada pertandingan
      if (totalWeeklyMatches > 0) {
        renderWeeklyMatches(weeklyMatches, window.currentSport);
        showTemporaryNotification(`üìÖ Menampilkan ${totalWeeklyMatches} pertandingan minggu ini`, 'success');
      } else {
        showNoWeeklyMatchesMessage();
        showTemporaryNotification('üìÖ Tidak ada pertandingan minggu ini', 'warning');
      }
    }
    
    // Render weekly matches dengan styling khusus
    function renderWeeklyMatches(weeklyMatches, sportKey) {
      const main = document.getElementById('main-content');
      if (!main) return;
      
      main.innerHTML = '';
      
      // Tambahkan header khusus untuk weekly matches
      const weeklyHeader = document.createElement('div');
      weeklyHeader.className = 'weekly-section-header';
      weeklyHeader.innerHTML = `
        <span style="font-size: 16px;">üìÖ PERTANDINGAN MINGGU INI</span>
        <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">
          ${Object.values(weeklyMatches).reduce((total, matches) => total + matches.length, 0)} pertandingan dalam 7 hari ini
        </div>
      `;
      main.appendChild(weeklyHeader);
      
      Object.entries(weeklyMatches).forEach(([league, matches], idx) => {
        // Accordion dengan styling khusus untuk weekly
        const accordion = document.createElement('div');
        accordion.className = 'accordion expanded'; // Expand all weekly matches by default

        // Header dengan indikator weekly
        const header = document.createElement('div');
        header.className = 'accordion-header';
        header.style.borderLeft = '4px solid #007bff';
        header.style.background = 'linear-gradient(90deg, rgba(0, 123, 255, 0.05), transparent)';
        header.innerHTML = `
          <span class="accordion-title">
            <span class="league-icon">${getLigaIcon(league)}</span>
            ${escapeHTML(league)}
            <span class="weekly-badge" style="margin-left: 10px;">üìÖ MINGGU INI</span>
          </span>
          <span class="accordion-arrow">‚ñº</span>
        `;
        
        header.onclick = () => {
          const wasExpanded = accordion.classList.contains('expanded');
          
          // Toggle current accordion
          if (wasExpanded) {
            accordion.classList.remove('expanded');
            header.querySelector('.accordion-arrow').textContent = '‚ñ∂';
          } else {
            accordion.classList.add('expanded');
            header.querySelector('.accordion-arrow').textContent = '‚ñº';
          }
        };

        // Content
        const content = document.createElement('div');
        content.className = 'accordion-content';

        // Create weekly match rows dengan styling khusus
        matches.forEach(match => {
          const matchRow = document.createElement('div');
          matchRow.className = 'match-row weekly-match'; // Tambahkan class weekly-match
          
          // Mapping field yang konsisten untuk berbagai format data dan olahraga
          const homeTeam = match.home || match.tima || match.timhome || match.team1 || match.player1 || '';
          const awayTeam = match.away || match.timb || match.timaway || match.team2 || match.player2 || '';
          const matchTime = match.jam || match.time || match.waktu || '';
          const matchDate = match.tanggal || match.date || match.tgl || '';
          
          // Enhanced score mapping with more field variations and proper 0 handling
          const homeScoreRaw = getFirstValidField(match.scorea, match.score1, match.homescore, match.skor_home, match.skor1, match.skorhome, match.home_score, match.scoreHome);
          const awayScoreRaw = getFirstValidField(match.scoreb, match.score2, match.awayscore, match.skor_away, match.skor2, match.skoraway, match.away_score, match.scoreAway);
          
          const homeScore = getScore(homeScoreRaw);
          const awayScore = getScore(awayScoreRaw);
          
          const betLink = match.linkbet || match.link || match.bet || '#';
          
          // Validate data - skip if essential fields are missing
          if (!homeTeam || !awayTeam || !matchTime || !matchDate) {
            return;
          }
          
          // Determine appropriate labels based on sport type
          let homeLabel = 'HOME';
          let awayLabel = 'AWAY';
          
          if (sportKey === 'tennis' || sportKey === 'badminton') {
            homeLabel = 'PLAYER 1';
            awayLabel = 'PLAYER 2';
          } else if (sportKey === 'esport') {
            homeLabel = 'TEAM 1';
            awayLabel = 'TEAM 2';
          }
          
          // Generate match status
          const matchStatus = getMatchStatus(matchTime, { tanggal: matchDate, ...match });
          
          // Disable bet button for finished matches
          const betButtonClass = matchStatus.statusClass === 'finished' ? 'bet-link disabled' : 'bet-link';
          const betButtonHref = matchStatus.statusClass === 'finished' ? '#' : escapeHTML(betLink);
          const betButtonOnClick = matchStatus.statusClass === 'finished' ? 'onclick="return false;"' : '';
          
          matchRow.innerHTML = `
            <div class="match-time">
              <div style="font-size: 11px; color: #666; margin-bottom: 3px;">${escapeHTML(matchDate)}</div>
              <div style="font-weight: bold; color: #333;">
                ${escapeHTML(matchTime)} WIB
                ${matchStatus.isLive ? '<div class="live-indicator"></div>' : ''}
              </div>
              <div class="match-status ${matchStatus.statusClass}">${matchStatus.statusText}</div>
            </div>
            <div class="match-teams">
              <div class="team-row">
                <span class="team-label">${homeLabel}</span>
                <span class="team-name">${escapeHTML(homeTeam)}${matchStatus.isLive ? createLiveBadge() : ''}</span>
                <span class="team-score">${escapeHTML(homeScore)}</span>
              </div>
              <div class="team-row">
                <span class="team-label">${awayLabel}</span>
                <span class="team-name">${escapeHTML(awayTeam)}</span>
                <span class="team-score">${escapeHTML(awayScore)}</span>
              </div>
            </div>
            <div class="match-bet">
              <a href="${betButtonHref}" target="_blank" class="${betButtonClass}" ${betButtonOnClick}>
                ${matchStatus.statusClass === 'finished' ? 'üèÅ FINISHED' : 'üí∞ BET'}
              </a>
            </div>
          `;
          
          content.appendChild(matchRow);
        });

        accordion.appendChild(header);
        accordion.appendChild(content);
        main.appendChild(accordion);
      });
    }
    
    // Show message when no weekly matches found
    function showNoWeeklyMatchesMessage() {
      const main = document.getElementById('main-content');
      if (main) {
        main.innerHTML = `
          <div class="weekly-section-header">
            <span style="font-size: 16px;">üìÖ PERTANDINGAN MINGGU INI</span>
          </div>
          <div class="error-container" style="
            border: 1px solid rgba(0, 123, 255, 0.3);
            background: rgba(0, 123, 255, 0.05);
            text-align: center;
            padding: 30px 20px;
            margin: 20px 0;
            border-radius: 12px;
          ">
            <div style="font-size: 48px; margin-bottom: 15px;">üìÖ</div>
            <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #007bff;">
              Tidak Ada Pertandingan Minggu Ini
            </div>
            <div style="color: #666; margin-bottom: 15px;">
              Belum ada jadwal pertandingan untuk 7 hari ke depan dari hari ini.
            </div>
            <div style="font-size: 12px; color: #999; margin-bottom: 20px;">
              Coba cek lagi nanti atau pilih filter lain untuk melihat pertandingan di tanggal yang berbeda.
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
              <button onclick="document.querySelector('[data-filter=\\"all\\"]').click()" style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer;">
                üìã Lihat Semua
              </button>
              <button onclick="document.querySelector('[data-filter=\\"today\\"]').click()" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                üìÖ Hari Ini
              </button>
              <button onclick="document.querySelector('[data-filter=\\"tomorrow\\"]').click()" style="padding: 8px 16px; background: #ffc107; color: black; border: none; border-radius: 6px; cursor: pointer;">
                üìÖ Besok
              </button>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.05); border-radius: 8px; border-left: 4px solid #007bff;">
              üí° <strong>Tips:</strong> Jadwal pertandingan biasanya dirilis 1-2 hari sebelumnya. Coba cek kembali besok untuk jadwal terbaru!
            </div>
          </div>
        `;
      }
    }
    
    // Filter by specific date (like Flashscore) dengan data filtering yang tepat
    function filterBySpecificDate(targetDate) {
      console.log('üéØ FILTERING BY SPECIFIC DATE:', targetDate);
      
      // Set current active date
      currentActiveDate = targetDate;
      
      // Update date select dropdown to match
      const dateSelect = document.getElementById('date-select');
      if (dateSelect) {
        dateSelect.value = targetDate;
        selectedDate = targetDate;
      }
      
      // Jika tidak ada data sport saat ini, return
      if (!currentSportData) {
        console.log('‚ùå No current sport data available');
        showNoMatchesMessage(targetDate);
        return;
      }
      
      // Filter data berdasarkan tanggal dengan string comparison
      const filteredData = {};
      let totalMatches = 0;
      let debugCount = 0;
      
      Object.entries(currentSportData).forEach(([league, matches]) => {
        const filteredMatches = matches.filter(match => {
          // Support multiple date field formats
          const rowTanggal = match.tanggal || match.date || match.tgl || '';
          const isMatch = rowTanggal === targetDate; // Perbandingan string langsung
          
          // Debug logging untuk verifikasi perbandingan
          if (debugCount < 3) {
            console.log("üìä FILTER COMPARISON:");
            console.log("  Target Date:", targetDate);
            console.log("  Row Tanggal:", rowTanggal);
            console.log("  Match Result:", isMatch);
            debugCount++;
          }
          
          return isMatch;
        });
        
        if (filteredMatches.length > 0) {
          filteredData[league] = filteredMatches;
          totalMatches += filteredMatches.length;
        }
      });
      
      console.log(`üìä Found ${totalMatches} matches for ${targetDate}`);
      
      // Render filtered data atau tampilkan pesan tidak ada data
      if (totalMatches > 0) {
        renderFilteredLeagues(filteredData, window.currentSport);
        showTemporaryNotification(`üìÖ Menampilkan ${totalMatches} pertandingan tanggal ${targetDate}`, 'success');
      } else {
        showNoMatchesMessage(targetDate);
        showTemporaryNotification(`üìÖ Tidak ada pertandingan di tanggal ${targetDate}`, 'warning');
      }
    }
    
    // Render filtered leagues untuk tanggal tertentu
    function renderFilteredLeagues(leagues, sportKey) {
      const main = document.getElementById('main-content');
      if (!main) return;
      
      main.innerHTML = '';
      
      Object.entries(leagues).forEach(([league, matches], idx) => {
        // Accordion
        const accordion = document.createElement('div');
        accordion.className = 'accordion' + (idx === 0 ? ' expanded' : '');

        // Header
        const header = document.createElement('div');
        header.className = 'accordion-header';
        header.innerHTML = `
          <span class="accordion-title">
            <span class="league-icon">${getLigaIcon(league)}</span>
            ${escapeHTML(league)}
          </span>
          <span class="accordion-arrow">‚ñ∂</span>`;
        
        header.onclick = () => {
          const wasExpanded = accordion.classList.contains('expanded');
          
          // Close all other accordions
          document.querySelectorAll('.accordion.expanded').forEach(acc => {
            if (acc !== accordion) {
              acc.classList.remove('expanded');
            }
          });
          
          // Toggle current accordion
          if (wasExpanded) {
            accordion.classList.remove('expanded');
          } else {
            accordion.classList.add('expanded');
          }
        };

        // Content
        const content = document.createElement('div');
        content.className = 'accordion-content';

        // Create match rows dengan LIVE detection dan Big Match Detection
        matches.forEach(match => {
          const matchRow = document.createElement('div');
          matchRow.className = 'match-row';
          
          const homeTeam = match.home || match.tima || '';
          const awayTeam = match.away || match.timb || '';
          const matchTime = match.jam || '';
          const matchDate = match.tanggal || '';
          
          // üèÜ BIG MATCH DETECTION
          const bigMatchInfo = detectBigMatch(homeTeam, awayTeam, league, match);
          
          // Add big match classes
          if (bigMatchInfo.isBig) {
            matchRow.classList.add(bigMatchInfo.type);
          }
          
          // Check if match is LIVE berdasarkan waktu WIB
          const isLive = checkIfMatchIsLive(matchTime, matchDate);
          
          // Add LIVE class to row if match is live
          if (isLive) {
            matchRow.classList.add('live-match');
          }
          
          // Determine appropriate labels based on sport type
          let homeLabel = 'HOME';
          let awayLabel = 'AWAY';
          
          if (sportKey === 'tennis' || sportKey === 'badminton') {
            homeLabel = 'PLAYER 1';
            awayLabel = 'PLAYER 2';
          } else if (sportKey === 'esport') {
            homeLabel = 'TEAM 1';
            awayLabel = 'TEAM 2';
          }
          
          // Generate match status
          const matchStatus = getMatchStatus(matchTime, { tanggal: matchDate, ...match });
          
          // Create badges HTML
          const badgesHTML = createBadgeHTML(bigMatchInfo.badges);
          
          // Create LIVE badge untuk home team jika pertandingan sedang live
          const liveBadge = isLive ? createLiveBadge() : '';
          
          // Enhanced score mapping with more field variations
          const homeScore = getScore(getFirstValidField(match.scorea, match.score1, match.homescore, match.skor_home, match.skor1, match.skorhome, match.home_score, match.scoreHome));
          const awayScore = getScore(getFirstValidField(match.scoreb, match.score2, match.awayscore, match.skor_away, match.skor2, match.skoraway, match.away_score, match.scoreAway));
          
          // Disable bet button for finished matches
          const betButtonClass = matchStatus.statusClass === 'finished' ? 'bet-btn disabled' : 'bet-btn';
          const betButtonHref = matchStatus.statusClass === 'finished' ? '#' : (match.linkbet || '#');
          const betButtonOnClick = matchStatus.statusClass === 'finished' ? 'onclick="return false;"' : '';
          
          matchRow.innerHTML = `
            <div class="match-time">
              <div>${escapeHTML(matchDate)}</div>
              <div>${escapeHTML(matchTime)}</div>
              <div class="match-status ${matchStatus.statusClass}">${matchStatus.statusText}</div>
              ${matchStatus.countdown ? `<div class="match-countdown">${matchStatus.countdown}</div>` : ''}
            </div>
            <div class="match-teams">
              <div class="team-row">
                <span class="team-label home" data-sport="${sportKey}">${homeLabel}</span>
                <span class="team-name">${escapeHTML(homeTeam)}${badgesHTML}${liveBadge}</span>
                <span class="team-score ${matchStatus.isLive || isLive ? 'live-score' : ''}">${homeScore}</span>
              </div>
              <div class="team-row">
                <span class="team-label away" data-sport="${sportKey}">${awayLabel}</span>
                <span class="team-name">${escapeHTML(awayTeam)}</span>
                <span class="team-score ${matchStatus.isLive || isLive ? 'live-score' : ''}">${awayScore}</span>
              </div>
            </div>
            <div class="match-bet">
              <a class="${betButtonClass}" href="${betButtonHref}" target="_blank" rel="noopener" ${betButtonOnClick}>${matchStatus.statusClass === 'finished' ? 'FINISHED' : 'BET'}</a>
            </div>
          `;
          
          content.appendChild(matchRow);
        });

        accordion.appendChild(header);
        accordion.appendChild(content);
        main.appendChild(accordion);
      });
    }
    
    // Show message when no matches found
    function showNoMatchesMessage(message = 'Tidak ada pertandingan ditemukan') {
      const main = document.getElementById('main-content');
      if (main) {
        // Get available dates for suggestion
        const availableDates = new Set();
        if (currentSportData) {
          Object.values(currentSportData).forEach(matches => {
            matches.forEach(match => {
              const matchDate = match.tanggal || match.date || match.tgl;
              if (matchDate) availableDates.add(matchDate);
            });
          });
        }
        
        const sortedDates = Array.from(availableDates).sort((a, b) => {
          let dateA = a.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
          let dateB = b.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1');
          return new Date(dateA) - new Date(dateB);
        });
        
        let suggestionText = '';
        if (sortedDates.length > 0) {
          const recentDates = sortedDates.slice(0, 5).join(', ');
          suggestionText = `<div style="margin-top: 15px; font-size: 12px; color: #666;">
            Tanggal tersedia: ${recentDates}${sortedDates.length > 5 ? ` dan ${sortedDates.length - 5} lainnya` : ''}
          </div>`;
        }
        
        main.innerHTML = `
          <div class="error-msg" style="
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px;
            color: #495057;
          ">
            <div style="font-size: 48px; margin-bottom: 20px;">üìÖ</div>
            <h3 style="margin: 0 0 15px 0; color: #343a40;">${message}</h3>
            <p style="margin: 0 0 20px 0; line-height: 1.5;">
              Silakan pilih tanggal lain atau coba kategori olahraga yang berbeda.
            </p>
            ${suggestionText}
            <div style="margin-top: 20px;">
              <button onclick="location.reload()" style="
                background: #007bff;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-weight: 500;
                margin: 0 5px;
              ">üîÑ Refresh</button>
              <button onclick="resetAllFilters()" style="
                background: #28a745;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-weight: 500;
                margin: 0 5px;
              ">üìã Tampilkan Semua</button>
            </div>
          </div>
        `;
      }
    }

    // Apply filters dengan string comparison yang tepat
    function applyFilters() {
      console.log('üéØ APPLY FILTERS START');
      console.log('üéØ Current filter:', currentFilter);
      console.log('üéØ Selected date:', selectedDate);
      console.log('üéØ Search query:', searchQuery);
      
      const matchRows = document.querySelectorAll('.match-row');
      
      if (!matchRows.length) {
        console.log('‚ùå No match rows found');
        showNoMatchesMessage('Data tidak tersedia');
        return;
      }

      // Get current date information menggunakan fungsi baru yang konsisten
      const todayFormatted = getTodayFormatted();
      const tomorrowFormatted = getTomorrowFormatted();
      
      console.log('üìÖ Today (DD/MM/YYYY):', todayFormatted);
      console.log('üìÖ Tomorrow (DD/MM/YYYY):', tomorrowFormatted);

      let visibleCount = 0;

      matchRows.forEach((row, index) => {
        let shouldShow = true;

        // Apply search filter first
        if (searchQuery) {
          const teamNames = row.querySelectorAll('.team-name');
          const searchText = Array.from(teamNames).map(t => t.textContent).join(' ').toLowerCase();
          shouldShow = searchText.includes(searchQuery);
        }

        // Apply date filter if search passed
        if (shouldShow) {
          const matchTimeDiv = row.querySelector('.match-time');
          if (matchTimeDiv) {
            const dateDiv = matchTimeDiv.querySelector('div:first-child');
            if (dateDiv) {
              const dateText = dateDiv.textContent.trim();
              
              // Filter berdasarkan dropdown date selector
              if (selectedDate && selectedDate !== 'all') {
                shouldShow = dateText === selectedDate;
                if (index < 3) {
                  console.log(`üîç Dropdown filter: "${selectedDate}" vs "${dateText}" = ${shouldShow}`);
                }
              }
              
              // Filter berdasarkan tombol quick filter dengan PERBANDINGAN STRING
              if (shouldShow && currentFilter && currentFilter !== 'all') {
                if (currentFilter === 'live') {
                  // Filter untuk LIVE matches
                  const timeDiv = matchTimeDiv.querySelector('div:nth-child(2)');
                  if (timeDiv) {
                    const timeText = timeDiv.textContent.replace(/WIB|wib/g, '').trim();
                    // Gunakan fungsi getMatchStatus yang sudah ada
                    const matchStatus = getMatchStatus(timeText, { tanggal: dateText });
                    shouldShow = matchStatus.isLive;
                    
                    if (index < 3) {
                      console.log(`üî¥ LIVE filter: "${dateText} ${timeText}" is LIVE = ${shouldShow}`);
                    }
                  } else {
                    shouldShow = false;
                  }
                }
                else if (currentFilter === 'today') {
                  shouldShow = dateText === todayFormatted;
                  if (index < 3) {
                    console.log(`üîç Today filter: "${todayFormatted}" vs "${dateText}" = ${shouldShow}`);
                  }
                } 
                else if (currentFilter === 'tomorrow') {
                  shouldShow = dateText === tomorrowFormatted;
                  if (index < 3) {
                    console.log(`üîç Tomorrow filter: "${tomorrowFormatted}" vs "${dateText}" = ${shouldShow}`);
                  }
                } 
                else if (currentFilter === 'week') {
                  // Check for this week (current week from today) - GUNAKAN DATE PARSING YANG BENAR
                  shouldShow = false;
                  try {
                    const today = new Date();
                    const weekStart = new Date(today);
                    weekStart.setDate(today.getDate() - today.getDay()); // Start of week (Sunday)
                    const weekEnd = new Date(weekStart);
                    weekEnd.setDate(weekStart.getDate() + 6); // End of week (Saturday)
                    
                    // Parse the match date dari format DD/MM/YYYY
                    const [day, month, year] = dateText.split('/').map(Number);
                    if (!isNaN(day) && !isNaN(month) && !isNaN(year)) {
                      const matchDate = new Date(year, month - 1, day);
                      shouldShow = matchDate >= weekStart && matchDate <= weekEnd;
                    }
                    
                    if (index < 3) {
                      console.log(`üîç Week filter: "${dateText}" in range = ${shouldShow}`);
                    }
                  } catch (error) {
                    console.warn('Week filter error:', error);
                    shouldShow = false;
                  }
                }
              } // End of quick filter check
            }
          }
        }

        // Show/hide the row
        if (shouldShow) {
          row.style.display = '';
          visibleCount++;
        } else {
          row.style.display = 'none';
        }
      });

      // Hide empty sections but keep structure intact
      document.querySelectorAll('.accordion').forEach(accordion => {
        const visibleMatches = accordion.querySelectorAll('.match-row:not([style*="none"])');
        if (visibleMatches.length > 0) {
          accordion.style.display = '';
        } else {
          accordion.style.display = 'none';
        }
      });
      
      console.log(`üéâ Filter applied! Showing ${visibleCount} out of ${matchRows.length} matches`);
      
      // Show message if no matches visible
      if (visibleCount === 0) {
        const filterInfo = currentFilter === 'all' ? 'semua filter' : `filter "${currentFilter}"`;
        console.log(`‚ö†Ô∏è No matches found for ${filterInfo}.`);
        
        // Show appropriate message
        let message = 'Tidak ada pertandingan ditemukan';
        if (currentFilter === 'today') {
          message = `Tidak ada pertandingan hari ini (${todayFormatted})`;
        } else if (currentFilter === 'tomorrow') {
          message = `Tidak ada pertandingan besok (${tomorrowFormatted})`;
        } else if (currentFilter === 'week') {
          message = 'Tidak ada pertandingan minggu ini';
        } else if (selectedDate && selectedDate !== 'all') {
          message = `Tidak ada pertandingan di tanggal ${selectedDate}`;
        } else if (searchQuery) {
          message = `Tidak ada pertandingan ditemukan untuk pencarian "${searchQuery}"`;
        }
        
        showNoMatchesMessage(message);
      }
    }

    // Update LIVE status secara berkala untuk SEMUA jenis olahraga
    function updateLiveMatches() {
      console.log('üîÑ Updating LIVE match status for all sports...');
      
      const matchRows = document.querySelectorAll('.match-row');
      let liveCount = 0;
      
      matchRows.forEach(row => {
        const timeDiv = row.querySelector('.match-time div:nth-child(2)');
        const dateDiv = row.querySelector('.match-time div:first-child');
        
        if (timeDiv && dateDiv) {
          const timeText = timeDiv.textContent.replace(/WIB|wib/g, '').trim();
          const dateText = dateDiv.textContent.trim();
          
          // Skip jika waktu tidak valid
          if (!timeText.includes(':')) return;
          
          // Gunakan getMatchStatus yang sudah ada
          const matchStatus = getMatchStatus(timeText, { tanggal: dateText });
          
          // Update status element
          let statusElement = row.querySelector('.match-status');
          if (statusElement) {
            statusElement.className = `match-status ${matchStatus.statusClass}`;
            statusElement.textContent = matchStatus.statusText;
          }
          
          // Update live indicator
          let liveIndicator = row.querySelector('.live-indicator');
          if (matchStatus.isLive && !liveIndicator) {
            liveIndicator = document.createElement('div');
            liveIndicator.className = 'live-indicator';
            timeDiv.style.position = 'relative';
            timeDiv.appendChild(liveIndicator);
          } else if (!matchStatus.isLive && liveIndicator) {
            liveIndicator.remove();
          }
          
          // Update countdown
          let countdownElement = row.querySelector('.match-countdown');
          if (matchStatus.countdown) {
            if (!countdownElement) {
              countdownElement = document.createElement('div');
              countdownElement.className = 'match-countdown';
              const statusParent = statusElement?.parentNode || timeDiv;
              statusParent.appendChild(countdownElement);
            }
            countdownElement.textContent = matchStatus.countdown;
          } else if (countdownElement) {
            countdownElement.remove();
          }
          
          // Update row styling untuk LIVE matches
          if (matchStatus.isLive) {
            row.classList.add('live-match');
            liveCount++;
          } else {
            row.classList.remove('live-match');
          }
          
          // Update score styling untuk LIVE matches
          const scoreElements = row.querySelectorAll('.team-score');
          scoreElements.forEach(scoreEl => {
            if (matchStatus.isLive) {
              scoreEl.classList.add('live-score');
              scoreEl.style.color = '#ff0000';
              scoreEl.style.fontWeight = 'bold';
            } else {
              scoreEl.classList.remove('live-score');
              scoreEl.style.color = '';
              scoreEl.style.fontWeight = '';
            }
          });
        }
      });
      
      console.log(`üî¥ Found ${liveCount} LIVE matches after update`);
      
      // Update LIVE filter button badge
      const liveBtn = document.querySelector('[data-filter="live"]');
      if (liveBtn) {
        // Remove existing count badge
        const existingBadge = liveBtn.querySelector('.live-count-badge');
        if (existingBadge) {
          existingBadge.remove();
        }
        
        // Add new count badge if there are live matches
        if (liveCount > 0) {
          const countBadge = document.createElement('span');
          countBadge.className = 'live-count-badge';
          countBadge.textContent = liveCount;
          countBadge.style.cssText = `
            background: white;
            color: #ff0000;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
            min-width: 16px;
            text-align: center;
          `;
          liveBtn.appendChild(countBadge);
        }
      }
      
      // Jika user sedang melihat filter LIVE, refresh tampilan
      if (currentFilter === 'live') {
        console.log('üîÑ Refreshing LIVE filter view...');
        // Delay sedikit untuk memastikan DOM sudah terupdate
        setTimeout(() => {
          filterLiveMatches();
        }, 500);
      }
    }

    // Dark mode toggle
    function setupDarkMode() {
      const darkToggleBtn = document.getElementById('dark-toggle');
      if (darkToggleBtn) {
        darkToggleBtn.onclick = function() {
          document.body.classList.toggle('dark-mode');
          darkToggleBtn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        };
      }
    }

    // Initialize app dengan Enhanced Features + LIVE Features
    function initializeApp() {
      console.log('üéØ Initializing app with fast loading system...');
      
      try {
        // üíæ LOAD CACHED DATA FIRST untuk instant loading
        const cacheInfo = loadCachedData();
        if (cacheInfo.hasCache) {
          console.log(`‚ö° Found cached data - enabling super fast loading! (${cacheInfo.dataCount} sports, ${cacheInfo.age}min old, ${cacheInfo.isFresh ? 'FRESH' : 'VALID'})`);
        }
        
        // Test format tanggal terlebih dahulu
        testDateFormatting();
        
        // Parse URL parameters untuk auto-load data tertentu
        const urlParams = parseURLParameters();
        console.log('üìã URL Parameters detected:', urlParams);
        
        // Set current sport berdasarkan URL parameter atau default
        window.currentSport = urlParams.sport || SPORTS[0].key;
        console.log('‚úÖ Current sport set to:', window.currentSport);
        
        // Start real-time clock
        updateRealTimeClock();
        
        // Render sports tabs
        renderSportsTabs(window.currentSport);
        
        // Setup filter and search IMMEDIATELY
        setupFilterAndSearch();
        
        // Setup date navigator
        setupDateNavigator();
        
        console.log('üöÄ Starting data fetch...');
        
        // Enhanced fetch dengan parameter URL
        if (urlParams.date || urlParams.category) {
          console.log('üéØ Loading specific data based on URL parameters...');
          fetchSpecificData(window.currentSport, urlParams.date, urlParams.category);
        } else {
          // Fetch and render leagues dengan auto-display logic
          fetchAndRenderLeagues(window.currentSport);
        }
        
        // Setup dark mode
        setupDarkMode();
        
        // Start timer updates
        updateMatchTimers();
        
        // Setup notifications
        setupNotifications();
        
        // Setup LIVE match detection - update setiap 30 detik untuk SEMUA olahraga
        console.log('üî¥ Setting up LIVE match detection...');
        setInterval(() => {
          updateLiveMatches();
        }, 30000);
        
        // Initial LIVE check setelah 5 detik
        setTimeout(() => {
          updateLiveMatches();
          console.log('üî¥ Initial LIVE status check completed');
        }, 5000);
        
        // Show initialization success message
        setTimeout(() => {
          showTemporaryNotification('üöÄ Data siap dimuat! Sistem optimasi aktif.', 'success');
        }, 1000);
        
        console.log('‚úÖ App initialized successfully with fast loading system');
        
      } catch (error) {
        console.error('‚ùå Error during app initialization:', error);
        showTemporaryNotification('‚ùå Error saat inisialisasi: ' + error.message, 'error');
      }
    }
    
    // Parse URL parameters untuk mendukung direct linking
    function parseURLParameters() {
      const params = new URLSearchParams(window.location.search);
      return {
        sport: params.get('sport'),
        date: params.get('date'), 
        category: params.get('category'),
        league: params.get('league')
      };
    }
    
    // Fetch data spesifik berdasarkan parameter
    async function fetchSpecificData(sport, date, category) {
      try {
        showLoader();
        console.log('üéØ Fetching specific data:', { sport, date, category });
        
        const data = await fetchSportData(sport, date, category);
        
        if (data && Object.keys(data).length > 0) {
          // Store data
          allMatchesData[sport] = data;
          currentSportData = data;
          
          // Filter data jika ada parameter tanggal
          let filteredData = data;
          if (date && date !== 'all') {
            filteredData = filterLeaguesByDate(data, date);
            currentActiveDate = date;
          }
          
          // Render data
          renderLeagues(filteredData, sport);
          
          // Setup filters
          setTimeout(() => {
            setupFilterAndSearch();
            if (date && date !== 'all') {
              filterBySpecificDate(date);
              showTemporaryNotification(`üìÖ Data untuk tanggal ${date} berhasil dimuat!`, 'info');
            } else {
              showTemporaryNotification('üìÖ Data berhasil dimuat!', 'success');
            }
          }, 200);
          
        } else {
          showError('Tidak ada data yang tersedia untuk parameter yang diminta.');
        }
        
      } catch (error) {
        console.error('‚ùå Error fetching specific data:', error);
        showError(`Error: ${error.message}`);
      }
    }
    
    // Notification system for upcoming matches
    function setupNotifications() {
      // Request notification permission
      if ('Notification' in window && Notification.permission === 'default') {
        Notification.requestPermission();
      }
      
      // Check for upcoming matches every 5 minutes
      setInterval(() => {
        checkUpcomingMatches();
      }, 300000); // 5 minutes
    }
    
    function checkUpcomingMatches() {
      const matchRows = document.querySelectorAll('.match-row');
      matchRows.forEach(row => {
        const timeElement = row.querySelector('.match-time div:nth-child(2)');
        if (!timeElement) return;
        
        const timeText = timeElement.textContent.replace(/[^0-9:]/g, '').trim();
        const now = new Date();
        const currentTime = now.getHours() * 60 + now.getMinutes();
        
        if (timeText.includes(':')) {
          const [hours, minutes] = timeText.split(':').map(Number);
          const matchTime = hours * 60 + minutes;
          const timeDiff = matchTime - currentTime;
          
          // Notify 15 minutes before match
          if (timeDiff === 15) {
            const teamNames = row.querySelectorAll('.team-name');
            if (teamNames.length >= 2) {
              showMatchNotification(teamNames[0].textContent, teamNames[1].textContent, '15 minutes');
            }
          }
        }
      });
    }
    
    function showMatchNotification(team1, team2, timeLeft) {
      if ('Notification' in window && Notification.permission === 'granted') {
        const notification = new Notification(`‚öΩ SPORT SLOTGOKIL - Match Starting Soon!`, {
          body: `${team1} vs ${team2} starts in ${timeLeft}`,
          icon: 'https://i.ibb.co/ksD92H7L/sg-logo-200x90-20211713191713-2.png',
          badge: 'https://i.ibb.co/ksD92H7L/sg-logo-200x90-20211713191713-2.png'
        });
        
        // Auto close after 5 seconds
        setTimeout(() => {
          notification.close();
        }, 5000);
      }
    }

    // Update real-time clock
    function updateRealTimeClock() {
      function updateClock() {
        const now = new Date();
        const timeString = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
        const currentTimeElement = document.getElementById('current-time');
        if (currentTimeElement) {
          currentTimeElement.textContent = `üïê ${timeString}`;
        }
      }
      
      // Update immediately
      updateClock();
      
      // Update every second
      setInterval(updateClock, 1000);
    }

    // Welcome screen handler dengan enhanced error handling
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ DOM loaded, setting up welcome screen...');
      
      try {
        const welcomeBtn = document.getElementById('welcome-btn');
        const welcomeScreen = document.getElementById('welcome-screen');
        const container = document.querySelector('.container');
        
        if (!welcomeBtn || !welcomeScreen || !container) {
          console.error('‚ùå Essential elements not found!', {
            welcomeBtn: !!welcomeBtn,
            welcomeScreen: !!welcomeScreen,
            container: !!container
          });
          // Fallback: try to initialize anyway
          setTimeout(() => {
            try {
              initializeApp();
            } catch (fallbackError) {
              console.error('‚ùå Fallback initialization failed:', fallbackError);
            }
          }, 1000);
          return;
        }
        
        welcomeBtn.addEventListener('click', function() {
          console.log('‚úÖ Welcome button clicked!');
          
          try {
            // Hide welcome screen and show container with smooth transition
            welcomeScreen.style.transition = 'opacity 0.5s ease-out';
            welcomeScreen.style.opacity = '0';
            
            setTimeout(() => {
              welcomeScreen.style.display = 'none';
              container.style.display = 'block';
              container.style.opacity = '0';
              container.style.transition = 'opacity 0.5s ease-in';
              
              setTimeout(() => {
                container.style.opacity = '1';
                
                // Initialize the app with enhanced error handling
                initializeApp();
              }, 10);
              
            }, 10);
            
          } catch (error) {
            console.error('‚ùå Error in welcome button handler:', error);
            showTemporaryNotification('‚ùå Error: ' + error.message, 'error');
            
            // Fallback: direct initialization
            try {
              initializeApp();
            } catch (fallbackError) {
              console.error('‚ùå Fallback failed:', fallbackError);
              alert('Critical Error: ' + fallbackError.message + '\n\nPage will reload.');
              location.reload();
            }
          }
        });
        
        console.log('‚úÖ Welcome screen setup complete');
        
      } catch (error) {
        console.error('‚ùå Critical error in DOMContentLoaded:', error);
      }
    });

    // Touch support for accordion (optional, for mobile)
    document.addEventListener('touchstart', function(){}, {passive:true});
  </script>
</body>
</html>
